"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6656],{21979:function(e,t,r){r.d(t,{I:function(){return g}});var n=r(52322),i=r(26284),a=r(70065),o=r(24772),l=r(62614),s=r(85573),c=r(43297),d=r(74105),u=r(20816),p=r(5879),h=r(2784);let g=e=>{let{url:t,placeholder:r,isDisabled:g=!1,variant:m="plain",customLabel:f,onClick:x,...v}=e,[b,j]=(0,h.useState)(!1),{hasCopied:y,onCopy:w}=(0,i.V)(t),C=(0,h.useRef)(null),k=(0,a.p)(),A="link-copied-toast",S=(0,o.S)({base:!0,sm:!1},{fallback:"sm"});(0,h.useEffect)(()=>{C.current&&b&&(C.current.focus(),C.current.select())},[b]);let _=(0,h.useCallback)(()=>j(!0),[]),E=(0,h.useCallback)(()=>j(!1),[]),I=(0,h.useCallback)(()=>{w(),k.isActive(A)||k({id:A,title:(0,n.jsx)(p.cC,{id:"pQjjYo"}),status:"success",duration:5e3}),null==x||x()},[w,k]),U=f||(0,n.jsx)(p.cC,{id:"he3ygx"}),P=!!(S&&void 0!==f),T=(0,n.jsx)(l.z,{isDisabled:g,onClick:I,variant:m,w:"100%",...P?{}:{height:"2rem",margin:2},...g?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:y?(0,n.jsx)(p.cC,{id:"6V3Ea3"}):U}),R=(0,n.jsx)(s.I,{ref:C,type:"text",variant:"filled",value:t,isReadOnly:!0,isDisabled:g,placeholder:r||void 0,onClick:_,onBlur:E,pointerEvents:g?"none":void 0,h:"3rem",...v});return P?(0,n.jsxs)(c.K,{w:"100%",children:[R,T]}):(0,n.jsxs)(d.B,{children:[R,(0,n.jsx)(u.x,{h:"3rem",zIndex:1,w:"unset",children:T})]})}},21156:function(e,t,r){r.d(t,{V:function(){return a}});var n=r(93202),i=r(89918);class a extends i.j{getSystemChatMessage(e){return{role:n.XaP.System,operation:this.systemPromptOperation,variables:e}}getUserChatMessage(e){return{role:n.XaP.User,operation:this.userPromptOperation,variables:e}}constructor({variables:e,systemPromptOperation:t,userPromptOperation:r,params:n}){super({params:n}),this.variables=e,this.systemPromptOperation=t,this.userPromptOperation=r}}},89918:function(e,t,r){r.d(t,{j:function(){return a}});var n=r(93202);let i={model:"gpt-3.5-turbo-1106",provider:n.nyn.Azure};class a{prepare(e){let{variables:t,history:r=[],params:n}=e,i=this.getSystemChatMessage(t),a=this.getUserChatMessage(t);return{messages:[i,...r,a],params:{...this.params,...n}}}constructor({params:e}){this.params={...i,...e}}}},77787:function(e,t,r){r.d(t,{c:function(){return o}});var n=r(72338),i=r(30764),a=r(396);let o=(e,t)=>{let r=l(e),n=i.HY.from(t),o=r.serializeFragment(n),s=(0,a.S)(o),c=document.createElement("div");c.appendChild(s);let d=c.innerHTML;return d},l=e=>{let{schema:t,extensionManager:r}=e;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;let a=i.PW.marksFromSchema(t),o=i.PW.nodesFromSchema(t),l=e.extensionManager.attributes;r.extensions.forEach(e=>{if(!e.config.renderHTMLforAI)return;let t=l.filter(t=>t.type===e.name);o[e.name]&&(o[e.name]=r=>{let i=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:i})}),a[e.name]&&(a[e.name]=(r,i)=>{let a=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:i,HTMLAttributes:a})})});let s=new i.PW(o,a);return t.cached.aiDomSerializer=s,s}},9231:function(e,t,r){r.d(t,{T1:function(){return n},VG:function(){return a},Vh:function(){return o},rm:function(){return i}});class n extends Error{constructor(e,t){super(e),this.name="StreamError",this.code="stream_error",t&&(this.code=t)}}class i extends n{constructor(e){super(e),this.name="StreamTimeoutError",this.code="timeout"}}class a extends n{constructor(e){super(e),this.name="StreamOnOpenError",this.code="on_open"}}class o extends n{constructor(e){super(e),this.name="StreamUnexpectedCloseError",this.code="unexpected_close"}}},50634:function(e,t,r){r.d(t,{M:function(){return c},j:function(){return d}});var n=r(2784),i=r(9449),a=r(1010),o=r(31490),l=r(95993);class s extends l.GJ{getContent(){return this.content}constructor(e){super({start:()=>{var t;null===(t=e.onStart)||void 0===t||t.call(e)},transform:async(t,r)=>{var n,i,a;"content"===t.event&&(this.content+=t.data,null===(n=e.onContent)||void 0===n||n.call(e,this.content)),"done"===t.event&&(null===(i=e.onComplete)||void 0===i||i.call(e,this.content)),"cancel"===t.event&&(null===(a=e.onCancel)||void 0===a||a.call(e)),r.enqueue(t)},flush(){var t;null===(t=e.onFlush)||void 0===t||t.call(e)}}),this.content=""}}let c=(e,t)=>{let r=(0,n.useCallback)(r=>{let{variables:n,interactionId:l,params:c,workspaceId:d}=r;l=l||(0,o.nZ)();let u=e.prepare({variables:n,params:c,interactionId:l}),{cancel:p,stream:h}=(0,i.z4)({...u,workspaceId:d,interactionId:l},{timeout:t.timeout}),g=new s(t),m=h.pipeThrough(g),f=new Promise((e,r)=>{(0,a.GO)(m,{onError(e){var n;null===(n=t.onError)||void 0===n||n.call(t,e),r(e)},onDone(){e(g.getContent())}})});return{cancel:p,promise:f}},[t,e]);return{generate:r}},d=(e,t)=>{let r=(0,n.useCallback)(r=>{let{variables:n,interactionId:l,workspaceId:c}=r;l=l||(0,o.nZ)();let{cancel:d,stream:u}=(0,i.ZE)({promptKey:e,variables:n,interactionId:l,workspaceId:c},{timeout:t.timeout}),p=new s(t),h=u.pipeThrough(p),g=new Promise((e,r)=>{(0,a.GO)(h,{onError(e){var n;null===(n=t.onError)||void 0===n||n.call(t,e),r(e)},onDone(){e(p.getContent())}})});return{cancel:d,promise:g}},[t,e]);return{generate:r}}},9449:function(e,t,r){r.d(t,{z4:function(){return f},ZE:function(){return m},pM:function(){return x}});var n,i,a=r(95993),o=r(14274),l=r(9231);class s extends a.GJ{constructor(){super({transform:async(e,t)=>{if("error"===e.event){t.error(new l.T1("StreamError message received: ".concat(JSON.stringify(e)),e.data));return}if("cancel"===e.event||"done"===e.event||"content"===e.event){t.enqueue(e);return}}})}}async function c(e,t){let r;let n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}function d(){return{data:"",event:"",id:"",retry:void 0}}(n=i||(i={}))[n.NewLine=10]="NewLine",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.Colon=58]="Colon";let u="text/event-stream",p="last-event-id";function h(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(u)))throw Error("Expected content-type to be ".concat(u,", Actual: ").concat(t))}class g extends Error{constructor(e){super(),this.timeout=e}}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.v.API_HOST+"/ai/v2/generation",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:n,body:JSON.stringify(e)};return v(r,i,t)}let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.v.API_HOST+"/ai/chatCompletion",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let i={method:"POST",headers:n,body:JSON.stringify(e)};return v(r,i,t)},x=e=>{let{streamId:t,lastEventId:r,interactionId:n,...i}=e,a=new URL(o.v.API_HOST+"/ai/resumeChatCompletion");return a.searchParams.set("interactionId",n),v(a.toString(),{method:"GET",headers:{"gamma-chat-completion-stream-id":t,"last-event-id":r}},{streamResumingEnabled:!0,...i})},v=(e,t,r)=>{var n;let i=r.retries||0,o=r.backoff||1e3,m=r.timeout||null,f=null!==(n=r.streamResumingEnabled)&&void 0!==n&&n,x=0,v=new AbortController,b=!1,j=!1,y=!1,w=null,C=!1,k=()=>o*Math.pow(2,Math.max(x-1,0)),A={};f&&(A["gamma-stream-resuming-enabled"]="true");let S=new a.Pz({async start(r){null!=m&&(w=setTimeout(()=>{C=!0,v.abort(),r.error(new l.rm("Stream timed out after ".concat(m,"ms")))},m));let{headers:n,...a}=t;(function(e,t){let{signal:r,headers:n,onopen:i,onmessage:a,onclose:o,onerror:l,openWhenHidden:s,fetch:g,...m}=t;return new Promise((t,f)=>{let x;let v={...n};function b(){x.abort(),document.hidden||A()}v.accept||(v.accept=u),s||document.addEventListener("visibilitychange",b);let j=1e3,y=0;function w(){document.removeEventListener("visibilitychange",b),window.clearTimeout(y),x.abort()}null==r||r.addEventListener("abort",()=>{w(),t()});let C=null!=g?g:window.fetch,k=null!=i?i:h;async function A(){var r,n;x=new AbortController;try{let n,i,l,s;let u=await C(e,{...m,headers:v,signal:x.signal});await k(u),await c(u.body,(r=function(e,t,r){let n=d(),i=new TextDecoder,a=!1;return function(o,l){if(0===o.length)null==r||r(n),n=d(),a=!1;else if(l>0){let r=i.decode(o.subarray(0,l)),s=l+(32===o[l+1]?2:1),c=i.decode(o.subarray(s));switch(r){case"data":a?n.data=n.data+"\n"+c:(n.data=c,a=!0);break;case"event":n.event=c;break;case"id":e(n.id=c);break;case"retry":let d=parseInt(c,10);isNaN(d)||t(n.retry=d)}}}}(e=>{e?v[p]=e:delete v[p]},e=>{j=e},a),s=!1,function(e){void 0===n?(n=e,i=0,l=-1):n=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(n,e);let t=n.length,a=0;for(;i<t;){s&&(10===n[i]&&(a=++i),s=!1);let e=-1;for(;i<t&&-1===e;++i)switch(n[i]){case 58:-1===l&&(l=i-a);break;case 13:s=!0;case 10:e=i}if(-1===e)break;r(n.subarray(a,e),l),a=i,l=-1}a===t?n=void 0:0!==a&&(n=n.subarray(a),i-=a)})),null==o||o(),w(),t()}catch(e){if(!x.signal.aborted)try{let t=null!==(n=null==l?void 0:l(e))&&void 0!==n?n:j;window.clearTimeout(y),y=window.setTimeout(A,t)}catch(e){w(),f(e)}}}A()})})(e,{openWhenHidden:!0,credentials:"include",...a,headers:{...n,...A},signal:v.signal,onopen:async e=>{if(!e.ok||e.headers.get("content-type")!==u){if(e.status>=400&&e.status<500&&429!==e.status)v.abort(),r.error(new l.VG("Unable to complete request"));else if(x++<i&&!b)throw new g(k());else v.abort(),r.error(new l.VG("Unable to complete request"))}},onmessage(e){if(y){j||(j=!0,console.log("[AIStream] enqueue cancel event",{...e,event:"cancel",data:""}),r.enqueue({...e,event:"cancel",data:""}),r.close(),v.abort());return}C||(r.enqueue(e),b=!0)},onclose(){w&&(clearTimeout(w),w=null),r.close()},onerror(e){if(e instanceof g){if(y)throw console.error("Stream cancelled - not retrying"),Error("Stream cancelled");return e.timeout}if(e instanceof Error){if(console.error("Uncaught stream error",e),!f)throw e;if(x++<i)return k();throw e}if(b){let e="Stream closed unexpectedly";throw console.error("Uncaught stream error",e),new l.Vh(e)}}}).catch(e=>{w&&(clearTimeout(w),w=null),y||r.error(e)})}});return{stream:S.pipeThrough(new s),cancel:()=>{y||(y=!0)}}}},1010:function(e,t,r){r.d(t,{GO:function(){return a},fZ:function(){return l},uS:function(){return o}});var n=r(37164),i=r(9231);let a=(e,t)=>{let r=e.getReader(),n=async()=>{var e,i,a;try{let{done:a,value:o}=await r.read();if(a)null===(i=t.onDone)||void 0===i||i.call(t);else{null===(e=t.onMessage)||void 0===e||e.call(t,o),n();return}}catch(e){null===(a=t.onError)||void 0===a||a.call(t,e instanceof Error?e:Error(e))}};n()},o=e=>e instanceof i.T1?{errorCode:e.code,errorMessage:e.message}:e instanceof Error?{errorMessage:e.message}:{errorMessage:e},l=(0,n.kP)("0123456789abcdefghijklmnopqrstuvwxyz",16)},31490:function(e,t,r){r.d(t,{Io:function(){return b},Lt:function(){return v},Wf:function(){return m},XH:function(){return x},fM:function(){return f},gb:function(){return c},hq:function(){return s},mV:function(){return d},nZ:function(){return j},o:function(){return p},pQ:function(){return g},qZ:function(){return u},vL:function(){return h}});var n=r(37164),i=r(14274),a=r(1163),o=r(11050),l=r(36651);let s=e=>{o.co.track(o.AA.AI_REQUEST_SENT,{...e,gitSHA:i.v.GIT_SHA})},c=e=>{o.co.track(o.AA.AI_REQUEST_COMPLETE,{...e,gitSHA:i.v.GIT_SHA})},d=e=>{o.co.track(o.AA.AI_REQUEST_ABORT,{...e,gitSHA:i.v.GIT_SHA})},u=e=>{o.co.track(o.AA.AI_REQUEST_STREAM_START,{...e,gitSHA:i.v.GIT_SHA})},p=e=>{o.co.track(o.AA.AI_REQUEST_RESPONSE,{...e,gitSHA:i.v.GIT_SHA})},h=e=>{o.co.track(o.AA.AI_SUGGESTION_APPLY,{...e,gitSHA:i.v.GIT_SHA})},g=e=>{o.co.track(o.AA.AI_REQUEST_ERROR,{...e,gitSHA:i.v.GIT_SHA})},m=e=>{o.co.track(o.AA.AI_REQUEST_RETRY,{...e,gitSHA:i.v.GIT_SHA})},f=e=>{o.co.track(o.AA.AI_DOC_RATED,{...e,gitSHA:i.v.GIT_SHA,product:(0,a.K9)((0,l.rW)())})},x=e=>{let t=e.tags.reduce((e,t)=>(e[t]=!0,e),{});o.co.track(o.AA.AI_DOC_FEEDBACK_SUBMITTED,{...e,tags_map:t,gitSHA:i.v.GIT_SHA,product:(0,a.K9)((0,l.rW)())})},v=e=>{o.co.track(o.AA.AI_IMAGE_FEEDBACK_SUBMITTED,{...e,gitSHA:i.v.GIT_SHA})},b=e=>{o.co.track(o.AA.AI_IMAGE_RATED,{...e,gitSHA:i.v.GIT_SHA})},j=()=>(0,n.x0)()},14764:function(e,t,r){r.d(t,{r:function(){return b}});var n=r(52322),i=r(38035),a=r(11550),o=r(57124),l=r(97763),s=r(40651),c=r(62614),d=r(81540),u=r(77533),p=r(42946),h=r(49929),g=r(94523),m=r(5879),f=r(2784),x=r(86704);let v=(0,f.memo)(e=>{let{credits:t,lowCreditStatus:r,onClick:i,variant:a="solid"}=e,o=null===t,l=(0,x.ko)();return(0,n.jsx)(g.kH,{label:(0,n.jsx)(m.cC,{id:"IY3q+2"}),placement:"top",children:(0,n.jsx)(c.z,{onClick:i,isDisabled:o,..."ghost"===a?{variant:"ghost",size:"sm",colorScheme:"blackAlpha"}:{variant:"unstyled",bg:"white",px:4},color:r?l[r].lightColor:void 0,leftIcon:(0,n.jsx)(h.G,{icon:p.owJ,size:"sm"}),rightIcon:(0,n.jsx)(h.G,{color:"var(--chakra-colors-gray-600)",icon:p.DBf,size:"xs"}),children:o?(0,n.jsx)(d.$,{size:"xs"}):(0,n.jsx)(u.x,{as:"span",color:null===r?void 0:l[r].lightColor,children:(0,n.jsx)(m.cC,{id:"T57gLR",values:{credits:t}})})})})}),b=e=>{let{modalId:t="ai-credits-modal",variant:r,segmentEvent:c,...d}=e,{credits:u,lowCreditStatus:p}=(0,l.qO)(),h=(0,o.fg)(),{isOpen:g,onOpen:m,onClose:f}=(0,a.M)({id:t});return h?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.k,{...d,children:(0,n.jsx)(v,{credits:u,onClick:m,lowCreditStatus:p,variant:r})}),(0,n.jsx)(s.H,{isOpen:g,onOpen:m,onClose:f,credits:u,segmentEvent:c})]})}},40651:function(e,t,r){r.d(t,{H:function(){return X}});var n=r(52322),i=r(29705),a=r(92850),o=r(26468),l=r(22226),s=r(2338),c=r(17993),d=r(77533),u=r(54326),p=r(29117),h=r(28535),g=r(81540),m=r(97217),f=r(75768),x=r(62614),v=r(82554),b=r(11082),j=r(42946),y=r(49929),w=r(5879),C=r(87254),k=r(2784),A=r(21979),S=r(42111),_=r(1196),E=r(94199),I=r(44663),U=r(87342),P=r(57124),T=r(11050),R=r(36651),M=r(78462),O=r(86704),N=r(97763),H=r(49259),D=r(97010),z=r(87436),L=r(95897),F=r(89511),G=r(11121),W=r(57574);let B=e=>{let{onContactUsClick:t,...r}=e,i=(0,S.ye)("aiDebits"),a=(0,S.ye)("ai-credits").enabled,o=i.wizardCreation,l=i.chatSuggestion,s=i.autocomplete,c=i.generateImage,d=(0,S.ye)("aiAutocomplete"),u=(0,S.ye)("aiGeneratedImages");return(0,n.jsxs)(H.U,{allowMultiple:!0,...r,children:[(0,n.jsx)(q,{accordionLabel:C.ag._({id:"IVVQ18"}),children:(0,n.jsxs)(D.QI,{children:[(0,n.jsxs)(D.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(w.cC,{id:"p4u+sD"})})," ",(0,n.jsx)(w.cC,{id:"XSCvWA",values:{aiGeneration:o,GAMMA_ARTIFACT_PROPER_NOUN:E.Yc}})]}),(0,n.jsxs)(D.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(w.cC,{id:"gPyWmV"})})," ",(0,n.jsx)(w.cC,{id:"C5Y3lw",values:{aiEditing:l}}),(0,n.jsx)(w.cC,{id:"bO6EBT"})]}),u&&(0,n.jsxs)(D.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(w.cC,{id:"0jmvoW"})})," ",(0,n.jsx)(w.cC,{id:"Y1aHEs",values:{aiImages:c}})]}),d&&(0,n.jsxs)(D.HC,{children:[(0,n.jsx)("strong",{children:(0,n.jsx)(w.cC,{id:"eBVeIQ"})})," ",(0,n.jsx)(w.cC,{id:"AJ11w6",values:{aiAutocomplete:s,AUTOCOMPLETE_SLASH_SHORTCUT:W.Y,AUTOCOMPLETE_INPUT_SHORTCUT:W.o}})]})]})}),a&&(0,n.jsx)(q,{accordionLabel:C.ag._({id:"1pwdRz"}),children:(0,n.jsx)(w.cC,{id:"1Ijs7v",values:{GAMMA_PRO_PROPER_NOUN:E.x8,GAMMA_PROPER_NOUN:E.N6}})})]})},q=e=>{let{accordionLabel:t,children:r}=e;return(0,n.jsxs)(z.Q,{children:[(0,n.jsx)("h2",{children:(0,n.jsxs)(L.K,{px:2,py:2,fontSize:"sm",children:[(0,n.jsx)(h.xu,{as:"span",flex:"1",textAlign:"left",fontWeight:500,children:t}),(0,n.jsx)(F.X,{})]})}),(0,n.jsx)(G.H,{pb:4,px:2,fontSize:"sm",children:r})]})},Q=()=>({friend:{label:C.ag._({id:"uU68PM"})},teammate:{label:C.ag._({id:"O/k8gF"})},buy:{label:C.ag._({id:"/2RIKE"})}}),V={fontWeight:500,letterSpacing:"normal",color:"gray.600"},Y=e=>{let{onClose:t,onOpen:r,credits:C,segmentEvent:H=T.AA.GAMMA_PRO_UPSELL_CALLOUT_AI_CREDITS}=e,{user:D,currentWorkspace:z}=(0,R.SE)(),L=(0,R.d3)(),F=(0,S.ye)("upsellUXEnabled_Pro"),G=(0,P.fg)(),[W,q]=(0,k.useState)(F?"buy":"friend"),Y=(0,S.ye)("ai-credits"),X=(0,S.ye)("intercom"),K=(0,I.G)(),{lowCreditStatus:Z}=(0,N.qO)(),J=(0,k.useMemo)(()=>D?"teammate"===W&&z&&L?(0,M.Mr)({userId:D.id,workspace:z}):"friend"===W?(0,M.Mr)({userId:D.id}):"":"",[L,z,W,D]),$=Y.enabled,ee=Y.referralBonus,et=Q()[W],er=(0,k.useCallback)(()=>{K(),t()},[K,t]),en=(0,O.ko)();return(0,n.jsxs)(a.u_,{isOpen:!0,onClose:t,size:"xl",children:[(0,n.jsx)(o.Z,{}),(0,n.jsxs)(l.h,{children:[(0,n.jsx)(s.o,{}),(0,n.jsxs)(c.g,{py:4,px:6,textAlign:"center",children:[(0,n.jsx)(d.x,{...V,fontSize:"md",color:Z?en[Z].darkColor:void 0,children:Z?en[Z].description:(0,n.jsx)(w.cC,{id:"xy3nnP"})}),(0,n.jsx)(u.x,{p:0,color:Z?en[Z].lightColor:void 0,children:(0,n.jsxs)(p.U,{children:[(0,n.jsx)(h.xu,{as:"span",fontSize:"xl",children:(0,n.jsx)(y.G,{icon:j.owJ})})," ",null===C?(0,n.jsx)(g.$,{size:"sm"}):(0,n.jsx)(w.cC,{id:"T57gLR",values:{credits:C}})]})}),(0,n.jsx)(d.x,{textAlign:"left",fontSize:"sm",pt:2,...V,children:(0,n.jsx)(w.cC,{id:"lUUl1i"})})]}),(0,n.jsxs)(m.f,{pb:4,children:[$?(0,n.jsxs)(c.g,{spacing:4,children:[(0,n.jsxs)(f.h,{variant:"ghost",size:"sm",spacing:0,gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center",children:[!G&&F&&(0,n.jsx)(x.z,{onClick:()=>q("buy"),isActive:"buy"===W,color:"buy"===W?void 0:"gray.700",children:(0,n.jsx)(w.cC,{id:"KctW9G"})}),(0,n.jsx)(x.z,{onClick:()=>q("friend"),isActive:"friend"===W,color:"friend"===W?void 0:"gray.700",children:(0,n.jsx)(w.cC,{id:"KSBmDv"})}),L&&(0,n.jsx)(x.z,{leftIcon:(0,n.jsx)(y.G,{icon:j.FKd}),onClick:()=>q("teammate"),isActive:"teammate"===W,color:"teammate"===W?void 0:"gray.700",children:(0,n.jsx)(w.cC,{id:"dUOpaF"})})]}),("friend"===W||"teammate"===W)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.U,{spacing:2,children:[(0,n.jsxs)(d.x,{fontSize:"sm",minW:"50%",children:["friend"===W&&(0,n.jsx)(w.cC,{id:"tBKKYy",values:{referralBonusAmount:ee,GAMMA_PROPER_NOUN:E.N6}}),"teammate"===W&&(0,n.jsx)(w.cC,{id:"q8MWFp",values:{referralBonusAmount:ee}})]}),(0,n.jsxs)(v.C,{colorScheme:"green",fontSize:"xs",px:"0.4em",py:"0.2em",children:["+"," ",(0,n.jsx)(w.cC,{id:"NFNFrR",values:{referralBonusAmount:ee}})]})]}),(0,n.jsx)(A.I,{url:J,customLabel:et.label,variant:"solid"})]}),"buy"===W&&(0,n.jsx)(U.m,{segmentEvent:H,onOpenCallback:t,onCloseCallback:r})]}):(0,n.jsxs)(p.U,{align:"baseline",spacing:1,children:[(0,n.jsx)(d.x,{children:(0,n.jsx)(w.cC,{id:"0TJN6B"})}),X?(0,n.jsx)(x.z,{onClick:er,variant:"link",children:(0,n.jsx)(w.cC,{id:"Bhgd0l"})}):(0,n.jsxs)(b.r,{href:"mailto:".concat(_.p),children:[(0,n.jsx)(w.cC,{id:"Bhgd0l"}),(0,n.jsx)(i.h,{ml:1,transform:"translateY(-2px)"})]})]}),(0,n.jsx)(B,{my:4,onContactUsClick:X?er:void 0})]})]})]})},X=(0,k.memo)(e=>{let{isOpen:t,...r}=e;return t?(0,n.jsx)(Y,{...r}):null})},85420:function(e,t,r){r.d(t,{J:function(){return g}});var n=r(52322),i=r(82554),a=r(29117),o=r(77533),l=r(42946),s=r(49929),c=r(94523),d=r(5879),u=r(42111),p=r(57124),h=r(86704);let g=e=>{var t;let{type:r,...g}=e,m=(0,u.ye)("aiDebits"),f=(0,p.fg)();if(f)return null;let x=null!==(t=m[r])&&void 0!==t?t:h.Sy[r];return(0,n.jsx)(c.kH,{label:(0,n.jsx)(d.cC,{id:"B7jvsP",values:{numCredits:x}}),children:(0,n.jsx)(i.C,{colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2,...g,children:(0,n.jsxs)(a.U,{spacing:1,children:[(0,n.jsx)(o.x,{children:x}),(0,n.jsx)(s.G,{icon:l.owJ,size:"sm"})]})})})}},7144:function(e,t,r){r.d(t,{d:function(){return u}});var n=r(93202),i=r(42111),a=r(57124),o=r(91994),l=r(11050),s=r(21733),c=r(86704),d=r(17749);let u=async(e,t)=>{var r,u;let p=(0,a.uL)("unlimited_ai",t),h=i.VH.get("aiDebits"),g=null!==(u=h[e])&&void 0!==u?u:c.Sy[e];if(l.co.track(l.AA.AI_CREDITS_USED,{operation:e,used:g,has_unlimited_ai:p}),0===g||p)return;let m=(null==t?void 0:t.id)||(0,s.n_)();if(!m)return;let f=(0,n.WQq)(),x=await f.mutate({mutation:n.ATM,variables:{value:g,workspaceId:m}}),v=null===(r=x.data)||void 0===r?void 0:r.deductCredits;if(!v)return null;l.co.track(l.AA.AI_CREDITS_DEDUCTED,{operation:e,used:g,remaining:v.credits});let b=(0,o.bh)();return b.dispatch((0,d.B1)({availableCredits:v.credits})),v.credits}},1196:function(e,t,r){r.d(t,{p:function(){return n}});let n="support@gamma.app"},66922:function(e,t,r){r.d(t,{Iw:function(){return s},NF:function(){return c},Qz:function(){return d},vr:function(){return l}});var n=r(54933),i=r(87254),a=r(14274),o=r(93202);let l={key:"square",name:()=>i.ag._({id:"1DA6ap"}),width:1024,height:1024},s={"stable-diffusion-xl-v1-0":{label:()=>i.ag._({id:"pG7O41"}),description:()=>i.ag._({id:"R75q3f"}),icon:n.qTC,aspectRatios:{square:{key:"square",name:()=>i.ag._({id:"1DA6ap"}),width:1024,height:1024},landscape:{key:"landscape",name:()=>i.ag._({id:"XxIeKn"}),width:1216,height:832},portrait:{key:"portrait",name:()=>i.ag._({id:"3bV9gD"}),width:896,height:1152}},provider:"baseten"},"imagen-2":{label:()=>i.ag._({id:"kJygHz"}),description:()=>i.ag._({id:"PO9AMt"}),icon:n.qZB,isPremium:!0,flag:"imagen",freeFlag:"imagenFree",aspectRatios:{square:{key:"square",name:()=>i.ag._({id:"1DA6ap"}),width:1536,height:1536},landscape:{key:"landscape",name:()=>i.ag._({id:"XxIeKn"}),width:1536,height:1536},portrait:{key:"portrait",name:()=>i.ag._({id:"3bV9gD"}),width:1152,height:2016}},provider:"google"},"dall-e-3":{label:()=>i.ag._({id:"sxkWRg"}),description:()=>i.ag._({id:"WjmZIf"}),isPremium:!0,icon:n.wRQ,flag:"dalle3",freeFlag:"dalle3Free",aspectRatios:{square:{key:"square",name:()=>i.ag._({id:"1DA6ap"}),width:1024,height:1024},landscape:{key:"landscape",name:()=>i.ag._({id:"XxIeKn"}),width:1792,height:1024},portrait:{key:"portrait",name:()=>i.ag._({id:"3bV9gD"}),width:1024,height:1792}},provider:"azure"}},c="stable-diffusion-xl-v1-0",d=async e=>{let{themeId:t,docId:r,...n}=e,i=t?{context:o.wNJ.Theme,themeId:e.themeId}:r?{context:o.wNJ.Doc,docId:e.docId}:{context:e.context},l="".concat(a.v.API_HOST||"https://api.gamma.app","/media/images/generate"),s=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,...i}),credentials:"include"});if(!s.ok){let e=await s.json(),t="".concat(e.error,": ").concat(e.message);if("prohibited_input"===e.code&&e.categories)throw new h({categories:e.categories});throw new u(t,e)}return s.json()};class u extends Error{constructor(e,t){super(e,t),this.response=t}}u.prototype.name="GenerateImageError";let p={sexual:()=>i.ag._({id:"gHG6wD"}),violence:()=>i.ag._({id:"x40BeZ"}),prohibited:()=>i.ag._({id:"UiRApc"})};class h extends Error{parseCategories(e){return e.sexual||e["sexual/minors"]?"sexual":e.violence||e["violence/graphic"]?"violence":"prohbited"}constructor({categories:e}){let t="Cannot generate image, prohibited (reasons=".concat(JSON.stringify(Object.keys(e)),")");super(t),this.code="prohibited_input",this.category=this.parseCategories(e),this.messageTranslated=p[this.category]()||i.ag._({id:"aUSC+t"})}}},39877:function(e,t,r){r.d(t,{C:function(){return g},J:function(){return m}});var n=r(84636),i=r.n(n),a=r(14274),o=r(42111),l=r(87205),s=r(81674),c=r(38914),d=r(46152),u=r.n(d);let p=async e=>{let t=e.split(" ")[0];try{var r;let e=await fetch("/api/icons/search?count=5&query=".concat(t),{credentials:"include"}),n=null===(r=await e.json())||void 0===r?void 0:r.data;if(!n||0===n.length)return console.warn("[fetchIcons] No icons found. Using default set"),u()(h);return console.debug("[AI fetchIcons] fetched icons",n),n}catch(e){return console.error("(caught) [fetchIcons] fetchResults:",e),u()(h)}},h=[c.ILF,c.Y$T,c.Tab,c.Mzg,c.Qz9,c.gMD].map(e=>{let t=(0,s.qv)(e),[r,n]=t.icon;return{id:e.iconName,provider:"fa",styles:["light"],src:"".concat(a.v.FRONTEND_URL,"/api/icons/").concat(e.iconName,".svg?provider=fa&style=light"),html:t.html[0],width:r,height:n}}),g=async e=>{let{query:t,provider:r,options:n={},count:i=35,prefetch:a=!1}=e,s="web"===r?o.VH.get("webImageProviderType"):void 0;if("fontawesome"===r){let e=(await p(t)).map(e=>({id:e.id,imageUrl:e.src,width:e.width,height:e.height,attributionUrl:"",thumbnailUrl:"",credit:""}));return e}let c=f({query:t,provider:r,options:{type:s,...n},count:i});try{let e=await fetch(c,{credentials:"include"}),t=await e.json();if(!((null==t?void 0:t.length)>=0))throw Error(t);return a&&Promise.all(t.map(e=>(0,l.GN)(e.imageUrl))).then(()=>{console.debug("[fetchImageSearchResults] images downloaded in background")}).catch(e=>{console.debug("[fetchImageSearchResults] error downloading image:",e)}),t}catch(e){return console.error("(caught) [fetchImages] fetchResults:",e),[]}},m=async e=>{let{queries:t,count:r,provider:n,prefetch:a,options:o}=e,l=(await Promise.all(t.map(e=>g({query:e,count:r,provider:n,prefetch:a,options:o}).then(t=>t.map(t=>({query:e,image:t,provider:n})))))).flat(),s=i()(l,e=>e.image.id||e.image.imageUrl);return s},f=e=>{let{query:t,count:r,provider:n,options:i={}}=e,o=new URLSearchParams,l=a.v.API_HOST||"https://api.gamma.app";return o.append("query",t),o.append("provider",n),o.append("count",String(r)),Object.entries(i).forEach(e=>{let[t,r]=e;void 0!==r&&o.append(t,String(r))}),"".concat(l).concat("/media/images/search","?").concat(o.toString())}},2090:function(e,t,r){r.d(t,{Ge:function(){return m},N$:function(){return x},ND:function(){return j},WY:function(){return w},cT:function(){return y},eb:function(){return p},pK:function(){return u},u0:function(){return h},xQ:function(){return b}});var n=r(65616),i=r(48484),a=r(42340),o=r(13326),l=r(14274),s=r(81345),c=r(87205);let d={auth:{key:l.v.TRANSLOADIT_AUTH_KEY},template_id:l.v.TRANSLOADIT_IMAGE_TEMPLATE_ID},u=["image/*",o.Z.heic,o.Z.heif],p=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],h=[o.Z.doc,o.Z.docx],g=[...h,...p,o.Z.pdf],m=["font/otf","font/ttf","application/x-font-ttf","application/x-font-otf",".otf",".ttf"],f={all:[...g,...p,...u],importDoc:[...g],importPpt:[...p],doc:g,font:m,image:u,icon:[".png",".ico",".gif",".svg"]},x={autoProceed:!0,restrictions:{allowedFileTypes:[],maxNumberOfFiles:1}},v={},b=async e=>{let t=v[e];if(t&&t.expires&&+new Date(t.expires)-3e5>Date.now())return v[e];let r=await fetch("/api/transloadit/signature",{method:"POST",body:JSON.stringify({templateId:e})}),{signature:n,expires:i}=await r.json();return n&&i?(v[e]={signature:n,expires:i},v[e]):(console.error("Error getting Transloadit signature"),{signature:"",expires:""})},j={createUppyInstance:function(e,t){let{onUploadStart:r,onOriginalFileUpload:a,onUploadComplete:o,onUploadFailed:l,setErrorMessage:u}=t,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4?arguments[4]:void 0,m=arguments.length>5?arguments[5]:void 0,v=2560,j="false";"background"===p||"themeBackground"===p?v=3840:"icon"===p?v=250:"profile"===p&&(v=1024,j="true");let y=[];g=g||"image";let w=new n.ZP({...x,restrictions:{...x.restrictions,maxNumberOfFiles:h,allowedFileTypes:f[g]}});return w.use(i.ZP,{assemblyOptions:async()=>{let t=m||d.template_id,{signature:r,expires:n}=await b(t);return{params:{...d,auth:{...d.auth,expires:n},template_id:m||d.template_id},fields:{orgId:e,imageType:p,resizePx:v,cropPadding:"50%",detectAndCropFace:j},signature:r}},waitForEncoding:!0}),w.on("file-added",async e=>{try{var t;(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.includes("image"))&&(null==e?void 0:e.data)instanceof File&&await (0,c.sy)(e),r&&1===h&&r({tempUrl:URL.createObjectURL(e.data),file:e})}catch(t){console.error("[Uppy.file-added] ".concat(t.message)),w.removeFile(e.id)}}),w.on("files-added",e=>{r&&1!==h&&e.forEach(e=>{r({tempUrl:URL.createObjectURL(e.data),file:e})})}),w.on("error",e=>{let t="Error uploading to Transloadit: ".concat(e.message);u&&u(""),l&&l(t),console.error(t)}),w.on("transloadit:result",(e,t,r)=>{if(1===h){if(!a||"original_file"!==e||0===r.uploads.length||(0,c.Ns)(r.uploads[0].mime)||(0,s.kO)(r.uploads[0].mime,r.uploads[0].ext)||!t)return;let{url:n,meta:i,name:o}=t;u&&u(""),n?a({src:n,meta:i,name:o,uploadResultStep:"original"}):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}else{if("filter_skip_optimize"===e){y=y.concat(t);return}{let e,i;if((0,c.Ns)(t.mime))i=t;else{var n;e=null===(n=y.find(e=>e.name===t.name))||void 0===n?void 0:n.url,i=t}if(!i)return;let{url:a,meta:s,name:d}=i;u&&u(""),a?o&&o({src:a,meta:s,name:d,uploadResultStep:"optimized",fullResults:r.results},e):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}}}),w.on("transloadit:complete",e=>{var t,r,n,i,a;let d,p,m,f;if(1!=h)return;if(0===e.uploads.length)throw console.error("[transloadit:complete] No uploads in assembly",e),Error("No uploads in assembly");if("importDoc"===g)p=e.results.convert_to_html[0];else if("importPpt"===g)p=e.results.convert_to_html[0];else{if((0,s.S9)(e.uploads[0].ext))return;(0,s.O7)(e.uploads[0].mime)?(p=e.results.original_file[0],m=e.results.doc_thumbnail[0].url):(0,s.kO)(e.uploads[0].mime,e.uploads[0].ext)?(p=e.results.convert_to_pdf[0],m=e.results.doc_thumbnail[0].url):(0,c.Ns)(e.uploads[0].mime)?(p=(null===(t=e.results.optimized)||void 0===t?void 0:t[0])||(null===(r=e.results.filter_skip_optimize)||void 0===r?void 0:r[0]),f=null===(n=e.results.detect_and_crop_face)||void 0===n?void 0:n[0].url):(d=e.results.original_file[0].url,f=null===(i=e.results.detect_and_crop_face)||void 0===i?void 0:i[0].url,p=(null===(a=e.results.optimized)||void 0===a?void 0:a[0])||e.results.original_file[0])}let{url:x,ssl_url:v,meta:b,name:j}=p;u&&u(""),v||x?o&&o({src:v||x,meta:b,name:j,thumbnail:m,croppedFace:f,uploadResultStep:"optimized",fullResults:e.results},d):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}),w}},y=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"image",a=arguments.length>5?arguments[5]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let o=j.createUppyInstance(t,r,n,1,i,a);o.addFile({name:e.name,type:e.type,data:e}),o.upload()},w=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",o=arguments.length>4?arguments[4]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let l=j.createUppyInstance(t,r,n,null,void 0,o);l.use(a.Z,{companionUrl:i.Zm}),l.getPlugin("Url").addFile(e)}},46772:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(21156),i=r(76332);let a=new n.V({systemPromptOperation:i.Run.GenerateImagePromptSystem,userPromptOperation:i.Run.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},9883:function(e,t,r){r.d(t,{q:function(){return k}});var n=r(52322),i=r(35183),a=r(10625),o=r(67046),l=r(62614),s=r(29117),c=r(38035),d=r(77533),u=r(332),p=r(99058),h=r(25481),g=r(42946),m=r(49929),f=r(42111),x=r(66922),v=r(67964),b=r(62131),j=r(2953),y=r(91994),w=r(11050),C=r(47968);let k=e=>{let{value:t,setValue:r,isDisabled:k}=e,A=x.Iw[t],S=(0,y.CG)(C.yx),_=(0,v.Y)("ai_premium_models",null==S?void 0:S.organization),{openUpsellModal:E}=(0,j.z)();return(0,n.jsx)(i.NI,{children:(0,n.jsxs)(a.v,{children:[(0,n.jsx)(o.j,{as:l.z,variant:"plain",isDisabled:k,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,n.jsx)(m.G,{icon:g.ptq}),boxShadow:"none",children:(0,n.jsxs)(s.U,{spacing:2,children:[(0,n.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,n.jsx)(m.G,{icon:A.icon,fixedWidth:!0})}),(0,n.jsx)(d.x,{as:"span",flex:1,children:A.label()})]})}),(0,n.jsx)(u.h,{children:(0,n.jsx)(p.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",children:Object.entries(x.Iw).map(e=>{let[t,{label:i,description:a,isPremium:o,icon:l,flag:c,freeFlag:u}]=e;if(c&&!f.VH.get(c))return null;let p=o&&(!u||!f.VH.get(u));return(0,n.jsxs)(h.s,{value:t,icon:(0,n.jsx)(m.G,{icon:l,fixedWidth:!0}),onClick:()=>{if(p&&!_){E({segmentEvent:w.AA.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS});return}r(t)},children:[(0,n.jsxs)(s.U,{children:[(0,n.jsx)(d.x,{children:i()}),p&&(0,n.jsx)(b.U,{productFeature:"ai_premium_models",workspace:null==S?void 0:S.organization})]}),a&&(0,n.jsx)(d.x,{color:"gray.400",fontSize:"sm",children:a()})]},t)})})})]})})}},62801:function(e,t,r){r.d(t,{O:function(){return c}});var n=r(52322),i=r(29117),a=r(32899),o=r(28535),l=r(42946),s=r(49929);let c=e=>{let{promptPageInfo:t,nextPrompt:r,prevPrompt:c,isDisabled:d,...u}=e;return(0,n.jsxs)(i.U,{spacing:1,...u,children:[(0,n.jsx)(a.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:l.A35}),isDisabled:d||!t.canGoPrev,onClick:()=>c(),"aria-label":"left",color:"gray.800",size:"xs"}),(0,n.jsxs)(o.xu,{as:"span",color:"gray.800",fontSize:"sm",children:[t.curr," / ",t.total]}),(0,n.jsx)(a.h,{variant:"ghost",icon:(0,n.jsx)(s.G,{icon:l._tD}),color:"gray.800",isDisabled:d||!t.canGoNext,onClick:()=>r(),"aria-label":"left",size:"xs"})]})}},67475:function(e,t,r){r.d(t,{A2:function(){return k},SL:function(){return C}});var n=r(52322),i=r(55478),a=r(35183),o=r(43679),l=r(34071),s=r(62614),c=r(29117),d=r(75009),u=r(28535),p=r(39429),h=r(48394),g=r(17993),m=r(74409),f=r(20437),x=r(77533),v=r(42946),b=r(49929),j=r(87254),y=r(2784);let w=[{title:()=>j.ag._({id:"ovBPCi"}),presets:[{preset:"None",imageUrl:"https://cdn.gamma.app/ai-image-assets/default.jpg",name:()=>j.ag._({id:"ovBPCi"})},{preset:"Texture",imageUrl:"https://cdn.gamma.app/ai-image-assets/texture.jpg",name:()=>j.ag._({id:"X9aPH+"})}]},{title:()=>j.ag._({id:"Yps9ro"}),presets:[{preset:"Analog_film",imageUrl:"https://cdn.gamma.app/ai-image-assets/analog_film.jpg",name:()=>j.ag._({id:"1PgBn0"})},{preset:"Photography",imageUrl:"https://cdn.gamma.app/ai-image-assets/photography.jpg",name:()=>j.ag._({id:"PDaunD"})}]},{title:()=>j.ag._({id:"6J8BCS"}),presets:[{preset:"Anime",imageUrl:"https://cdn.gamma.app/ai-image-assets/anime.jpg",name:()=>j.ag._({id:"0NCJ/8"})},{preset:"Claymation",imageUrl:"https://cdn.gamma.app/ai-image-assets/claymation.jpg",name:()=>j.ag._({id:"8tSuHw"})},{preset:"Digital_Art_Concept_Art",imageUrl:"https://cdn.gamma.app/ai-image-assets/digital_art.jpg",name:()=>j.ag._({id:"qg9EcH"})},{preset:"Ethereal_Fantasy_Art",imageUrl:"https://cdn.gamma.app/ai-image-assets/fantasy_art.jpg",name:()=>j.ag._({id:"7oTIsc"})},{preset:"Isometric",imageUrl:"https://cdn.gamma.app/ai-image-assets/isometric.jpg",name:()=>j.ag._({id:"5tylr3"})},{preset:"Line_Art",imageUrl:"https://cdn.gamma.app/ai-image-assets/line_art.jpg",name:()=>j.ag._({id:"e3xMT9"})},{preset:"Low_Poly",imageUrl:"https://cdn.gamma.app/ai-image-assets/low_poly.jpg",name:()=>j.ag._({id:"UdeABa"})},{preset:"Vaporwave",imageUrl:"https://cdn.gamma.app/ai-image-assets/vaporwave.jpg",name:()=>j.ag._({id:"zd/PSU"})},{preset:"Origami",imageUrl:"https://cdn.gamma.app/ai-image-assets/origami.jpg",name:()=>j.ag._({id:"br2YxS"})},{preset:"Pixel_Art",imageUrl:"https://cdn.gamma.app/ai-image-assets/pixel_art.jpg",name:()=>j.ag._({id:"fmqjfg"})}]}],C=e=>{let t=w[0].presets[0];return w.forEach(r=>{let n=r.presets.find(t=>t.preset===e);if(n){t=n;return}}),t},k=(0,y.memo)(e=>{let{value:t,setValue:r,isDisabled:x}=e,{isOpen:j,onToggle:y,onClose:k}=(0,i.q)(),S=C(t);return(0,n.jsx)(a.NI,{children:(0,n.jsxs)(o.J,{placement:"bottom-start",matchWidth:!0,isOpen:j,onClose:k,closeOnBlur:!0,children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(s.z,{width:"100%",type:"button",boxShadow:"none",onClick:y,rightIcon:(0,n.jsx)(b.G,{icon:v.ptq}),isDisabled:x,justifyContent:"space-between",children:(0,n.jsxs)(c.U,{spacing:2,children:[(0,n.jsx)(d.E,{width:"24px",height:"24px",src:S.imageUrl,borderRadius:"md"}),(0,n.jsx)(u.xu,{flex:1,children:S.name()})]})})}),(0,n.jsx)(p.y,{width:"auto",maxHeight:"max(350px, 40vh)",overflowY:"auto",children:(0,n.jsx)(h.b,{children:(0,n.jsx)(g.g,{spacing:4,children:w.map(e=>(0,n.jsxs)(g.g,{align:"start",spacing:0,children:[(0,n.jsx)(m.X,{size:"sm",mb:2,children:e.title()}),(0,n.jsx)(f.M,{columns:{base:2,"2xl":3},spacing:2,children:e.presets.map(e=>(0,n.jsx)(A,{preset:e,onClick:()=>{r(e.preset),k()},isSelected:e.preset===t},e.preset))})]},e.title()))})})})]})})});k.displayName="StylePresetMenu";let A=e=>{let{preset:t,onClick:r,isSelected:i}=e;return(0,n.jsxs)(g.g,{_hover:{cursor:i?"default":"pointer"},onClick:r,borderRadius:"md",spacing:1,p:2,border:"1px",bgColor:i?"trueblue.50":"transparent",borderColor:i?"trueblue.200":"transparent",children:[(0,n.jsx)(d.E,{src:t.imageUrl,width:"100%",height:"auto",borderRadius:"md"}),(0,n.jsx)(x.x,{color:i?"trueblue.500":"gray.900",fontSize:"sm",children:t.name()})]})}},47821:function(e,t,r){r.d(t,{Ao:function(){return M},DY:function(){return R},Qo:function(){return S},S8:function(){return O},ec:function(){return E},jg:function(){return T}});var n=r(87254),i=r(84636),a=r.n(i),o=r(2784),l=r(77787),s=r(50634),c=r(31490),d=r(93202),u=r(7144),p=r(42111),h=r(66922),g=r(46772),m=r(57124),f=r(91994),x=r(25585),v=r(74684),b=r(47968),j=r(11093),y=r(91073),w=r(36651),C=r(89458),k=r(78597);let A=e=>{let{docId:t,themeId:r}=e,[n,i]=(0,o.useState)([]),[l,s]=(0,o.useState)(!1),{data:c,loading:u,fetchMore:p}=(0,d.qOp)({variables:{docId:t,themeId:r,source:"image.ai-generated",type:d.DDH.Image,first:18}}),[h,g]=(0,o.useState)(null),[m]=(0,d.BAq)(),f=(0,o.useCallback)(async e=>{i(t=>t.filter(t=>t.id!==e)),g(e);try{await m({variables:{id:e},update:t=>{let r=RegExp(e,"g");Object.keys(t.data.data).forEach(e=>{e.match(r)&&t.data.delete(e)})},refetchQueries:["GetSavedMedia"]})}catch(e){console.error(e)}g(null)},[m]),x=(0,o.useMemo)(()=>(null==c?void 0:c.savedMedia.edges.map(e=>e.node))||[],[null==c?void 0:c.savedMedia.edges]),v=(0,o.useCallback)(e=>{i(t=>[...e,...t])},[]),b=(0,o.useMemo)(()=>a()([...n,...x],"id"),[n,x]),j=null==c?void 0:c.savedMedia.pageInfo,y=(0,o.useCallback)(()=>{(null==j?void 0:j.hasNextPage)&&(null==j?void 0:j.endCursor)&&(s(!0),p({variables:{after:null==j?void 0:j.endCursor}}).finally(()=>{s(!1)}))},[p,j]);return{history:b,loadMore:y,canFetchMore:!!(null==j?void 0:j.hasNextPage),isLoadingHistory:u,isFetchingMore:l,addToHistory:v,deleteImage:f,deletingId:h}},S=e=>{var t,r;let i,{selectImage:a}=e,l=(0,f.CG)(b.ke),s=(0,x.n)(),p=null==s?void 0:null===(r=s.state)||void 0===r?void 0:null===(t=r.theme)||void 0===t?void 0:t.id;"new"===p&&(p=void 0,i=d.wNJ.Theme);let{currentWorkspace:g}=(0,w.SE)(),[m,v]=(0,o.useState)(""),[j,y]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!1),[S,_]=(0,o.useState)(""),{history:E,isLoadingHistory:I,addToHistory:U,loadMore:P,canFetchMore:T,isFetchingMore:R,deleteImage:M,deletingId:O}=A(p?{themeId:p}:l?{docId:l}:{}),N=(0,o.useCallback)(async e=>{let t=(0,c.nZ)();v(e.prompt),y(!0),k(!1),_("");let r={...e,docId:e.docId||l,themeId:e.themeId||p,context:i},o=h.Iw[e.model],s=performance.now(),d={interactionId:t,interface:"generate-image",provider:o.provider,streaming:!1,inputContent:r.prompt,docId:r.docId,generateImageOptions:r};try{(0,c.hq)(d);let e=await (0,h.Qz)({interactionId:t,workspaceId:null==g?void 0:g.id,...r});if(y(!1),0===e.length)throw Error("No images generated");e.length>0&&(U(e),a(e[0])),(0,u.d)("generateImage"),(0,c.o)({...d,latency:performance.now()-s,generateImageUrls:e.map(e=>e.attrs.src)})}catch(e){k(!0),_(e.messageTranslated?e.messageTranslated:n.ag._({id:"QcZqsh"})),y(!1),console.error("(caught) [AIGenerateImage] error:",e),(0,c.pQ)({...d,latency:performance.now()-s,errorName:"GenerateImageError",errorMessage:e.message,outputMessage:""})}y(!1)},[U,null==g?void 0:g.id,l,a,i,p]);return{generate:N,isGenerating:j,hasError:C,errorMessage:S,isLoadingHistory:I,imageResults:E,searchQuery:m,loadMore:P,canLoadMore:T,isLoadingMore:R,deleteImage:M,deletingId:O}},_=e=>{let t=(0,o.useCallback)(()=>{if(!e)return null;let{selection:t}=e.state,r=(0,j.Ru)(t.$from,y.KH)[0],n=r&&(0,v.NE)(r.node,r.pos),{content:i}=e.state.doc.slice(n.pos+1,n.pos+n.node.nodeSize-1);return(0,l.c)(e,i)},[e]);return t},E=(e,t)=>{let r=_(e),{generate:n}=(0,s.M)(g.S,{...t,timeout:3e4}),i=(0,o.useCallback)(e=>{let{promise:t}=n({variables:{input:e,html:r()},workspaceId:(0,w.n_)()});return(0,k.OI)(t,3e4)},[n,r]);return i},I=e=>e.ind===e.history.length-1,U=e=>e.history[e.history.length-1],P={load:(e,t)=>({history:[t],ind:0}),push(e,t){return""===U(e).trim()?this.replace(e,t):{history:[...e.history,t],ind:e.history.length}},replace(e,t){let r=e.history.slice(0,-1);return{history:[...r,t],ind:r.length}},select(e,t){return I(e)&&U(e)===t?e:this.push(e,t)}},T=()=>{let e=(0,o.useRef)(!1),[t,r]=(0,o.useState)({history:[""],ind:0}),n=(0,o.useCallback)((t,n)=>{"load"===n&&r(e=>P.load(e,t)),"push"===n&&r(e=>P.push(e,t)),"update"===n&&(e.current?r(e=>P.push(e,t)):r(e=>P.replace(e,t))),"select"===n&&r(e=>P.select(e,t)),e.current="update"!==n},[]),i=(0,o.useCallback)(()=>{let{ind:e}=t;e<=0||r(e=>({...e,ind:e.ind-1}))},[t]),a=(0,o.useCallback)(()=>{let{history:e,ind:n}=t;n>=e.length-1||r(e=>({...e,ind:e.ind+1}))},[t]),{ind:l,history:s}=t;return{prompt:s[l]||"",addPrompt:n,promptPageInfo:{curr:l+1,total:s.length,canGoNext:l<s.length-1,canGoPrev:l>0},nextPrompt:a,prevPrompt:i}},R=()=>{let e=(0,m.Y)("ai_generated_images"),t=(0,p.ye)("aiGeneratedImages");return e||t},M=()=>{let e=(0,m.Y)("ai_generated_images"),t=(0,p.ye)("aiGeneratedImagesInWizard");return e||t},O=()=>{let[e,t]=(0,C.I)("aiImageRatings",{}),r=(0,o.useCallback)((r,n)=>{r.savedMediaId&&(e[r.savedMediaId]=n,t(e))},[]),n=(0,o.useCallback)(t=>!t.savedMediaId||!!e[t.savedMediaId],[]);return{saveImageRating:r,hasRatedImage:n}}},1188:function(e,t,r){r.d(t,{Ac:function(){return d},MI:function(){return m},Xc:function(){return f},k8:function(){return u},mG:function(){return p},sK:function(){return h},yD:function(){return g}});var n=r(27875),i=r.n(n),a=r(2784),o=r(42111),l=r(66922),s=r(47821),c=r(67475);let d=100,u=8,p=200,h=30,g=1,m=5,f=()=>{let e=(0,o.ye)("aiGeneratedImagesDefaultModel"),[t,r]=(0,a.useState)(e),[n,g]=(0,a.useState)(h),[f,x]=(0,a.useState)(m),[v,b]=(0,a.useState)((0,o.ye)("aiGeneratedImagesCount")),{prompt:j,addPrompt:y,promptPageInfo:w,nextPrompt:C,prevPrompt:k}=(0,s.jg)(),[A,S]=(0,a.useState)(""),[_,E]=(0,a.useState)("square"),[I,U]=(0,a.useState)("None"),P=l.Iw[t],T=P.aspectRatios[_]||l.vr,R={prompt:j,model:t,style_preset:I,height:T.height,width:T.width,steps:i()(n,1,d),count:i()(v,1,u),negative_prompt:A,cfg_scale:i()(f,1,p)},M=(0,a.useCallback)((e,t)=>{if(!e.aiParams)return;let{prompt:n,height:i,width:a,style_preset:o,cfg_scale:l,negative_prompt:s,steps:d,model:u}=e.aiParams;i&&a&&(i>a?E("portrait"):i<a?E("landscape"):E("square")),n&&y(n,t),o&&U((0,c.SL)(o).preset),l&&x(l),s&&S(s),d&&g(d),u&&r(u)},[y]);return{model:t,setModel:r,prompt:j,addPrompt:y,promptPageInfo:w,nextPrompt:C,prevPrompt:k,stylePreset:I,setStylePreset:U,aspectRatio:_,setAspectRatio:E,imageGenerateConfig:R,count:v,setCount:b,loadImageAiParams:M,negativePrompt:A,setNegativePrompt:S,steps:n,setSteps:g,cfgScale:f,setCfgScale:x}}},68728:function(e,t,r){r.d(t,{A:function(){return b},E:function(){return v}});var n=r(52322),i=r(10625),a=r(67046),o=r(62614),l=r(332),s=r(99058),c=r(44035),d=r(39237),u=r(77533),p=r(54933),h=r(49929),g=r(87254);let m={label:()=>g.ag._({id:"DAmK+T"}),key:"All",description:()=>g.ag._({id:"Zz/1wq"})},f=[m,{label:()=>g.ag._({id:"10G8Kb"}),key:"Share",description:()=>g.ag._({id:"EVNJ2h"})},{label:()=>g.ag._({id:"SjDzTh"}),key:"ShareCommercially",description:()=>g.ag._({id:"DHhpJP"})}],x=m.key,v=e=>{var t;return null===(t=f.find(t=>t.key===e))||void 0===t?void 0:t.label()},b=e=>{let{value:t=x,onChange:r}=e;return(0,n.jsxs)(i.v,{children:[(0,n.jsx)(a.j,{w:"100%",as:o.z,boxShadow:"sm",size:"sm",variant:"plain",rightIcon:(0,n.jsx)(h.G,{icon:p.ptq}),textAlign:"left",children:v(t)}),(0,n.jsx)(l.h,{children:(0,n.jsx)(s.q,{zIndex:"tooltip",w:"350px",children:(0,n.jsx)(c._,{type:"radio",w:"100%",defaultValue:m.key,value:t,onChange:e=>r(e),children:f.map(e=>{let{key:t,label:r,description:i}=e;return(0,n.jsxs)(d.i,{value:t,children:[r(),(0,n.jsx)(u.x,{fontSize:"sm",color:"gray.400",children:i()})]},t)})})})})]})}},66257:function(e,t,r){r.d(t,{Z:function(){return Y}});var n=r(52322),i=r(32899),a=r(17993),o=r(74105),l=r(20816),s=r(28535),c=r(85573),d=r(35183),u=r(97166),p=r(42946),h=r(49929),g=r(94523),m=r(5879),f=r(87254),x=r(41004),v=r(4742),b=r.n(v),j=r(2784),y=r(66028),w=r(93441),C=r(68728),k=r(14274),A=r(39877),S=r(13773),_=r(87205);let E=e=>(0,j.useCallback)(t=>{let r="".concat(k.v.API_HOST||"","/media/images/track");fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,id:t.id})})},[e]),I=e=>{let{provider:t,enablePagination:r,resultsPerPage:n}=e,[i,a]=(0,j.useState)(""),[o,l]=(0,j.useState)([]),[s,c]=(0,j.useState)(!1),[d,u]=(0,j.useState)(!1),[p,h]=(0,j.useState)(1),[g,m]=(0,j.useState)("All"),f=(0,j.useRef)(g),x=r&&o.length>0&&p<6,v=(0,j.useCallback)(async(e,r)=>{c(!0),u(!1);try{let i={license:f.current,page:r,gammaFeature:"mediaDrawer"};"bing"===t&&(i.minWidth=S.x.minWidth,i.maxWidth=S.x.maxWidth);let a=await (0,A.C)({query:e,count:n,provider:t,options:i});if(c(!1),!((null==a?void 0:a.length)>=0))throw Error("No images found");let o=a.filter(e=>(0,_.VE)(e.imageUrl));l(e=>e.concat(o))}catch(e){u(!0),c(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t,n]),b=(0,j.useCallback)(e=>{l([]),h(1),a(e),v(e,1)},[v]),y=(0,j.useCallback)(()=>{v(i,p+1),h(p+1)},[v,i,p]),w=(0,j.useCallback)(()=>{a(""),l([]),h(1)},[]),C=(0,j.useCallback)(e=>{m(e),f.current=e,w(),b(i)},[w,b,i]);return{search:b,isLoading:s,loadMore:y,canLoadMore:x,hasError:d,imageResults:o,resetResults:w,searchQuery:i,license:g,updateLicense:C}};var U=r(38035),P=r(20437),T=r(62614),R=r(77533),M=r(47443),O=r(52929),N=r(30523),H=r(67109),D=r(2689),z=r.n(D),L=r(50279),F=r(78071),G=r(42822),W=r(11082);let B=(0,j.memo)(e=>{let{image:t,isSelected:r,onImageClick:i,resizeThumbnail:a}=e,o=a?(0,_.SN)(t.thumbnailUrl,_.Iv):t.thumbnailUrl,l=(0,_.Ly)(o,t.thumbnailUrl);return(0,n.jsx)(N.P,{children:(0,n.jsxs)(T.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>i(t),backgroundImage:l,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",children:[(0,n.jsx)(F.p,{in:r,children:(0,n.jsx)(s.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,n.jsx)(G.M,{h:"100%",w:"100%",children:(0,n.jsx)(h.G,{icon:p.LEp})})})}),!t.thumbnailUrl&&(0,n.jsx)(N.P,{width:"100%",children:(0,n.jsx)(H.O,{height:"80px",borderRadius:"base"})}),(0,n.jsxs)(s.xu,{left:0,right:0,bottom:0,p:2,pos:"absolute",color:"white",fontSize:"xs",textOverflow:"ellipsis",overflow:"hidden",bg:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)",borderBottomRadius:"base",className:"attribution-container",opacity:0,transitionProperty:"common",transitionDuration:"normal",children:[t.attributionUrl&&t.credit&&(0,n.jsx)(g.kH,{label:t.credit,placement:"left",children:(0,n.jsx)(W.r,{mr:1,target:"_blank",rel:"noopener noreferrer",href:t.attributionUrl,tabIndex:-1,children:(0,n.jsx)(h.G,{transform:"shrink-4",icon:p.Xjp})})}),t.credit]})]})},t.id||t.imageUrl)});B.displayName="ImageSearchGridItem";let q=e=>{let{searchQuery:t,currentImageUrl:r,updateAttributes:i,provider:a,imageResults:o,isLoading:l,canLoadMore:c,loadMore:d,hasError:u,resultsPerPage:p,resizeThumbnails:h,loadFromTop:g=!1}=e,f=E(a),x=(0,j.useCallback)(e=>{f(e),i((0,L.C)(e,t,a))},[a,t,f,i]),v=o.map((e,t)=>{let i=e.imageUrl.split("?")[0],o=r&&r.split("?")[0];return(0,n.jsx)(B,{provider:a,image:e,isSelected:i===o,onImageClick:x,resizeThumbnail:h},e.id)});return(0,n.jsxs)(U.k,{direction:"column",align:"stretch",children:[(0,n.jsx)(P.M,{gap:2,columns:{base:2,"2xl":3},children:g?(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)(Q,{resultsPerPage:p}),v]}):(0,n.jsxs)(n.Fragment,{children:[v,l&&(0,n.jsx)(Q,{resultsPerPage:p})]})}),c&&(0,n.jsx)(T.z,{variant:"plain",onClick:d,mt:4,children:(0,n.jsx)(m.cC,{id:"yQ2kGp"})}),0===o.length&&!l&&(0,n.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,n.jsx)(R.x,{style:{color:"gray"},children:(0,n.jsx)(m.cC,{id:"SihI8q",values:{searchQuery:t}})})}),u&&(0,n.jsxs)(M.b,{status:"error",children:[(0,n.jsx)(O.z,{}),(0,n.jsx)(m.cC,{id:"Fkbzp8"})]})]})},Q=e=>{let{resultsPerPage:t}=e;return(0,n.jsx)(n.Fragment,{children:z()(t).map((e,t)=>(0,n.jsx)(N.P,{children:(0,n.jsx)(H.O,{height:"100px",borderRadius:"base"})},t))})},V=(0,x.E)(i.h),Y=e=>{let{currentImageUrl:t,updateAttributes:r,defaultQuery:i,randomQueries:x,provider:v,enablePagination:k=!0,enableSearch:A=!0,enableLicenseFilter:S=!1,resultsPerPage:_=18,resizeThumbnails:E=!1}=e,[U,P]=(0,j.useState)(""),{search:T,isLoading:R,loadMore:M,canLoadMore:O,hasError:N,imageResults:H,resetResults:D,searchQuery:z,license:L,updateLicense:F}=I({provider:v,enablePagination:k,resultsPerPage:_});(0,w.vm)(()=>{if(i){P(i),T(i);return}P(""),x?T(b()(x)||""):D()},[i,x,D,T],[v]);let G=(0,j.useCallback)(()=>{let e=b()(x);e&&T(e)},[x,T]),W=(0,w.Kt)(T,1e3);return(0,n.jsxs)(a.g,{spacing:4,align:"stretch",translate:"no",children:[(0,n.jsx)(g.kH,{placement:"top",label:(0,n.jsx)(m.cC,{id:"wj1Zq8"}),isDisabled:A,children:(0,n.jsxs)(o.B,{size:"md",children:[(0,n.jsx)(l.Z,{pointerEvents:"none",children:(0,n.jsx)(s.xu,{color:"gray.400",children:(0,n.jsx)(h.G,{icon:p.wn1})})}),(0,n.jsx)(c.I,{isDisabled:!A,placeholder:f.ag._({id:"6YBjmV"}),value:U,onChange:e=>{P(e.target.value),W(e.target.value)},"data-testid":"image-search-input"}),x&&(0,n.jsx)(l.x,{children:(0,n.jsx)(g.kH,{placement:"top",label:(0,n.jsx)(m.cC,{id:"OVjfHO"}),children:(0,n.jsx)(V,{icon:(0,n.jsx)(h.G,{icon:p.RJo}),"aria-label":"Surprise me",variant:"ghost",onClick:G,size:"sm",whileTap:{y:"-5px"},onMouseDown:y.br})})})]})}),S&&(0,n.jsxs)(d.NI,{children:[(0,n.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(m.cC,{id:"6TSHCF"})}),(0,n.jsx)(C.A,{value:L,onChange:F})]}),z&&(0,n.jsx)(q,{updateAttributes:r,currentImageUrl:t,searchQuery:z,provider:v,imageResults:H,isLoading:R,canLoadMore:O,loadMore:M,hasError:N,resultsPerPage:_,resizeThumbnails:E})]})}},13833:function(e,t,r){r.d(t,{v:function(){return A},ft:function(){return k}});var n=r(52322),i=r(17993),a=r(74409),o=r(29117),l=r(85573),s=r(62614),c=r(47443),d=r(52929),u=r(5879),p=r(87254),h=r(2784),g=r(91994),m=r(47968),f=r(87205),x=r(15425);let v={thumbnail:void 0,embed:void 0,meta:void 0,sourceUrl:void 0},b=async e=>{var t,r,n,i,a,o;let l=await fetch("https://cdn.iframe.ly/api/iframely/?url=".concat(encodeURIComponent(e),"&key=").concat("a68bac8b6624d46b6d0ba46e5b3f8971","&iframe=1&omit_script=1")),s=await l.json();if(console.debug("[Iframely]",s),s.error)return Promise.reject(s);let{html:c,links:d,meta:u}=s,{icon:p,player:h,reader:g,app:m,thumbnail:f}=d,x=h||g||m,v=x?x.filter(e=>"text/html"===e.type&&e.href)[0]||x[0]:null,b=u&&!u.xframe&&(!u.csp||!u.csp.includes("frame-ancestors"));return{sourceUrl:(null==u?void 0:u.canonical)||e,embed:v?{url:v.href,html:c,height:null===(t=v.media)||void 0===t?void 0:t.height,width:(null===(r=v.media)||void 0===r?void 0:r.width)||(null===(n=v.media)||void 0===n?void 0:n["max-width"]),aspectRatio:null===(i=v.media)||void 0===i?void 0:i["aspect-ratio"]}:b?{url:e}:void 0,meta:{...u||{},icon:p&&p[0]?p[0].href:void 0},thumbnail:f&&f[0]?{src:f[0].href,height:null===(a=f[0].media)||void 0===a?void 0:a.height,width:null===(o=f[0].media)||void 0===o?void 0:o.width}:void 0}};var j=r(2090),y=r(48741);let w=e=>{try{var t,r;let n=new DOMParser().parseFromString(e,"text/html");return(null===(t=n.querySelector("iframe"))||void 0===t?void 0:t.src)||(null===(r=n.querySelector("blockquote"))||void 0===r?void 0:r.cite)||!1}catch(e){return!1}},C=async e=>{var t,r,n,i,a;let o,l;try{o=await b(e)}catch(t){if(403===t.status||404===t.status||415===t.status){for(let{key:t,urlRegex:r,canEmbedPrivate:n,label:i,defaultDisplayStyle:a}of y.yC)if(r&&e.match(r)&&n)return{...v,source:t,proxy:!1,url:e,meta:{title:p.ag._({id:"SuoEIZ"})},sourceUrl:e,displayStyle:a||"inline"}}throw Error("Code: ".concat(t.status,". Message: ").concat(t.error))}if(!o)throw Error("No link metadata found");for(let{key:e,urlRegex:t}of y.yC)if(t&&(null===(i=o.sourceUrl)||void 0===i?void 0:i.match(t))){l=e;break}if(l){let e=y.zX[l];return{...v,...o,source:l,proxy:!1,url:(null===(a=o.embed)||void 0===a?void 0:a.url)||o.sourceUrl,displayStyle:e.defaultDisplayStyle}}return(null===(t=o.meta)||void 0===t?void 0:t.medium)=="audio"||(null===(r=o.meta)||void 0===r?void 0:r.medium)==="video"?{...v,...o,source:y.wj.key}:(null===(n=o.embed)||void 0===n?void 0:n.url)?{...v,...o,source:y.Hw.key,proxy:!1,url:o.embed.url}:{...v,...o,source:y.Hw.key,proxy:!0,url:e}},k=async(e,t)=>await C(e).then(e=>(t(e),e)).then(e=>S(e,t)),A=e=>{let{currentUrl:t="",updateAttributes:r,handleSubmit:g,handleDataSubmit:m,placeholder:v,noHeader:b}=e,[j,y]=(0,h.useState)(t||""),[C,A]=(0,h.useState)(),S=j!==t;(0,h.useEffect)(()=>{t&&y(t)},[t]),(0,h.useEffect)(()=>{A(void 0)},[j]);let _=(0,h.useCallback)(e=>{if(0===e.indexOf("data:")){if(m){try{(0,f.v9)(e)}catch(e){A(p.ag._({id:"YqH0TR"}));return}return m(e)}return void A(p.ag._({id:"YqH0TR"}))}let t=w(e);if(t&&(e=t),!(0,x.kr)(e)&&(e="https://"+e,!(0,x.jv)(e))){A(p.ag._({id:"YqH0TR"}));return}return g?g(e):r?k(e,r).catch(e=>{console.error("Error fetching URL",e),A(p.ag._({id:"dZyJFB"}))}):void console.error("No submit handler provided")},[m,g,r]),E=(0,h.useCallback)(()=>{_(j.trim())},[_,j]),I=(0,h.useCallback)(e=>{if(t)return;let r=e.clipboardData.getData("text/plain");_(r.trim())},[t,_]);return(0,n.jsxs)(i.g,{align:"flex-start",spacing:4,w:"100%",children:[!b&&(0,n.jsx)(a.X,{size:"md",children:(0,n.jsx)(u.cC,{id:"D89ve+"})}),(0,n.jsxs)(o.U,{align:"flex-start",spacing:2,w:"100%",children:[(0,n.jsx)(l.I,{placeholder:v,onKeyDown:e=>{"Enter"===e.key&&E()},onPaste:I,value:j,onChange:e=>y(e.target.value),flex:1,"data-testid":"url-input"}),(0,n.jsx)(s.z,{onClick:E,isDisabled:!S,children:(0,n.jsx)(u.cC,{id:"4pSxwB"})})]}),C&&(0,n.jsxs)(c.b,{status:"error",children:[(0,n.jsx)(d.z,{}),C]})]})},S=async(e,t)=>{let r=(0,g.bh)().getState(),n=(0,m.KV)(r);if(!n){console.error("[uploadIframelyThumbnail] No orgId specified, bailing");return}let i={...e.thumbnail},a=i.src;if(a&&void 0!==i)try{await (0,j.WY)(a,n,{onUploadComplete:e=>(i&&(i.src=e.src,i.width=e.meta.width,i.height=e.meta.height,t({thumbnail:i})),Promise.resolve()),onOriginalFileUpload:e=>(i&&(i.src=e.src,i.width=e.meta.width,i.height=e.meta.height,t({thumbnail:i})),Promise.resolve()),onUploadFailed:e=>(console.error("[iframely] Thumbnail upload error: ",e),Promise.reject())},"iframelyThumbnail")}catch(e){console.error("[iframely] Thumbnail upload error: ",e)}}},26433:function(e,t,r){r.d(t,{u:function(){return u}});var n=r(52322),i=r(47443),a=r(52929),o=r(17993),l=r(91710),s=r(2784),c=r(2090);r(65331),r(41779);var d=r(87254);let u=e=>{let{orgId:t,uploadType:r,editType:u,onUploadStart:p,onUploadSuccess:h,onUploadFailed:g,showTip:m=!0,dropHereText:f=d.ag._({id:"mgPDos",values:{0:"%{browse}"}}),customHeight:x,customFontSize:v,maxFilesAllowed:b=1,templateId:j,sx:y}=e,[w,C]=(0,s.useState)(""),k=(0,s.useMemo)(()=>c.ND.createUppyInstance(t,{onUploadStart:p,onOriginalFileUpload:h,onUploadComplete:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];h(...t),k.cancelAll()},onUploadFailed:g,setErrorMessage:C},u,b,r,j),[t,u,r,b,j,h,p,g]);return(0,n.jsxs)(o.g,{align:"stretch",spacing:4,fontSize:v||void 0,sx:y,children:[(0,n.jsx)(l.v0,{width:"100%",height:x||"100%",note:m?d.ag._({id:"x4Ts51"}):"",uppy:k,locale:{strings:{dropHereOr:f,browse:d.ag._({id:"wZ9s+A"})}}}),w&&(0,n.jsxs)(i.b,{status:"error",children:[(0,n.jsx)(a.z,{}),w]})]})}},99787:function(e,t,r){r.d(t,{$5:function(){return a.$5},BF:function(){return a.BF},BM:function(){return a.BM},BR:function(){return a.BR},Bo:function(){return a.Bo},DN:function(){return a.DN},DU:function(){return a.DU},Ds:function(){return a.Ds},F6:function(){return a.F6},FH:function(){return a.FH},Ge:function(){return n.Ge},Hw:function(){return a.Hw},LE:function(){return a.LE},N$:function(){return n.N$},ND:function(){return n.ND},NX:function(){return a.NX},QR:function(){return a.QR},QT:function(){return a.QT},TQ:function(){return a.TQ},Vy:function(){return a.Vy},WY:function(){return n.WY},bD:function(){return a.bD},bO:function(){return a.bO},cT:function(){return n.cT},eK:function(){return a.eK},hq:function(){return a.hq},iL:function(){return a.iL},in:function(){return a.in},jS:function(){return a.jS},jt:function(){return a.jt},oC:function(){return a.oC},p7:function(){return a.p7},pK:function(){return n.pK},qz:function(){return a.qz},ud:function(){return a.ud},un:function(){return i.u},w4:function(){return a.w4},wj:function(){return a.wj},zX:function(){return a.zX},zs:function(){return a.zs}});var n=r(2090);r(66257);var i=r(26433),a=r(48741)},86418:function(e,t,r){r.d(t,{N:function(){return eE}});var n=r(54933),i=r(87254),a=r(42111),o=r(57124),l=r(52322),s=r(17993),c=r(38035),d=r(75009),u=r(47443),p=r(52929),h=r(74444),g=r(29117),m=r(74409),f=r(62614),x=r(29494),v=r(49259),b=r(87436),j=r(95897),y=r(28535),w=r(89511),C=r(11121),k=r(42946),A=r(49929),S=r(94523),_=r(5879),E=r(2784),I=r(31490),U=r(14764),P=r(85420),T=r(97763),R=r(94199),M=r(20437),O=r(30523),N=r(67109),H=r(2689),D=r.n(H),z=r(78071),L=r(42822),F=r(32899),G=r(87205);let W=(0,E.memo)(e=>{let{image:t,isSelected:r,onImageClick:n,resizeThumbnail:i,isDeleting:a,onDeleteImage:o}=e,s=i?(0,G.SN)(t.attrs.src,G.Iv,t.attrs.meta):t.attrs.src,c=(0,G.Ly)(s);return(0,l.jsx)(O.P,{children:(0,l.jsxs)(f.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),backgroundImage:c,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},isDisabled:a,"data-testid":"image-search-grid-item",role:"group",children:[(0,l.jsx)(z.p,{in:r,children:(0,l.jsx)(y.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,l.jsx)(L.M,{h:"100%",w:"100%",children:(0,l.jsx)(A.G,{icon:k.LEp})})})}),!r&&(0,l.jsx)(F.h,{isRound:!0,size:"xs","aria-label":"Delete image",onClick:e=>{e.stopPropagation(),o(t.id)},color:"red.500",icon:(0,l.jsx)(A.G,{icon:k.XAH}),zIndex:100,pos:"absolute",top:1,display:"none",bg:"0 none",bgColor:"red.50",right:1,_hover:{color:"red.600",bg:"0 none",bgColor:"red.200"},_groupHover:{display:"block"}}),!t.attrs.src&&(0,l.jsx)(O.P,{width:"100%",children:(0,l.jsx)(N.O,{height:"80px",borderRadius:"base"})})]})},t.id)});W.displayName="AIImageHistoryItem";let B=e=>{let{onSelectImage:t,savedMediaId:r,imageResults:n,onDeleteImage:i,deletingId:a,isLoading:o,canLoadMore:s,isLoadingMore:d,loadMore:u,resultsPerPage:p,resizeThumbnails:h}=e,g=n.map(e=>(0,l.jsx)(W,{image:e,isSelected:e.id===r,isDeleting:e.id===a,onDeleteImage:i,onImageClick:t,resizeThumbnail:h},e.id));return(0,l.jsxs)(c.k,{direction:"column",align:"stretch",children:[(0,l.jsxs)(M.M,{gap:2,columns:3,children:[o&&(0,l.jsx)(q,{resultsPerPage:p}),g]}),s&&(0,l.jsx)(f.z,{variant:"plain",onClick:u,mt:4,isLoading:d,children:(0,l.jsx)(_.cC,{id:"yQ2kGp"})})]})},q=e=>{let{resultsPerPage:t}=e;return(0,l.jsx)(l.Fragment,{children:D()(t).map((e,t)=>(0,l.jsx)(O.P,{children:(0,l.jsx)(N.O,{height:"100px",borderRadius:"base"})},t))})};var Q=r(77533),V=r(43297),Y=r(75768);let X=(0,E.memo)(e=>{var t;let{attrs:r,onRateImage:n}=e,a=null===(t=r.aiParams)||void 0===t?void 0:t.interactionId,[o,d]=(0,E.useState)(null),[u,p]=(0,E.useState)(""),[h,g]=(0,E.useState)("rate");(0,E.useEffect)(()=>{r.savedMediaId&&(g("rate"),p(""),d(null))},[r.savedMediaId]);let m=(0,E.useCallback)(e=>{d(e),g("feedback"),n(e)},[n]),v=(0,E.useCallback)(()=>{g("thanks"),setTimeout(()=>{g("hide"),p(""),d(null)},3e3)},[]),b=(0,E.useCallback)(()=>{v()},[v]),j=(0,E.useCallback)(()=>{var e;(null===(e=r.aiParams)||void 0===e?void 0:e.interactionId)&&((0,I.Lt)({feedback:u,aiParams:r.aiParams,imageUrl:r.src,interactionId:r.aiParams.interactionId}),v())},[r,u,v]);return a&&"hide"!==h?"thanks"===h?(0,l.jsx)(c.k,{position:"absolute",zIndex:1,bottom:1,p:2,right:1,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,l.jsx)(Q.x,{fontSize:"xs",children:(0,l.jsx)(_.cC,{id:"yOrM5+"})})}):(0,l.jsxs)(s.g,{position:"absolute",bottom:2,zIndex:"sticky",right:2,align:"flex-end",spacing:1,children:["feedback"===h&&(0,l.jsx)(c.k,{p:2,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,l.jsxs)(V.K,{alignItems:"flex-end",children:[(0,l.jsx)(x.g,{value:u,onChange:e=>p(e.target.value),fontSize:"xs",placeholder:i.ag._({id:"eYeGuP"}),p:1,px:2,borderRadius:"0"}),(0,l.jsxs)(Y.h,{size:"xs",children:[(0,l.jsx)(f.z,{variant:"ghost",onClick:b,children:(0,l.jsx)(_.cC,{id:"6Uau97"})}),(0,l.jsx)(f.z,{variant:"solid",onClick:j,children:(0,l.jsx)(_.cC,{id:"1m41/U"})})]})]})}),(0,l.jsxs)(Y.h,{size:"sm",children:[(0,l.jsx)(S.kH,{label:(0,l.jsx)(_.cC,{id:"kR82DG"}),placement:"top",children:(0,l.jsx)(F.h,{"aria-label":"thumbs down",color:"poor"===o?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===o?"red.600":"transparent",bg:"poor"===o?"red.100":void 0,_hover:{bg:"poor"===o?"red.200":"red.100"},icon:(0,l.jsx)(A.G,{icon:k.bam}),onClick:()=>{m("poor")}})}),(0,l.jsx)(S.kH,{label:(0,l.jsx)(_.cC,{id:"y1GvbS"}),placement:"top",children:(0,l.jsx)(F.h,{"aria-label":"thumbs up",color:"good"===o?"green.600":void 0,borderWidth:"1px",borderColor:"good"===o?"green.600":"transparent",bg:"good"===o?"green.100":void 0,_hover:{bg:"good"===o?"green.200":"green.100"},icon:(0,l.jsx)(A.G,{icon:k.u8Q}),onClick:()=>{m("good")}})})]})]}):null});X.displayName="AIImageRating";var K=r(35183),Z=r(10625),J=r(67046),$=r(99058),ee=r(44035),et=r(39237),er=r(66922);let en={square:k.pL1,portrait:k.j8N,landscape:k.r9b},ei=(0,E.memo)(e=>{let{value:t,setValue:r,isDisabled:n,model:i}=e,a=er.Iw[i],o=a.aspectRatios,s=o[t]||er.vr;return(0,l.jsx)(K.NI,{children:(0,l.jsxs)(Z.v,{children:[(0,l.jsx)(J.j,{as:f.z,variant:"plain",isDisabled:n,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,l.jsx)(A.G,{icon:k.ptq}),boxShadow:"none",children:(0,l.jsxs)(g.U,{spacing:2,children:[(0,l.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,l.jsx)(A.G,{icon:en[s.key],fixedWidth:!0})}),(0,l.jsx)(Q.x,{as:"span",flex:1,children:s.name()})]})}),(0,l.jsx)($.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",children:(0,l.jsx)(ee._,{value:t,type:"radio",onChange:e=>{r(e)},children:Object.values(o).map(e=>(0,l.jsx)(et.i,{value:e.key,children:(0,l.jsxs)(g.U,{spacing:2,children:[(0,l.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,l.jsx)(A.G,{icon:en[e.key],fixedWidth:!0})}),(0,l.jsx)(Q.x,{as:"span",flex:1,children:e.name()})]})},e.key))})})]})})});ei.displayName="AspectRatioSelect";var ea=r(47821),eo=r(1188),el=r(62801),es=r(67475),ec=r(25566),ed=r(31866),eu=r(63176);let ep=e=>{let{enabled:t,isGenerating:r,negativePrompt:n,setNegativePrompt:i,count:a,setCount:o,steps:c,setSteps:d,cfgScale:u,setCfgScale:p,model:h}=e,{usesNegativePrompt:f,usesSteps:v,usesCFG:b}={usesNegativePrompt:"stable-diffusion-xl-v1-0"===h||"imagen-2"===h,usesSteps:"stable-diffusion-xl-v1-0"===h,usesCFG:"stable-diffusion-xl-v1-0"===h||"imagen-2"===h};return(0,l.jsxs)(s.g,{align:"stretch",spacing:3,children:[f&&(0,l.jsxs)(s.g,{align:"stretch",spacing:2,children:[(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"cwxGog"})}),(0,l.jsx)(x.g,{isDisabled:!t||r,value:n,onChange:e=>{i(e.target.value)},rows:3})]}),(0,l.jsxs)(M.M,{columns:2,gap:2,children:[(0,l.jsxs)(g.U,{children:[(0,l.jsx)(S.kH,{placement:"top",label:(0,l.jsx)(_.cC,{id:"pKdwsO",values:{MAX_COUNT:eo.k8,DEFAULT_COUNT:eo.yD}}),children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"wBMjJ2"})})}),(0,l.jsx)(eu.Y2,{defaultValue:a,value:a||"",min:1,max:eo.k8,isDisabled:!t||r,onChange:(e,t)=>{o(t)},children:(0,l.jsx)(eu.zu,{paddingInline:2})})]}),v&&(0,l.jsxs)(g.U,{children:[(0,l.jsx)(S.kH,{placement:"top",label:(0,l.jsx)(_.cC,{id:"5H4Pmz",values:{MAX_STEPS:eo.Ac,DEFAULT_STEPS:eo.sK}}),children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"A9onc2"})})}),(0,l.jsx)(eu.Y2,{defaultValue:c,value:c||"",min:1,max:eo.Ac,isDisabled:!t||r,onChange:(e,t)=>{d(t)},children:(0,l.jsx)(eu.zu,{paddingInline:2})})]}),b&&(0,l.jsxs)(g.U,{children:[(0,l.jsx)(S.kH,{placement:"top",label:(0,l.jsx)(_.cC,{id:"Hcpaw+",values:{MAX_CFG_SCALE:eo.mG,DEFAULT_CFG_SCALE:eo.MI}}),children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"hsYa9i"})})}),(0,l.jsx)(eu.Y2,{defaultValue:u,value:u||"",min:1,max:eo.mG,isDisabled:!t||r,onChange:(e,t)=>{p(t)},children:(0,l.jsx)(eu.zu,{paddingInline:2})})]})]})]})};var eh=r(9883),eg=r(55478),em=r(70065),ef=r(92850),ex=r(26468),ev=r(22226),eb=r(54326),ej=r(2338),ey=r(97217),ew=r(50250),eC=r(82713),ek=r(14274);let eA=async e=>{let{imageUrl:t,upscaleFactor:r}=e,n="".concat(ek.v.API_HOST||"https://api.gamma.app","/media/images/upscale"),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t,upscaleFactor:r})});if(!i.ok){let e=await i.json(),t="".concat(e.error,": ").concat(e.message);throw Error(t,e)}let a=await i.json();return a.data},eS=e=>{let{canGenerate:t,isEnhancingPrompt:r,images:n,canLoadMore:a,isLoadingMore:o,loadMore:c}=e,{isOpen:d,onOpen:u,onClose:p}=(0,eg.q)(),[h,x]=(0,E.useState)([]),[v,b]=(0,E.useState)(2),[j,y]=(0,E.useState)(!1),[w,C]=(0,E.useState)(!1),k=(0,em.p)(),A=(0,E.useCallback)(e=>{x(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},[]),I=(0,E.useCallback)(()=>{w?x([]):x(n.map(e=>e.id)),C(!w)},[n,w]),U=(0,E.useCallback)(async e=>{let t=atob(e),r=Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let n=new Uint8Array(r),i=new Blob([n],{type:"image/jpeg"}),a=window.URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download="image.jpg",o.click()},[]),P=(0,E.useCallback)(async()=>{y(!0);let e=n.filter(e=>h.includes(e.id)),t=1;await Promise.all(e.map(async e=>{let r=await eA({imageUrl:e.attrs.src,upscaleFactor:v});U(r),k({title:"Image ".concat(t," downloaded"),status:"success",duration:3e3,isClosable:!0}),t++})),y(!1)},[n,h,v,y,k,U]);return(0,l.jsxs)(s.g,{spacing:4,align:"stretch",children:[(0,l.jsx)(f.z,{variant:"outline",isDisabled:!t||r,onClick:u,px:12,children:(0,l.jsx)(_.cC,{id:"DN9OsQ"})}),(0,l.jsxs)(ef.u_,{isOpen:d,onClose:p,size:"2xl",scrollBehavior:"inside",children:[(0,l.jsx)(ex.Z,{}),(0,l.jsxs)(ev.h,{children:[(0,l.jsx)(eb.x,{children:"Select images to upscale and download"}),(0,l.jsx)(ej.o,{}),(0,l.jsxs)(ey.f,{children:[(0,l.jsx)(M.M,{gap:2,columns:5,children:n.map(e=>(0,l.jsx)(e_,{image:e,isSelected:h.includes(e.id),onSelectImage:A},e.id))}),a&&(0,l.jsx)(f.z,{variant:"plain",onClick:c,mt:4,isLoading:o,children:(0,l.jsx)(_.cC,{id:"yQ2kGp"})})]}),(0,l.jsxs)(ew.m,{justifyContent:"space-between",children:[(0,l.jsxs)(g.U,{spacing:2,children:[(0,l.jsx)(eC.X,{checked:w,onChange:I}),(0,l.jsx)(Q.x,{size:"sm",children:(0,l.jsx)(_.cC,{id:"wgNoIs"})})]}),(0,l.jsxs)(g.U,{spacing:4,children:[(0,l.jsx)(S.kH,{placement:"top",label:(0,l.jsx)(_.cC,{id:"UiTWCg"}),children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"yT2JRA"})})}),(0,l.jsxs)(f.z,{variant:"solid",mr:3,onClick:P,isLoading:j,isDisabled:0===h.length,children:["Upscale and download",h.length>0&&" "+i.ag._({id:"nJw77c",values:{0:h.length}})]})]})]})]})]})]})},e_=e=>{let{image:t,isSelected:r,onSelectImage:n}=e,i=(0,G.Ly)(t.attrs.src);return(0,l.jsx)(O.P,{children:(0,l.jsx)(f.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),backgroundImage:i,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",role:"group",children:(0,l.jsx)(z.p,{in:r,children:(0,l.jsx)(y.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,l.jsx)(L.M,{h:"100%",w:"100%",children:(0,l.jsx)(A.G,{icon:k.LEp})})})})})},t.id)},eE={key:"image.ai-generated",Panel:e=>{let{currentAttributes:t,updateAttributes:r,editor:n}=e,{hasEnoughCreditsToGenerateImage:o,isCreditsReady:M}=(0,T.qO)(),O=(0,ea.DY)(),N=(0,a.ye)("aiGeneratedImagesAdvancedOptions"),{prompt:H,addPrompt:D,promptPageInfo:z,nextPrompt:L,prevPrompt:F,count:W,setCount:q,model:Q,setModel:V,stylePreset:Y,setStylePreset:K,aspectRatio:Z,setAspectRatio:J,imageGenerateConfig:$,loadImageAiParams:ee,negativePrompt:et,setNegativePrompt:er,steps:en,setSteps:eu,cfgScale:eg,setCfgScale:em}=(0,eo.Xc)(),ef=(0,ed.b)(n),ex=(0,E.useCallback)(e=>{ee(e.attrs,"select"),r({tempUrl:(0,G.SN)(e.attrs.src,G.Iv,e.attrs.meta),...e.attrs}),n&&ef(null==n?void 0:n.state.selection.from)},[n,ee,ef,r]),{generate:ev,isGenerating:eb,isLoadingMore:ej,hasError:ey,imageResults:ew,loadMore:eC,canLoadMore:ek,errorMessage:eA,deleteImage:e_,deletingId:eE}=(0,ea.Qo)({selectImage:ex}),eI="image.ai-generated"===t.source,eU=t.savedMediaId,eP=eI?t.src:void 0;(0,E.useEffect)(()=>{var e;eI&&(null===(e=t.aiParams)||void 0===e?void 0:e.prompt)&&ee(t,"load"),!eI&&t.query&&D(t.query,"load")},[]);let eT=(0,E.useRef)(null);(0,E.useEffect)(()=>{setTimeout(()=>{var e;null===(e=eT.current)||void 0===e||e.focus()},200)},[]);let eR=(0,E.useCallback)(()=>{if(eT.current){var e;eT.current.scrollTop=null===(e=eT.current)||void 0===e?void 0:e.scrollHeight}},[]),[eM,eO]=(0,E.useState)(!1),eN=(0,ea.ec)(n,{onStart(){D("","push")},onContent(e){D(e,"update"),eR()}}),eH=(0,E.useCallback)(()=>{eM||(eO(!0),eN(H).catch(e=>{console.error("Error enhancing AI image prompt",e)}).finally(()=>{eO(!1)}))},[eN,eM,H]);(0,E.useEffect)(()=>{eP||!n||n.isSiteNavbarEditor||eH()},[n]);let eD=(0,E.useCallback)(()=>{eM||eb||(0===H.trim().length?(eO(!0),eN("").then(e=>{ev({...$,prompt:e})}).catch(e=>{console.error("Error enhancing AI image prompt",e)}).finally(()=>{eO(!1)})):ev($))},[eN,ev,$,eM,eb,H]),ez=(0,T.YO)(eD,"generateImage",ec.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),eL=(0,E.useCallback)(e=>{"Enter"===e.key&&e.metaKey&&(e.preventDefault(),ez()),e.stopPropagation()},[ez]),{saveImageRating:eF,hasRatedImage:eG}=(0,ea.S8)(),eW=(0,E.useCallback)(e=>{var r;(null===(r=t.aiParams)||void 0===r?void 0:r.interactionId)&&((0,I.Io)({rating:e,aiParams:t.aiParams,imageUrl:t.src,interactionId:t.aiParams.interactionId}),eF(t,e))},[t,eF]);return(0,l.jsxs)(s.g,{spacing:4,align:"stretch",translate:"no",children:[eP&&(0,l.jsxs)(c.k,{justify:"center",pos:"relative",overflow:"visible",children:[(0,l.jsx)(d.E,{maxH:"30vh",maxW:"100%",objectFit:"contain",src:eP,alt:"",ignoreFallback:!0,borderRadius:"md"}),!eG(t)&&(0,l.jsx)(X,{attrs:t,onRateImage:eW})]}),ey&&(0,l.jsxs)(u.b,{status:"error",flexDirection:"row",alignItems:"start",justifyContent:"start",borderRadius:"md",children:[(0,l.jsx)(p.z,{}),(0,l.jsx)(h.X,{children:eA})]}),(0,l.jsxs)(s.g,{align:"stretch",spacing:4,children:[(0,l.jsxs)(s.g,{align:"stretch",spacing:1,children:[(0,l.jsxs)(g.U,{position:"relative",align:"center",justify:"space-between",children:[(0,l.jsx)(g.U,{children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"W9uQXX"})})}),n&&!n.isSiteNavbarEditor&&(0,l.jsx)(g.U,{children:(0,l.jsx)(S.kH,{placement:"top",label:(0,l.jsx)(_.cC,{id:"DZCfCB",values:{GAMMA_PROPER_NOUN:R.N6}}),children:(0,l.jsx)(f.z,{variant:"ghost",rightIcon:(0,l.jsx)(A.G,{icon:k.qHV}),isLoading:eM||eb,isDisabled:!O,"aria-label":"magic generate",onClick:eH,size:"sm",children:(0,l.jsx)(_.cC,{id:"YqdfV4"})})})})]}),(0,l.jsx)(x.g,{ref:eT,isDisabled:!O||eb,placeholder:eM?"":i.ag._({id:"6RfNWb"}),onKeyDown:eL,value:H,onChange:e=>{D(e.target.value,"update")},"data-testid":"image-search-input",rows:5}),z.total>1&&(0,l.jsx)(el.O,{alignSelf:"end",promptPageInfo:z,nextPrompt:L,prevPrompt:F,isDisabled:eb||eM})]}),(0,l.jsxs)(s.g,{align:"stretch",children:[(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"TXeQBY"})}),(0,l.jsx)(es.A2,{value:Y,setValue:K,isDisabled:!O}),(0,l.jsx)(ei,{value:Z,setValue:J,isDisabled:!O,model:Q}),Q&&(0,l.jsx)(eh.q,{value:Q,setValue:e=>{V(e)}})]}),N&&(0,l.jsx)(v.U,{allowToggle:!0,children:(0,l.jsxs)(b.Q,{children:[(0,l.jsxs)(j.K,{children:[(0,l.jsx)(y.xu,{as:"span",flex:"1",textAlign:"left",children:(0,l.jsx)(m.X,{size:"sm",children:(0,l.jsx)(_.cC,{id:"sxkWRg"})})}),(0,l.jsx)(w.X,{})]}),(0,l.jsx)(C.H,{pb:4,children:(0,l.jsx)(ep,{enabled:O,isGenerating:eb,negativePrompt:et,setNegativePrompt:er,count:W,setCount:q,steps:en,setSteps:eu,cfgScale:eg,setCfgScale:em,model:Q})})]})}),(0,l.jsxs)(s.g,{spacing:1,align:"stretch",children:[(0,l.jsxs)(f.z,{variant:"solid",isLoading:eb,isDisabled:eM,onClick:ez,px:12,children:[(0,l.jsx)(_.cC,{id:"ziAjHi"}),(0,l.jsx)(P.J,{type:"generateImage",position:"absolute",right:4})]}),(0,l.jsx)(U.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:ec.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES}),N&&(0,l.jsx)(eS,{canGenerate:O&&o,isEnhancingPrompt:eM,images:ew,canLoadMore:ek,isLoadingMore:ej,loadMore:eC})]})]}),O&&(0,l.jsx)(B,{onSelectImage:ex,savedMediaId:eU,imageResults:ew,onDeleteImage:e_,deletingId:eE,isLoading:eb,canLoadMore:ek,isLoadingMore:ej,loadMore:eC,resultsPerPage:W,resizeThumbnails:!0})]})},checkDisabled:()=>{let e=(0,o.uL)("ai_generated_images"),t=a.VH.get("aiGeneratedImages");return!(e||t)},label:()=>i.ag._({id:"O+LXs1"}),icon:n.ddb,description:()=>i.ag._({id:"yXA4hx"}),keywords:["ai","image","illustration","graphics","generate"],resizeToFit:!0,badge:()=>i.ag._({id:"isRobC"})}},13773:function(e,t,r){r.d(t,{x:function(){return n}});let n={minWidth:1800,maxWidth:5e3,count:10}},88194:function(e,t,r){r.d(t,{i:function(){return I}});var n=r(52322),i=r(17993),a=r(47443),o=r(52929),l=r(81540),s=r(74444),c=r(75009),d=r(77533),u=r(62614),p=r(74409),h=r(82655),g=r(5879),m=r(87254),f=r(37164),x=r(2784),v=r(91994),b=r(29318),j=r(84286),y=r(97253),w=r(47968),C=r(36651),k=r(87205),A=r(2090),S=r(26433),_=r(13833),E=r(16494);let I={label:()=>m.ag._({id:"bk8Zu0"}),key:"image.custom",description:()=>m.ag._({id:"RPwTMJ"}),icon:h.VmB,Panel:e=>{let{editor:t,editType:r,updateAttributes:h,currentAttributes:U,resetToPlaceholder:P}=e,T=(0,v.CG)(w.KV),{currentWorkspace:R}=(0,C.SE)(),{orgId:M,templateId:O,useStandardThemeBucket:N}=(0,b.Ds)(T||(null==R?void 0:R.id),r),H=(0,x.useRef)(null),D=(0,x.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;h({uploadStatus:E.D.Uploading,showPlaceholder:!0,tempUrl:e,src:null})},[h]),z=(0,x.useCallback)(e=>{h({uploadStatus:E.D.Uploading,showPlaceholder:!1,tempUrl:e,src:null}),H.current=e},[h]),L=(e,n)=>{let i=H.current,a=i||n;if(a){if("node"!==r||!t){h({...(0,y.gM)({result:e,isError:!1}),source:I.key});return}(0,y.Ns)(t,a,e),H.current=null}},F=e=>{if(!H.current||!t){h((0,y.gM)({isError:!0}));return}(0,y.f8)(t,H.current,e)},G=(0,x.useCallback)(e=>{let{file:t,tempUrl:r}=e;if(t.type&&(0,k.Ns)(t.type)){let e="HEIC_tempId_".concat((0,f.x0)());D(e),z(e)}else z(r)},[D,z]),W=(0,x.useCallback)(()=>{h((0,y.gM)({isError:!0}))},[h]),{src:B,tempUrl:q,meta:Q,name:V,showPlaceholder:Y,uploadStatus:X}=U,K=B?(0,k.aN)(B,{width:500}):void 0,Z=!!(B||q||Y);return Z?(0,n.jsxs)(i.g,{align:"flex-start",spacing:4,children:[X===E.D.Uploading&&(0,n.jsxs)(a.b,{status:"info",size:"sm",children:[(0,n.jsx)(o.z,{as:l.$,w:5,h:5}),(0,n.jsx)(s.X,{children:(0,n.jsx)(g.cC,{id:"MEDU34"})})]}),Y?(0,n.jsx)(j.k3,{isUploading:X===E.D.Uploading,hasUploadError:X===E.D.Error,width:"100%"}):(0,n.jsx)(c.E,{src:K||q,alt:"",ignoreFallback:!0,borderRadius:"md"}),Q&&Q.width&&Q.height&&(0,n.jsxs)(d.x,{children:[Q.width,"\xd7",Q.height,"px"]}),V&&(0,n.jsx)(d.x,{children:V}),(0,n.jsx)(u.z,{onClick:P,mt:2,w:"100%",children:(0,n.jsx)(g.cC,{id:"HUPV+K"})})]}):(0,n.jsxs)(i.g,{align:"stretch",spacing:4,children:[N&&(0,n.jsxs)(a.b,{status:"warning",size:"sm",children:[(0,n.jsx)(o.z,{}),(0,n.jsx)(s.X,{children:"[Admin] Theme images will be uploaded to production theme_images bucket"})]}),X===E.D.Error&&(0,n.jsxs)(a.b,{status:"error",size:"sm",children:[(0,n.jsx)(o.z,{}),(0,n.jsx)(s.X,{children:(0,n.jsx)(g.cC,{id:"GymiXM"})})]}),(0,n.jsx)(p.X,{size:"md",children:(0,n.jsx)(g.cC,{id:"IagCbF"})}),(0,n.jsx)(_.v,{currentUrl:"",placeholder:m.ag._({id:"jurEzE"}),handleSubmit:e=>{if(!M){console.error("[CustomImagePanel] saveImageFromUrl - No orgId!");return}z(e);try{(0,A.WY)(e,M,{onUploadComplete:L,onOriginalFileUpload:L,onUploadFailed:F},r,O)}catch(e){F()}},handleDataSubmit:e=>{if(!M){console.error("[CustomImagePanel] saveImageFromDataBlob - No orgId!");return}z(e);try{let t=(0,k.v9)(e,"image");(0,A.cT)(t,M,{onUploadComplete:L,onOriginalFileUpload:L,onUploadFailed:F},r,void 0,O)}catch(e){F()}},noHeader:!0}),(0,n.jsx)(p.X,{size:"md",children:(0,n.jsx)(g.cC,{id:"ONWvwQ"})}),M&&(0,n.jsx)(S.u,{onUploadSuccess:L,onUploadStart:G,onUploadFailed:W,orgId:M,uploadType:"image",editType:r,templateId:O})]})},keywords:["image","upload"],resizeToFit:!0}},68430:function(e,t,r){r.d(t,{E:function(){return w}});var n=r(52322),i=r(70065),a=r(17993),o=r(74409),l=r(77533),s=r(75009),c=r(62614),d=r(85573),u=r(29494),p=r(29117),h=r(5879),g=r(87254),m=r(26433),f=r(16494),x=r(91994),v=r(84286),b=r(47968),j=r(87205),y=r(13833);let w=e=>{let{updateAttributes:t,currentAttributes:r}=e,{sourceUrl:w,meta:C,thumbnail:k}=r,A=(0,x.CG)(b.KV),S=(0,i.p)(),_=async()=>{w&&await (0,y.ft)(w,t).catch(e=>{console.error("[EMBED METADATA] Error restoring preview defaults",e),S({title:g.ag._({id:"cgB+pO",values:{0:e.error}}),status:"error",isClosable:!0,position:"top"})})};return(0,n.jsxs)(a.g,{pt:4,align:"stretch",spacing:4,children:[(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(o.X,{size:"md",children:(0,n.jsx)(h.cC,{id:"qbzc6p"})}),(0,n.jsx)(l.x,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(h.cC,{id:"D9R1mI"})})]}),(0,n.jsxs)(a.g,{align:"stretch",p:4,borderRadius:"lg",border:"1px solid var(--chakra-colors-blue-500)",bg:"gray.100",spacing:4,children:[(null==k?void 0:k.showPlaceholder)?(0,n.jsx)(v.k3,{hasUploadError:(null==k?void 0:k.uploadStatus)===f.D.Error,isUploading:(null==k?void 0:k.uploadStatus)===f.D.Uploading}):k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.E,{src:k.src||k.tempUrl||"",alt:(null==C?void 0:C.title)||"",ignoreFallback:!0,borderRadius:"md"}),(0,n.jsx)(c.z,{isDisabled:k.uploadStatus===f.D.Uploading,onClick:()=>{t({thumbnail:void 0})},children:(0,n.jsx)(h.cC,{id:"YFcW0s"})})]}):A&&(0,n.jsx)(m.u,{onUploadStart:e=>{let{file:r,tempUrl:n}=e;r.type&&(0,j.Ns)(r.type)?t({thumbnail:{uploadStatus:f.D.Uploading,showPlaceholder:!0,tempUrl:null}}):t({thumbnail:{tempUrl:n,uploadStatus:f.D.Uploading,showPlaceholder:!1}})},onUploadSuccess:e=>{let{src:r}=e;t({thumbnail:{src:r}})},onUploadFailed:e=>{console.error("[EMBED METADATA] Error uploading thumbnail image",e),t({thumbnail:{uploadStatus:f.D.Error,showPlaceholder:!0,tempUrl:null}})},orgId:A||"",uploadType:"image",editType:"icon",showTip:!1,dropHereText:g.ag._({id:"yxTfZB",values:{0:"%{browse}"}}),customHeight:"200px",customFontSize:"sm"}),(0,n.jsxs)(a.g,{mt:2,align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(h.cC,{id:"MHrjPM"})}),(0,n.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.title)||"",placeholder:g.ag._({id:"bTzMt5"}),onChange:e=>{t({meta:{...C,title:e.target.value}})},"data-testid":"title-input"})]}),(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(h.cC,{id:"Nu4oKW"})}),(0,n.jsx)(u.g,{bg:"white",rows:4,value:(null==C?void 0:C.description)||"",placeholder:g.ag._({id:"2VBqT4"}),onChange:e=>{t({meta:{...C,description:e.target.value}})}})]}),(0,n.jsxs)(a.g,{align:"stretch",children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(h.cC,{id:"On0aF2"})}),(0,n.jsxs)(p.U,{children:[(null==C?void 0:C.icon)&&(0,n.jsx)(s.E,{src:C.icon,h:"1.5em",borderRadius:"sm"}),(0,n.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.site)||"",placeholder:g.ag._({id:"SmWcKR"}),onChange:e=>{t({meta:{...r.meta,site:e.target.value}})}})]})]})]}),(0,n.jsx)(c.z,{onClick:_,children:(0,n.jsx)(h.cC,{id:"Z00hdC"})})]})}},69396:function(e,t,r){r.d(t,{j:function(){return L}});var n=r(52322),i=r(82655),a=r(87254),o=r(30523),l=r(62614),s=r(28535),c=r(38035),d=r(20437),u=r(77533),p=r(47443),h=r(52929),g=r(82729),m=r(67109),f=r(32899),x=r(17993),v=r(74105),b=r(20816),j=r(85573),y=r(42946),w=r(49929),C=r(94523),k=r(5879),A=r(41004),S=r(2689),_=r.n(S),E=r(4742),I=r.n(E),U=r(2784),P=r(66028),T=r(93441);let R="60px",M=(0,U.memo)(e=>{let{icon:t,isSelected:r,onIconClick:i}=e;return(0,n.jsx)(o.P,{height:R,width:R,children:(0,n.jsx)(l.z,{borderRadius:"base",bgColor:r?"trueblue.100":void 0,color:"gray.900",display:"block",width:"100%",height:"100%",maxH:"100%",pos:"relative",_hover:{bgColor:r?"trueblue.100":"trueblue.50"},_active:{bgColor:"trueblue.100"},transition:"box-shadow .2s ease",variant:"ghost",cursor:"pointer",onClick:()=>i(t),"data-testid":"icon-search-grid-item",children:(0,n.jsx)(s.xu,{height:"100%",maxH:"100%",sx:{svg:{width:"100%",height:"100%"}},dangerouslySetInnerHTML:{__html:t.html}})})},t.id)});M.displayName="ImageSearchGridItem";let O=e=>{let{searchQuery:t,currentAttributes:r,updateAttributes:i}=e,[a,o]=(0,U.useState)([]),[l,g]=(0,U.useState)(!0),[m,f]=(0,U.useState)(!1),[x,v]=(0,U.useState)(1),b=(0,U.useCallback)(async e=>{let r="/api/icons/search?count=".concat(100,"&query=").concat(t,"&page=").concat(e);g(!0),f(!1);try{var n;let e=await fetch(r,{credentials:"include"}),t=await e.json();if(g(!1),!((null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.length)>=0))throw Error(t);o(t.data)}catch(e){f(!0),g(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t]);(0,U.useEffect)(()=>{o([]),v(1),b(1)},[t,b]),(0,U.useCallback)(()=>{b(x+1),v(x+1)},[b,x]);let j=(0,U.useCallback)(e=>{i({src:void 0,tempUrl:e.src,meta:{height:e.height,width:e.width},providerMeta:{name:e.provider,id:e.id},query:t})},[t,i]),y=a.map((e,t)=>{var i,a;let o=e.id===(null==r?void 0:null===(i=r.providerMeta)||void 0===i?void 0:i.id)&&e.provider===(null==r?void 0:null===(a=r.providerMeta)||void 0===a?void 0:a.name);return(0,n.jsx)(M,{provider:e.provider,icon:e,isSelected:o,onIconClick:j},t)});return(0,n.jsxs)(c.k,{direction:"column",align:"stretch",children:[(0,n.jsxs)(d.M,{gap:2,columns:{base:4,"2xl":6},children:[y,l&&(0,n.jsx)(N,{})]}),!1,0===a.length&&!l&&(0,n.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,n.jsx)(u.x,{style:{color:"gray"},children:(0,n.jsx)(k.cC,{id:"2AY48J",values:{searchQuery:t}})})}),m&&(0,n.jsxs)(p.b,{status:"error",children:[(0,n.jsx)(h.z,{}),(0,n.jsx)(k.cC,{id:"5hlcZg"})]})]})},N=()=>(0,n.jsx)(n.Fragment,{children:_()(100).map((e,t)=>(0,n.jsx)(o.P,{height:R,children:(0,n.jsx)(g.o,{ratio:1,children:(0,n.jsx)(m.O,{borderRadius:"base"})})},t))}),H=(0,A.E)(f.h),D=e=>{let{currentAttributes:t,updateAttributes:r,defaultQuery:i="",randomQueries:o}=e,[l,c]=(0,U.useState)(i),[d,u]=(0,U.useState)("");(0,U.useEffect)(()=>{u(i),c(i)},[i]);let p=(0,U.useCallback)(()=>{let e=I()(o);for(;e===l;)e=I()(o);e&&(c(e),u(""))},[o,l]),h=(0,T.Kt)(c,500);return(0,n.jsxs)(x.g,{spacing:4,align:"stretch",translate:"no",children:[(0,n.jsxs)(v.B,{size:"md",children:[(0,n.jsx)(b.Z,{pointerEvents:"none",children:(0,n.jsx)(s.xu,{color:"gray.400",children:(0,n.jsx)(w.G,{icon:y.wn1})})}),(0,n.jsx)(j.I,{placeholder:l||a.ag._({id:"oMAM3/"}),value:d,onChange:e=>{u(e.target.value),h(e.target.value)},"data-testid":"image-search-input"}),o&&(0,n.jsx)(b.x,{children:(0,n.jsx)(C.kH,{placement:"top",label:(0,n.jsx)(k.cC,{id:"OVjfHO"}),children:(0,n.jsx)(H,{icon:(0,n.jsx)(w.G,{icon:y.RJo}),"aria-label":a.ag._({id:"OVjfHO"}),variant:"ghost",onClick:p,size:"sm",whileTap:{y:"-5px"},onMouseDown:P.br})})})]}),(0,n.jsx)(O,{currentAttributes:t,updateAttributes:r,searchQuery:l||""})]})},z=["animals","arrows","business","party","nature","food"],L={key:"image.icon",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(D,{updateAttributes:t,currentAttributes:r,currentIconUrl:r.src,defaultQuery:r.query||"",randomQueries:z})},label:()=>a.ag._({id:"mcmuCe"}),icon:i.ocQ,keywords:["icon","symbol","picture"]}},61185:function(e,t,r){r.d(t,{Q:function(){return a},s:function(){return o}});var n=r(86418),i=r(83230);let a={bing:"image.bing",giphy:"image.giphy",google:"image.google",web:"image.web",unsplash:"image.unsplash",lexica:"image.lexica",aiGenerated:"image.ai-generated",fontawesome:"image.icon"},o={web:i.Q,aiGenerated:n.N}},83230:function(e,t,r){r.d(t,{Q:function(){return l}});var n=r(52322),i=r(82655),a=r(87254),o=r(66257);let l={key:"image.web",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(o.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enablePagination:!0,enableLicenseFilter:!0,provider:"web",resultsPerPage:48,randomQueries:["wallpaper"],resizeThumbnails:!0})},featureFlag:"webImageSearch",label:()=>a.ag._({id:"coorYU"}),icon:i.Y$T,keywords:["image","photo","pic"],description:()=>a.ag._({id:"NMbF1d"}),resizeToFit:!0}},48741:function(e,t,r){r.d(t,{NX:function(){return n.N},LE:function(){return b},BF:function(){return j},jt:function(){return A},QR:function(){return S},in:function(){return _.i},wj:function(){return E},DN:function(){return I},$5:function(){return N},bO:function(){return D},F6:function(){return z},bD:function(){return L},eK:function(){return G},jS:function(){return W.j},FH:function(){return B},ud:function(){return V},Vy:function(){return Z},yC:function(){return eC},zX:function(){return ek},DU:function(){return J},Bo:function(){return $},BR:function(){return ea},TQ:function(){return el},p7:function(){return es},w4:function(){return ec},zs:function(){return eu},iL:function(){return ep},Ds:function(){return eh},hq:function(){return ef},oC:function(){return ex},QT:function(){return ev.Q},Hw:function(){return ej},BM:function(){return ey},qz:function(){return ew}});var n=r(86418),i=r(52322),a=r(82655),o=r(5879),l=r(87254),s=r(17993),c=r(66855),d=r(68430),u=r(13833);let p=e=>{let{editor:t,updateAttributes:r,currentAttributes:n,urlPlaceholder:a,embedTip:o}=e,l=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:l,updateAttributes:r,placeholder:a||"https://..."}),o,l&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})};var h=r(29705),g=r(47443),m=r(52929),f=r(74444),x=r(11082);let v=e=>{let{guideLink:t,extraMessage:r,providerName:n}=e;return(0,i.jsxs)(g.b,{status:"info",children:[(0,i.jsx)(m.z,{}),(0,i.jsx)(f.X,{children:(0,i.jsx)(o.cC,{id:"qBttXb",values:{providerName:n,extraMessage:r},components:{0:(0,i.jsx)(x.r,{href:t,textDecoration:"underline",isExternal:!0}),1:(0,i.jsx)(h.h,{mx:"2px"})}})})]})},b={label:()=>"Airtable",key:"embed.airtable",description:()=>l.ag._({id:"KlL5LU"}),icon:a.u7T,image:{src:"/_next/static/media/airtable.e403549a.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/airtable.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://airtable.com/...",embedTip:(0,i.jsx)(v,{guideLink:"https://support.airtable.com/hc/en-us/articles/217846478-Embedding-a-view-or-base",providerName:"Airtable",extraMessage:(0,i.jsx)(o.cC,{id:"gsZDsS"})})}),categories:["app","form"],defaultDisplayStyle:"inline",inlineInteractive:!0,iframeOptions:{allowPopups:!0},keywords:["airtable","database","spreadsheet","table"]},j={label:()=>"Amplitude",key:"embed.amplitude",keywords:["amplitude","analytics","chart","data"],description:()=>l.ag._({id:"wa1wV8"}),icon:a.Ma4,image:{src:"/_next/static/media/amplitude.5828f141.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/analytics.amplitude.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,i.jsx)(v,{guideLink:"https://help.amplitude.com/hc/en-us/articles/235717108-Share-charts-dashboards-and-notebooks-with-stakeholders-outside-your-company#generate-embed-code-for-your-content",extraMessage:(0,i.jsx)(o.cC,{id:"NDM+Av"}),providerName:"Amplitude"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})}};var y=r(97143),w=r(13773),C=r(57124),k=r(66257);let A={key:"image.bing",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e,n=(0,C.iY)();return(0,i.jsx)(k.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enableSearch:n,enablePagination:!1,provider:"bing",resultsPerPage:w.x.count})},label:()=>l.ag._({id:"2V6hMo"}),icon:y.hVS,image:{src:"/_next/static/media/bing.0f94cfbe.svg",height:1024,width:678,blurWidth:0,blurHeight:0},keywords:["image","photo","bing","pic"]},S={label:()=>"Calendly",key:"embed.calendly",description:()=>l.ag._({id:"grPhlY"}),icon:a.fT7,image:{src:"/_next/static/media/calendly.d1a57857.svg",height:150,width:150,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/calendly.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://calendly.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["calendly","meeting","schedule","appointment"]};var _=r(88194);let E={label:()=>l.ag._({id:"0+gRao"}),description:()=>l.ag._({id:"w31i/H"}),key:"video.custom",icon:a.sl_,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["video","audio","podcast","embed"],iframeOptions:{allowPopups:!0},preferHtml:!0},I={label:()=>"Figma",key:"embed.figma",icon:y.uWT,keywords:["design","prototype","wireframe","figjam","whiteboard"],description:()=>l.ag._({id:"riUMyL"}),image:{src:"/_next/static/media/figma.14e7d0c1.svg",height:2500,width:1667,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.figma.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.figma.com/file/..."}),(0,i.jsx)(v,{guideLink:"https://help.figma.com/hc/en-us/articles/360039827134-Embed-files-and-prototypes",providerName:"Figma/FigJam"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},canEmbedPrivate:!0,rewriteEmbedUrl:e=>e.includes("figma.com/embed")?e:"https://www.figma.com/embed?embed_host=share&url=".concat(encodeURIComponent(e))};var U=r(38035),P=r(28535),T=r(42946),R=r(38421),M=r.n(R);let O=["funny","surprise","hooray","welcome","excited","nope","fail","sad","cry","angry","teamwork","cats","dogs","high five"],N={key:"image.giphy",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:O,provider:"giphy"}),(0,i.jsx)(U.k,{width:"100%",justify:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(P.xu,{maxW:"150px",children:(0,i.jsx)(M(),{src:"/images/powered-by-giphy.png",width:"150",height:"17",alt:"Powered by GIPHY"})})})]})},label:()=>l.ag._({id:"E435oC",values:{GIPHY_PROPER_NOUN:"GIPHY"}}),description:()=>l.ag._({id:"QmULXm"}),icon:T.CjD,image:{src:"/_next/static/media/giphy.2d92c9c6.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},keywords:["gif","animation","animated","giphy"],resizeToFit:!0};var H=r(94199);let D={label:()=>"Google Drive",key:"embed.gdrive",description:()=>l.ag._({id:"1q3pN1",values:{SHEETS_PROPER_NOUN:"Sheets",DOCS_PROPER_NOUN:"Docs",SLIDES_PROPER_NOUN:"Slides",GAMMA_ARTIFACT_PROPER_NOUN:H.Yc}}),icon:y.Uuo,image:{src:"/_next/static/media/google-drive.2d314cf9.svg",height:78,width:87,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\//,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://docs.google.com/...",embedTip:(0,i.jsx)(v,{guideLink:"https://support.google.com/docs/answer/183965?hl=en&co=GENIE.Platform%3DDesktop#zippy=%2Cedit-embedded-spreadsheets%2Cembed-a-document-spreadsheet-or-presentation",extraMessage:(0,i.jsx)(o.cC,{id:"G6PCHK",values:{GAMMA_ARTIFACT_PROPER_NOUN:H.Yc}}),providerName:"Google Sheets, Docs, or Slides"})}),canEmbedPrivate:!0,rewriteEmbedUrl:e=>{if(e.includes("/presentation/")){let t=new URL(e.replace("/edit","/preview"));return t.searchParams.set("rm","minimal"),t.toString()}{let t=new URL(e.replace("/preview","/edit"));return t.toString()}},keywords:["docs","sheet","slide","gdrive","document"]},z={label:()=>"Google Form",key:"embed.google.form",description:()=>l.ag._({id:"sgbNf4"}),icon:y.Uuo,image:{src:"/_next/static/media/google-form.c5494f4d.svg",height:66,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\/forms/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://docs.google.com/forms/..."}),canEmbedPrivate:!0,keywords:["google form","form","survey","questionnaire"],defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},L={key:"image.google",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(k.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",provider:"google"})})},label:()=>l.ag._({id:"h2JWN5"}),icon:y.xYR,image:{src:"/_next/static/media/google-image.5d5a5835.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["image","photo"]};var F=r(1978);let G={key:"color.gradient",Panel:e=>{let{updateAttributes:t,currentAttributes:r,isDark:n}=e;return(0,i.jsx)(F._,{value:r,updateValue:t,isDark:n})},label:()=>l.ag._({id:"/S8bMP"}),description:()=>l.ag._({id:"/XRwS6"}),icon:a.e2K,keywords:["gradient","color","mesh"]};var W=r(69396);let B={label:()=>"Jotform",key:"embed.jotform",description:()=>l.ag._({id:"7yLOnm"}),icon:a.Lc0,image:{src:"/_next/static/media/jotform.0a55e4a9.svg",height:334,width:304,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/form\.jotform\.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://form.jotform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["jotform","form","survey","questionnaire"]};var q=r(77533);let Q=["wallpaper","textures","background","nature","gradient","relax","sky","water","pattern","abstract"],V={key:"image.lexica",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:Q,provider:"lexica",enablePagination:!1}),(0,i.jsx)(P.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(q.x,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(o.cC,{id:"rbDrRg",components:{0:(0,i.jsx)(x.r,{href:"https://lexica.art",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},featureFlag:"lexicaImageSearch",label:()=>l.ag._({id:"cSVX+F"}),description:()=>l.ag._({id:"RdyK6U"}),image:{src:"/_next/static/media/lexica.8699ff3f.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVMaXG5ubm/v782NjYNDQ0UFBSvr6+mpqa0tLSoMQVUAAAACXRSTlMAr+A2F1nir64H2A2bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGNgYGBmZoAAdjYog5GJMIODjYUFzGBmZWVlYQAACCkATB93BkwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},keywords:["ai","lexica","stable diffusion","generated","photo","photography","image"]};var Y=r(81540),X=r(2784);let K=X.lazy(()=>Promise.all([r.e(7576),r.e(5053)]).then(r.bind(r,35053)).then(e=>({default:e.LoomPanel}))),Z={key:"video.loom",Panel:e=>(0,i.jsx)(X.Suspense,{fallback:(0,i.jsx)(Y.$,{size:"md"}),children:(0,i.jsx)(K,{...e})}),label:()=>l.ag._({id:"yrPgHm"}),description:()=>l.ag._({id:"NMTPSf"}),icon:a.IyC,image:{src:"/_next/static/media/loom.a033778e.svg",height:190,width:190,blurWidth:0,blurHeight:0},urlRegex:/^https:\/\/www.loom.com/,rewriteEmbedUrl:e=>{if(!e.includes("/embed/"))return e;let t=new URL(e);return t.searchParams.set("hideEmbedTopBar","true"),t.toString()},keywords:["video","recording","loom","screen"]},J={key:"embed.microsoft.office",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),(0,i.jsx)(v,{guideLink:"https://support.microsoft.com/en-us/office/embed-a-word-document-in-your-blog-0faa0253-2751-44bf-8486-ea7837fe7db1",extraMessage:(0,i.jsx)(o.cC,{id:"2csAkv"}),providerName:"Word, Excel, or PowerPoint"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>"Office 365",description:()=>l.ag._({id:"cbRq5v",values:{MICROSOFT_PROPER_NOUN:"Microsoft",WORD_PROPER_NOUN:"Word",POWERPOINT_PROPER_NOUN:"PowerPoint",EXCEL_PROPER_NOUN:"Excel",ONENOTE_PROPER_NOUN:"OneNote"}}),icon:y.hVS,image:{src:"/_next/static/media/office-365.868363a8.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/.*\.sharepoint\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},rewriteEmbedUrl:e=>{let t=new URL(e.replace("/:p:/r","").replace("/doc2.aspx","/Doc.aspx"));return t.searchParams.set("action","embedview"),t.searchParams.delete("mobileredirect"),t.toString()},keywords:["word","excel","powerpoint","office","microsoft","msoffice"]},$={label:()=>l.ag._({id:"yA1Sb+",values:{MIRO_PROPER_NOUN:"Miro"}}),key:"embed.miro",icon:a.EhQ,description:()=>l.ag._({id:"Px3dYF"}),image:{src:"/_next/static/media/miro.78878247.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/miro.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.miro.com/..."}),(0,i.jsx)(v,{guideLink:"https://help.miro.com/hc/en-us/articles/360016335640-How-to-embed-editable-boards-into-websites",providerName:"Miro"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["whiteboard","workshop","brainstorm","miro"],rewriteEmbedUrl:e=>e.includes("/embed/")||e.includes("/live-embed/")?e:e.replace("/board/","/embed/")};var ee=r(74409),et=r(91994),er=r(97253),en=r(47968),ei=r(26433);let ea={label:()=>l.ag._({id:"1r0gtu"}),key:"embed.pdf",description:()=>l.ag._({id:"2SUV3x"}),icon:a.gSj,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,et.CG)(en.KV),p=(0,c.NW)(n),h=(0,X.useRef)(null),g=(0,X.useCallback)(e=>{let{tempUrl:t,file:n}=e,i=(0,er.B0)(n);h.current=t,r({...i,url:t})},[r]),m=(0,X.useCallback)((e,r)=>{if(!t)return;let n=h.current,i=n||r;(0,er.QZ)(t,i,e),h.current=null},[t]);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:p,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),p&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n}),(0,i.jsx)(ee.X,{size:"md",children:(0,i.jsx)(o.cC,{id:"ONWvwQ"})}),a&&(0,i.jsx)(ei.u,{onUploadSuccess:m,onUploadStart:g,orgId:a,uploadType:"doc",showTip:!1,dropHereText:l.ag._({id:"ByKyau",values:{0:"%{browse}"}}),editType:"node"})]})},urlRegex:/\.pdf$/,image:{src:"/_next/static/media/PDF_icon.2d280cf2.svg",height:512,width:512,blurWidth:0,blurHeight:0},featureFlag:"uploadPDF",iframeOptions:{noSandbox:!0},downloadable:!0,keywords:["pdf","doc","upload","file"]};var eo=r(54933);let el={key:"embed.microsoft.powerbi",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>"PowerBI",image:{src:"/_next/static/media/powerbi.94baf198.svg",height:630,width:630,blurWidth:0,blurHeight:0},icon:eo.t5N,urlRegex:/^https?:\/\/app\.powerbi\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["microsoft","powerbi"]},es={label:()=>"Spotify",key:"video.spotify",keywords:["spotify","music","podcast","playlist","song","album"],description:()=>l.ag._({id:"lrKTd0"}),icon:y.Ha7,image:{src:"/_next/static/media/spotify.2dd06f33.svg",height:1333,width:1333,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/open.spotify.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a||"",updateAttributes:r,placeholder:"https://open.spotify.com/..."}),(0,i.jsx)(v,{guideLink:"https://artists.spotify.com/en/help/article/embedded-players-follow-buttons",providerName:"Spotify",extraMessage:(0,i.jsx)(o.cC,{id:"ItAUcI"})}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})}},ec={label:()=>"Tally Form",key:"embed.tally",description:()=>l.ag._({id:"Qzo1BZ"}),icon:a.Lc0,image:{src:"/_next/static/media/tally.dd047104.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXHpG9s0E1swDVk0E1s0El/0GeU3H14yEVszEl03El8jElM0El5tFIXjG9v/HO6cF6Y5E2A9E2gHheKrAAAAEnRSTlMAVyclXeYiCNf+fdCl9uif/aFquzWYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANElEQVR4nC3FWRLAEBRFwWPKcxNi2P9iFaV/Grvw+fBQpjQHEJLUHcCr+rcHsPS5PcR4uhY8sgFUhN0cjQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},urlRegex:/^https?:\/\/tally.so/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://tally.so/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},ed=/\/video\/(\d+)/,eu={label:()=>"TikTok",key:"video.tiktok",icon:y.ABo,image:{src:"/_next/static/media/tiktok.cbd7f7ff.svg",height:256,width:256,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.tiktok.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.tiktok.com/..."}),(0,i.jsx)(v,{guideLink:"https://developers.tiktok.com/doc/embed-videos/",providerName:"TikTok"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},preferHtml:!0,rewriteEmbedUrl(e){var t;let r=null===(t=e.match(ed))||void 0===t?void 0:t[1];return r?"https://www.tiktok.com/embed/v2/".concat(r):e},inlineInteractive:!0,keywords:["tiktok","video","social"]},ep={key:"embed.twitter",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(s.g,{align:"flex-start",spacing:4,children:(0,i.jsx)(u.v,{currentUrl:r.url,updateAttributes:t,placeholder:"https://twitter.com/..."})})},label:()=>"Tweet",icon:y.mdU,image:{src:"/_next/static/media/twitter.c7499c85.svg",height:1110,width:1110,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(www\.)?twitter\.com/,keywords:["twitter","tweet"],preferHtml:!0,defaultDisplayStyle:"inline",inlineInteractive:!0},eh={label:()=>"Typeform",key:"embed.typeform",description:()=>l.ag._({id:"yjYR46"}),icon:eo.Lc0,image:{src:"/_next/static/media/typeform.6d709d2e.svg",height:800,width:800,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/([a-z0-9]*\.)?typeform\.com/,Panel:e=>(0,i.jsx)(p,{...e,urlPlaceholder:"https://typeform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["typeform","form","survey","questionnaire"]},eg="Unsplash",em=["wallpaper","textures","architecture","background","nature","gradient","experimental","animals","california","flowers","relax","sky","water","pattern","abstract"],ef={key:"image.unsplash",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:em,provider:"unsplash"}),(0,i.jsx)(P.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,i.jsx)(q.x,{fontSize:"sm",color:"gray.500",children:(0,i.jsx)(o.cC,{id:"k16iQH",values:{UNSPLASH_PROPER_NOUN:eg},components:{0:(0,i.jsx)(x.r,{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},label:()=>l.ag._({id:"olwQVc",values:{UNSPLASH_PROPER_NOUN:eg}}),description:()=>l.ag._({id:"tQSDXx"}),icon:y.WxC,image:{src:"/_next/static/media/unsplash.1957709b.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["stock","photo","photography","image","unsplash"],resizeToFit:!0},ex={key:"video.vimeo",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://vimeo.com/..."}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>l.ag._({id:"M1Uyl1"}),image:{src:"/_next/static/media/vimeo.4de20653.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(player\.)?vimeo\.com/,keywords:["vimeo","video"]};var ev=r(83230),eb=r(82713);let ej={label:()=>l.ag._({id:"/hLjBB"}),description:()=>l.ag._({id:"wRlboO"}),key:"embed.custom",icon:a.m6E,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,{proxy:a,displayStyle:p}=n,h=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:h||"",updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),h&&p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eb.X,{isChecked:a,onChange:e=>r({proxy:e.target.checked}),children:(0,i.jsx)(o.cC,{id:"Fl9cgp"})}),(0,i.jsx)(q.x,{fontSize:"sm",color:"gray.500",mt:-2,children:(0,i.jsx)(o.cC,{id:"J87/8N"})})]}),h&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["webpage","website","app","embed","iframe"]},ey={label:()=>"Wistia",key:"video.wistia",icon:a.IyC,image:{src:"/_next/static/media/wistia.613af213.svg",height:1899,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/fast.wistia.net/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,i.jsx)(v,{guideLink:"https://wistia.com/support/embed-and-share/media-on-your-website",providerName:"Wistia"}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},keywords:["wistia","video"]},ew={key:"video.youtube",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:n}=e,a=(0,c.NW)(n);return(0,i.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,i.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.youtube.com/watch?v=..."}),a&&(0,i.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:n})]})},label:()=>l.ag._({id:"7J5KkU"}),icon:y.opf,image:{src:"/_next/static/media/youtube.b0610934.svg",height:461,width:461,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www\.youtube\.com/,keywords:["youtube","video"]},eC=[A,N,L,ev.Q,V,ef,ew,Z,I,z,D,ej,_.i,n.N,J,el,ep,ex,E,ea,$,b,j,ey,es,eu,G,W.j,S,eh,B,ec],ek=Object.fromEntries(Object.values(eC).flat().map(e=>[e.key,e]))},16494:function(e,t,r){var n,i;r.d(t,{D:function(){return n}}),(i=n||(n={}))[i.Done=0]="Done",i[i.Uploading=1]="Uploading",i[i.Error=2]="Error",i[i.Queued=3]="Queued"},50279:function(e,t,r){r.d(t,{C:function(){return a},K:function(){return i}});var n=r(61185);let i=e=>{var t,r,n,i,a,o;return(null===(t=e.meta)||void 0===t?void 0:t.description)||(null===(r=e.meta)||void 0===r?void 0:r.alt_description)||(null===(n=e.meta)||void 0===n?void 0:n.title)||(null===(i=e.meta)||void 0===i?void 0:i.snippet)||(null===(o=e.meta)||void 0===o?void 0:null===(a=o.tags)||void 0===a?void 0:a.join(", "))||e.src},a=(e,t,r)=>{let i={src:e.imageUrl,tempUrl:e.thumbnailUrl,meta:{height:e.height,width:e.width,description:e.description,alt_description:e.altDescription,title:e.title,snippet:e.snippet},query:t,source:n.Q[r]};return"aiGenerated"===r&&(i.aiParams={prompt:e.aiPrompt,height:e.height,width:e.width,model:e.aiModel,style_preset:e.aiStylePreset}),i}},11550:function(e,t,r){r.d(t,{M:function(){return l}});var n=r(55478),i=r(2784),a=r(43997),o=r(87827);let l=e=>{let{id:t,...r}=e,{isOpen:l,onOpen:s,onClose:c}=(0,n.q)(r),d=(0,a.I0)();return(0,i.useEffect)(()=>{t&&d((0,o.VN)({id:t,isOpen:l}))},[l,d,t]),(0,i.useEffect)(()=>()=>{t&&d((0,o.VN)({id:t,isOpen:!1}))},[d,t]),{isOpen:l,onOpen:s,onClose:c}}},62131:function(e,t,r){r.d(t,{ER:function(){return s},U:function(){return d},Y7:function(){return c}});var n=r(52322),i=r(82554),a=r(57124),o=r(1163),l=r(12265);let s=e=>{let{product:t="pro",...r}=e;return(0,n.jsx)(i.C,{size:"sm",variant:"solid",bottom:0,right:0,bg:"linear-gradient(97deg, #3300D9 -10%, #9D20C9 56.82%, #DF7A6C 120%)",color:"whiteAlpha.900",textShadow:"0px 0px 1px rgba(0, 0, 0, .5)",fontSize:"11px",...r,children:(0,l.K)()[t].name})},c=e=>{let{workspace:t,...r}=e,i=(0,o.K9)(t);return i?(0,n.jsx)(s,{variant:"subtle",...r,product:i}):null},d=e=>{let{workspace:t,productFeature:r,...i}=e,l=(0,a.Y)(r,t),c=(0,o.I4)(r);return l||null===c?null:(0,n.jsx)(s,{variant:"solid",product:c,...i})}},87342:function(e,t,r){r.d(t,{m:function(){return x}});var n=r(52322),i=r(38035),a=r(43297),o=r(29117),l=r(77533),s=r(62614),c=r(5879),d=r(93202),u=r(42111),p=r(94199),h=r(76249),g=r(2953),m=r(1163),f=r(62131);let x=e=>{let{title:t=(0,n.jsx)(c.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:p.x8}}),description:r,buttonLabel:x,onOpenCallback:v,onCloseCallback:b,segmentEvent:j,isNarrow:y}=e,w=(0,u.ye)("upsellUXEnabled_Pro"),{openUpsellModal:C,product:k,proYearlyProductPrice:A}=(0,g.z)();if("pro"===k||!w)return null;let S=((null==A?void 0:A.price)||19200)/(0,m.kK)(null==A?void 0:A.currency)/12,_=(null==A?void 0:A.currency)||d.Fa6.Usd,E=(0,m.aS)(null==A?void 0:A.currency);return(0,n.jsxs)(i.k,{flex:1,w:"100%",mb:4,p:4,borderRadius:"md",bg:"trueblue.50",borderColor:"trueblue.200",position:"relative",borderWidth:1,shadow:"sm",flexDirection:y?"column":"row",align:"center",gap:4,children:[(0,n.jsxs)(a.K,{flex:2,alignSelf:"stretch",children:[(0,n.jsxs)(o.U,{children:[(0,n.jsx)(f.ER,{variant:"solid"}),(0,n.jsx)(l.x,{fontWeight:"bold",children:t})]}),(0,n.jsx)(l.x,{color:"gray.700",fontSize:"xs",children:r||(0,n.jsx)(c.cC,{id:"gGlaFH",values:{GAMMA_PROPER_NOUN:p.N6}})})]}),(0,n.jsxs)(a.K,{spacing:1,flex:1,alignSelf:"stretch",children:[(0,n.jsx)(s.z,{variant:"solid",colorScheme:"trueblue",size:"sm",onClick:()=>{C({onOpenCallback:v,onCloseCallback:b,segmentEvent:j})},children:x||(0,n.jsx)(c.cC,{id:"kwkhPe"})}),(0,n.jsx)(l.x,{textAlign:"center",fontSize:"xs",color:"gray.700",children:(0,n.jsx)(c.cC,{id:"LTohGv",values:{0:(0,h.x)(S,{currency:_,notation:E})}})})]})]})}},67964:function(e,t,r){r.d(t,{R4:function(){return n.R},uL:function(){return i.uL},dU:function(){return i.dU},Y:function(){return i.Y},_O:function(){return i._O},Yt:function(){return i.Yt}}),r(72354);var n=r(43979),i=r(57124)},50521:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(2784);let i=(0,n.createContext)({})},1978:function(e,t,r){r.d(t,{_:function(){return D}});var n=r(52322),i=r(29117),a=r(28535),o=r(43297),l=r(38035),s=r(10625),c=r(67046),d=r(62614),u=r(99058),p=r(44035),h=r(39237),g=r(75768),m=r(32899),f=r(42946),x=r(49929),v=r(94523),b=r(5879),j=r(87254),y=r(62349),w=r.n(y),C=r(2784),k=r(98621),A=r.n(k),S=r(93441),_=r(82729),E=r(27875),I=r.n(E);let U={soft:{name:"Soft",spin:[0,-40,40],lighten:[0,0,0]},duo:{name:"Duo",spin:[0,180],lighten:[0,0]},crescent:{name:"Crescent",spin:[0,-45,45,-90,90],lighten:[0,0,0,0,0]},wisp:{name:"Wisp",spin:[0,72,216],lighten:[0,0,0]},mono:{name:"Mono",spin:[0,0,0],lighten:[0,20,40]},cosmos:{name:"Cosmos",spin:[0,72,144,216,288],lighten:[0,0,0,0,0]}},P=e=>{let t=[];e.forEach((e,r)=>{let n=e.setAlpha(1),i=n.toHsl().h*r,a="radial-gradient(circle at ".concat(50*(2*i%360/360),"% ").concat(50*(3*i%360/360),"%, ").concat(n.setAlpha(.5).toHex8String()," 0, ").concat(n.setAlpha(0).toHex8String()," ").concat(50*(1*i%360/360)+50,"%)");t.push(a)});let r=e[0].setAlpha(.5).toHex8String();return t.push("linear-gradient(0deg, ".concat(r," 0%, ").concat(r," 100%)")),{backgroundImage:t.join(",")}},T=(e,t)=>{let r=U[e],n=[];return r.spin.forEach(e=>{let r=A()(t.toHsv()).spin(e);n.push(r)}),r.lighten.forEach((e,t)=>{n[t].lighten(e)}),n},R=(e,t)=>{let r=T(e,t),n=P(r);return{colors:r,gradient:n}},M=(e,t,r)=>{t.forEach(e=>{e&&(e.style.opacity="0")}),e.forEach((e,n)=>{let i=t[n];if(!i||!r)return;let a=function(e,t){let r=e.offsetWidth,n=A()(t),i=n.toHsl().h*(Math.PI/180),a=n.toHsl().l,o=-(a*r)+r;return{x:r/2-o*Math.cos(i),y:r/2-o*Math.sin(i)}}(r,e);i.style.transform="translate(calc(".concat(a.x,"px - 50%),calc(").concat(a.y,"px - 50%))"),i.style.backgroundColor=e.toHexString(),i.style.opacity="1"})},O=(0,C.forwardRef)(function(e,t){let{isPrimary:r=!1,noTransition:i=!1}=e;return(0,n.jsx)(a.xu,{ref:t,borderRadius:"full",boxSize:r?7:5,pos:"absolute",zIndex:r?2:1,shadow:"base",border:"2px solid white",pointerEvents:"none",transitionProperty:i?"none":"transform",transitionDuration:"normal"})}),N=(0,C.memo)(e=>{let{updateColor:t,colors:r}=e,i=(0,C.useRef)(null),o=(0,C.useRef)(null),s=(0,C.useRef)(null),c=(0,C.useRef)(null),d=(0,C.useRef)(null),u=(0,C.useRef)(null),p=(0,C.useMemo)(()=>[o,s,c,d,u],[]);(0,C.useEffect)(()=>{let e=p.map(e=>e.current);M(r,e,i.current)},[r,p]);let h=(0,C.useCallback)(e=>{if(!i.current)return;let r=i.current.getBoundingClientRect();(e.clientX||e.clientY)&&t(function(e,t,r){let n=e.current.offsetWidth,i=e.current.offsetHeight,a=n/2,o=i/2,l=function(e,t,r,n,i){let a=r-e,o=n-t;return I()(Math.sqrt(o*o+a*a),0,i)}(t,r,a,o,n/2),s=Math.atan2(o-r,a-t),c=s*(180/Math.PI),d=Math.abs(-l/n+1);return A().fromRatio({h:c+360*Math.ceil(-c/360)+1,s:1,l:d})}(i,e.clientX-r.left,e.clientY-r.top))},[t]),g=(0,C.useCallback)(()=>{document.removeEventListener("mousemove",h)},[h]),m=(0,C.useCallback)(e=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",g,{once:!0}),h(e)},[h,g]);return(0,n.jsxs)(a.xu,{onMouseDown:m,p:4,m:-4,position:"relative",children:[(0,n.jsx)(O,{ref:o,noTransition:!0,isPrimary:!0}),(0,n.jsx)(O,{ref:s}),(0,n.jsx)(O,{ref:c}),(0,n.jsx)(O,{ref:d}),(0,n.jsx)(O,{ref:u}),(0,n.jsx)(_.o,{ratio:1,children:(0,n.jsxs)(l.k,{ref:i,position:"relative",borderRadius:"full",shadow:"lg",children:[(0,n.jsx)(l.k,{pos:"absolute",borderRadius:"full",bg:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)",inset:0,zIndex:1}),(0,n.jsx)(l.k,{pos:"absolute",inset:0,bg:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",transform:"rotateZ(270deg)",borderRadius:"full"})]})})]})}),H={vibe:"mono",primaryColor:"#75d8ff",css:{}},D=e=>{let{value:t,updateValue:r,isDark:y}=e,{vibe:k,primaryColor:_}={...H,...t},[E,I]=(0,C.useState)(A()(_)),{colors:P,gradient:T}=(0,C.useMemo)(()=>R(k,E),[k,E]),M=(0,C.useCallback)(e=>{let{gradient:t}=R(k,e);r({vibe:k,primaryColor:e.toHexString(),css:t})},[k,r]),O=(0,S.Z_)(M,100),D=(0,C.useCallback)(e=>{I(e),O(e)},[O]);return(0,n.jsxs)(i.U,{spacing:4,alignItems:"stretch",wrap:"wrap",children:[(0,n.jsx)(a.xu,{flex:"1",minW:"120px",children:(0,n.jsx)(N,{vibe:U[k],color:E,updateColor:D,colors:P})}),(0,n.jsxs)(o.K,{flex:"2",spacing:4,minW:"180px",children:[(0,n.jsx)(l.k,{backgroundColor:y?"black":"white",...T,opacity:1,flex:"1",borderRadius:"md",shadow:"md",minH:"80px",mt:2}),(0,n.jsxs)(i.U,{children:[(0,n.jsxs)(s.v,{children:[(0,n.jsx)(c.j,{w:"100%",as:d.z,size:"sm",variant:"plain",textAlign:"left",rightIcon:(0,n.jsx)(x.G,{icon:f.ptq}),children:U[k].name}),(0,n.jsx)(u.q,{minWidth:"240px",zIndex:"dropdown",children:(0,n.jsx)(p._,{onChange:e=>{let{gradient:t}=R(e,E);r({vibe:e,primaryColor:E.toHexString(),css:t})},value:k,title:j.ag._({id:"1CalO6"}),type:"radio",children:Object.entries(U).map(e=>{let[t,{name:r}]=e;return(0,n.jsx)(h.i,{value:t,children:r},t)})})})]}),(0,n.jsx)(g.h,{size:"sm",variant:"plain",children:(0,n.jsx)(v.kH,{placement:"top",label:(0,n.jsx)(b.cC,{id:"OVjfHO"}),children:(0,n.jsx)(m.h,{icon:(0,n.jsx)(x.G,{icon:f.RJo}),"aria-label":j.ag._({id:"OVjfHO"}),onClick:()=>{D(A().fromRatio({h:w()(0,360),s:1,l:w()(.5,.8)}))}})})})]})]})]})}},25585:function(e,t,r){r.d(t,{O:function(){return a},n:function(){return o}});var n=r(2784),i=r(50521);let a=(0,n.createContext)({});function o(){let e=(0,n.useContext)(a),t=(0,n.useContext)(i.m);return{...e,...t}}},29318:function(e,t,r){r.d(t,{Ds:function(){return O},EW:function(){return R},LW:function(){return I},TY:function(){return S},Xm:function(){return M},Yy:function(){return E},c2:function(){return U},eo:function(){return P},vi:function(){return _}});var n=r(52322),i=r(29705),a=r(70065),o=r(28535),l=r(11082),s=r(56920),c=r(5879),d=r(87254),u=r(2784),p=r(14274),h=r(93202),g=r(42111),m=r(34881),f=r(91994),x=r(31181),v=r(50260),b=r(14324),j=r(69747),y=r(47968),w=r(21733),C=r(78462),k=r(47749),A=r(66479);let S=e=>{let{data:t}=(0,h.HW1)(),{data:r}=(0,h.LkU)({variables:{workspaceId:e,sortBy:{field:h.eTF.Name,direction:h.SrV.Asc}},skip:!e}),[n,i,a,o]=(0,u.useMemo)(()=>{let e=(null==t?void 0:t.fonts)||[],n=(null==r?void 0:r.fonts)||[],i=[...e,...n],a=i.reduce((e,t)=>(e[t.id]=t,e),{}),o=i.map(e=>({id:e.id,name:e.name,url:e.cssUrl}));return[e,n,a,o]},[null==t?void 0:t.fonts,null==r?void 0:r.fonts]);return{globalFonts:n,workspaceFonts:i,fontsMap:a,allThemeFonts:o}},_=e=>{let{docId:t,editor:r}=e,[n]=(0,h.UoQ)(),i=(0,u.useCallback)(async e=>{if(t)return n({variables:{id:t,themeId:e}}).then(e=>{let{data:t}=e;if(r){var n,i;r.commands.updateThemeAccentImages(null==t?void 0:null===(i=t.updateDoc)||void 0===i?void 0:null===(n=i.theme)||void 0===n?void 0:n.config.accentBackgrounds)}})},[t,r,n]);return{updateDocThemeWithAccentImages:i}},E=()=>{let e=(0,f.CG)(y.Pu),t=(0,f.CG)(x.o0);return t?(0,v.wj)(t):!!e&&(0,v.wj)(e)},I=(e,t,r)=>{let n=(0,f.CG)(y.Pu),{globalThemes:i}=(0,b.a)(),a=(0,u.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?n?r({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:e}}):r({type:"SET_THEME_EDITING",data:{theme:e}}):r({type:"NEW_BLANK_THEME"}),t()},[r,t]),o=(0,u.useCallback)(()=>{let e=(0,A.QB)(i);a(e,!0)},[i,a]);return(0,u.useEffect)(()=>{let e=j.pw.on(j.TI.OPEN_THEME_EDITOR,()=>{if(null===n.workspaceId){let e=(0,A.mg)(n,!0);a(e)}else a(n)});return()=>{e()}},[n,a]),(0,u.useEffect)(()=>{let t=(0,C.SJ)();e&&"true"===t.openThemeEditor&&(a(),(0,m.lO)({query:{...(0,C.SJ)(),openThemeEditor:void 0},emitChange:!1}))},[e,a]),{openThemeEditor:a,openThemeEditorWithDefaultTheme:o}},U=e=>{let{data:t}=(0,h.rxn)({variables:{id:e},fetchPolicy:"cache-first"});return(null==t?void 0:t.theme)||k.mU},P=e=>{let{theme:t}=e,r=(0,a.p)(),[n]=(0,h.UuR)(),i=t.name.replace(k.Qk,""),o=(0,u.useCallback)(()=>{t&&t.id&&(r.close("archive-theme-toast"),n({variables:{id:t.id},update:(e,r)=>{let{data:n}=r;(null==n?void 0:n.unarchiveTheme)&&e.writeQuery({query:h.$LR,variables:{workspaceId:t.workspaceId,archived:!1},data:{themes:[n.unarchiveTheme]}})},optimisticResponse:{unarchiveTheme:{__typename:"Theme",...t,archived:!1,updatedTime:new Date().toISOString()}},refetchQueries:["GetThemes"]}).then(()=>{r({id:"unarchive-theme-toast",title:d.ag._({id:"QFw1At",values:{displayName:i}}),status:"success",duration:3e3,position:"top",isClosable:!0})}).catch(e=>{console.error("Couldn't restore theme ".concat(i," error: ").concat(e))}))},[n,t,r,i]);return o},T=e=>{let{showLinkToDashboard:t,unarchiveTheme:r}=e;return t?(0,n.jsx)(o.xu,{children:(0,n.jsx)(c.cC,{id:"1jSYVL",components:{0:(0,n.jsx)(l.r,{textDecoration:"underline",isExternal:!0,href:v.oH}),1:(0,n.jsx)(i.h,{mx:"2px"}),2:(0,n.jsx)(l.r,{textDecoration:"underline",as:l.r,variant:"link",onClick:r})}})}):(0,n.jsx)(o.xu,{children:(0,n.jsx)(c.cC,{id:"HFliJ0",components:{0:(0,n.jsx)(l.r,{textDecoration:"underline",as:l.r,variant:"link",onClick:r})}})})},R=e=>{let{theme:t,showLinkToDashboard:r=!1}=e,i=(0,a.p)(),[o]=(0,h.I3Y)(),l=P({theme:t}),s=t.name.replace(k.Qk,""),c=(0,u.useCallback)(()=>{t&&t.id&&o({variables:{id:t.id},update:(e,r)=>{let{data:n}=r;(null==n?void 0:n.archiveTheme)&&e.writeQuery({query:h.$LR,variables:{workspaceId:t.workspaceId,archived:!1},data:{themes:[n.archiveTheme]}})},optimisticResponse:{archiveTheme:{__typename:"Theme",...t,archived:!0,updatedTime:new Date().toISOString()}},refetchQueries:["GetThemes"]}).then(()=>{i({id:"archive-theme-toast",title:d.ag._({id:"hY8SRr",values:{0:t.name}}),description:(0,n.jsx)(T,{showLinkToDashboard:r,unarchiveTheme:l}),status:"success",duration:3e3,position:"top",isClosable:!0})}).catch(e=>{console.error("Couldn't archive theme ".concat(s," error: ").concat(e))})},[t,o,i,r,l,s]);return c},M=e=>{let{isGammaOrgUser:t}=(0,w.SE)(),r=null!==e.workspaceId&&t&&"production"!==p.v.APPLICATION_ENVIRONMENT&&!e.archived,[n]=(0,h.l7b)(),i=(0,u.useCallback)(()=>{if(!r)return;let t=(0,s.IR)(e.name),i=prompt("Enter new theme ID",t);i&&n({variables:{id:e.id,newId:i},refetchQueries:["GetThemes"]})},[e,n,r]);return{canMakeStandard:r,convertToStandard:i}},O=(e,t)=>{let{isGammaOrgUser:r}=(0,w.SE)(),n=(0,g.ye)("uploadThemeImagesToProd");return r&&n&&"themeBackground"===t?{orgId:"theme_images/standard",templateId:p.v.TRANSLOADIT_THEME_IMAGE_TEMPLATE_ID,useStandardThemeBucket:!0}:{orgId:e,templateId:void 0,useStandardThemeBucket:!1}}},14324:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(2784),i=r(93202),a=r(91994),o=r(67613),l=r(36651);let s=()=>{let e=(0,l.n_)(),t=(0,a.TL)(),{data:r,loading:s}=(0,i.BCl)({variables:{workspaceId:e,archived:!1},skip:!e,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),{data:c,loading:d}=(0,i.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),u=(0,n.useMemo)(()=>(null==c?void 0:c.themes)||[],[null==c?void 0:c.themes]),p=(0,n.useMemo)(()=>(null==r?void 0:r.themes)||[],[null==r?void 0:r.themes]);return(0,n.useEffect)(()=>{u.length>0&&t((0,o.cn)({globalThemes:u}))},[t,u]),(0,n.useEffect)(()=>{p.length>0&&t((0,o.PA)({workspaceThemes:p}))},[t,p]),{isLoadingThemes:s||d,globalThemes:u}}},29560:function(e,t,r){r.d(t,{B:function(){return l},T:function(){return o}});var n=r(2784),i=r(91994),a=r(47968);let o=()=>{let e=(0,i.bh)();if(!e){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(e));return}e.dispatch((0,a.AK)({isEditingMedia:!0}))},l=()=>{let e=(0,i.qr)();return(0,n.useCallback)(t=>{e.dispatch((0,a.AK)({isEditingMedia:t}))},[e])}},69747:function(e,t,r){r.d(t,{TI:function(){return i},pw:function(){return l}});var n,i,a=r(76919);(n=i||(i={})).CREATE_COMMENT_FROM_SELECTION="createCommentFromSelection",n.OPEN_POPUP_COMMENT="openPopupComment",n.POPUP_COMMENT_TOGGLED="popupCommentToggled",n.OPEN_THEME_DRAWER="openThemeDrawer",n.OPEN_THEME_EDITOR="openThemeEditor",n.OPEN_PAGE_SETUP="openPageSetup";class o extends a.v{}let l=new o},57574:function(e,t,r){r.d(t,{Y:function(){return i},o:function(){return n}});let n="+++",i="/continue"},52332:function(e,t,r){r.d(t,{Ay:function(){return x},E0:function(){return h},HD:function(){return g},I7:function(){return f},K9:function(){return p},Nn:function(){return m}});var n=r(72338),i=r(1842),a=r.n(i),o=r(27191),l=r(91994),s=r(47968),c=r(90604),d=r(91073),u=r(93814);let p=n.hj.create({name:"cardCollapse",addKeyboardShortcuts:()=>({Escape:e=>{let{editor:t}=e,r=(0,l.bh)(),i=(0,s.gh)(r.getState());if(i!==c.q.DOC_VIEW)return!1;let{selection:a}=t.state;if(!a.empty)return!1;let o=(0,n.Kk)(d.KH)(a);return!!o&&o.depth>u.k_&&!g(o.node)&&(m(o.node.attrs.id,!0),!0)}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("cardCollapse"),appendTransaction:(e,t,r)=>{if(r.selection.eq(t.selection)||!r.selection.empty)return;let i=(0,n.Kk)(d.KH)(r.selection);if(!i)return;let{node:a,pos:l}=i,s=g(a);if(s)try{let{tr:e}=r,t=o.qv.create(e.doc,l);if(!t)return;return e.setSelection(t)}catch(e){console.error("Error moving selection out of collapsed card",{node:a,pos:l},e)}}})]}),h=(e,t)=>{let r=[],n=[];e.descendants((e,t,i)=>{if(!(0,d.KH)(e))return;let{id:a}=e.attrs,o=i&&"document"===i.type.name;o?r.push(a):n.push(a)}),t((0,s.rH)({cardIds:r,isCollapsed:!1})),t((0,s.rH)({cardIds:n,isCollapsed:!0}))},g=e=>{let t="string"==typeof e?e:e.attrs.id;if(!t)return;let r=(0,l.bh)().getState();return(0,s.yH)(t)(r)},m=(e,t)=>{if(a()(e)){console.error("[setCardCollapsed] Input is unexpectedly not string | string[]: ",e);return}let r=Array.isArray(e)?e:[e],n=(0,l.bh)();(1!==r.length||(0,s.yH)(r[0])(n.getState())!==t)&&n.dispatch((0,s.rH)({cardIds:r,isCollapsed:t}))},f=e=>{let t=[];e.state.doc.descendants(e=>{if(!(0,d.KH)(e))return;let{id:r}=e.attrs;t.push(r)}),m(t,!1)},x=e=>{let t=(0,l.bh)(),r=t.getState();void 0===r.TipTap.memoState.expandedCards[e]&&t.dispatch((0,s.rH)({cardIds:[e],isCollapsed:!1}))}},15468:function(e,t,r){r.d(t,{$U:function(){return u},Ap:function(){return w},BA:function(){return v},Fi:function(){return j},Hh:function(){return s},Ux:function(){return x},eZ:function(){return c},gF:function(){return p},jS:function(){return d},pt:function(){return b},q9:function(){return y},wz:function(){return h}});var n=r(13793),i=r(11093),a=r(96255),o=r(48751);let l=e=>["left","right"].includes(e),s=e=>{let{layout:t,parentCards:r,isMobileDevice:n}=e;return n&&l(t)?"mobileStacked":l(t)&&c(r)?"blank":t},c=e=>e.some(e=>l(e.attrs.layout)),d=e=>{let t=u(e),r={};return Object.entries(t.items).forEach(e=>{var t;let[n,i]=e,a=null!==(t=null==i?void 0:i.style)&&void 0!==t?t:{gridArea:n};r['> [data-layout-item-id="'.concat(n,'"]')]=a}),r},u=e=>o.q[null!=e?e:"blank"]||o.q.blank,p=e=>{let t={},r=e.pos,n=e.nodeAfter;return n?n.descendants((e,n)=>{if(!(0,a.pv)(e))return!1;t[e.attrs.itemId]={node:e,pos:r+1+n}}):console.error("[getCardLayoutItems] could not find card node at pos ".concat(r)),t},h=(e,t)=>p(e.doc.resolve(t)),g=(e,t,r)=>{let n=e.doc.resolve(t.pos+1),i=n.blockRange(e.doc.resolve(n.end()));i&&e.wrap(i,[{type:r.nodes.cardLayoutItem}]).setMeta("annotationEvent",{type:"wrap-nodes",start:i.start,end:i.end,level:1})},m=(e,t,r,n)=>{let i=r.nodes.cardLayoutItem.createAndFill({itemId:"body",...n});e.insert(t+1,i)},f=(e,t,r,i)=>{let a=r.nodes.cardAccentLayoutItem.createAndFill({itemId:"accent",background:{type:n.E.NONE},...i});e.insert(t+1,a)},x=(e,t,r,n)=>{let i=e.doc.nodeAt(t),a=h(e,t);if(0===Object.keys(a).length){g(e,{node:i,pos:t},r),n.items.accent&&f(e,t,r);return}n.items.body&&!a.body&&m(e,t,r),n.items.accent&&!a.accent?f(e,t,r):a.accent&&"cardLayoutItem"===a.accent.node.type.name&&v(e,a.accent.pos,a.accent.node,r)},v=(e,t,r,n)=>{e.replaceRangeWith(t,t+r.nodeSize,n.nodes.cardAccentLayoutItem.createAndFill({...r.attrs}))},b=e=>"cardAccentLayoutItem"===e.type.name&&"accent"===e.attrs.itemId,j=e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId,y=(e,t)=>{if(!t)return 0;let r=t.findIndex(t=>t.accentId===e.accentId);return -1===r||void 0===r?0:(r+1)%t.length},w=e=>{let t=(0,i.sS)(e,b)[0];if(!t)return;let r=t.node.attrs;return r.background}},74684:function(e,t,r){r.d(t,{AQ:function(){return f},J9:function(){return m},NE:function(){return w},YS:function(){return b},jz:function(){return j},pE:function(){return x}});var n=r(72338),i=r(27191),a=r(91994),o=r(24781),l=r(35759),s=r(47968),c=r(11093),d=r(60742),u=r(90604),p=r(52332),h=r(93814),g=r(96255);let m=(e,t,r)=>{let i=e=>{let t=(0,g.KH)(e),n="boolean"!=typeof r||(0,p.HD)(e)===r;return t&&n},a=e.state.doc.nodeAt(t),o=e.state.doc.resolve(t);return a&&i(a)?{node:a,pos:t,start:o.start,depth:o.depth}:(0,n.qv)(e.state.doc.resolve(t),i)},f=(e,t)=>{try{let r=(e,t)=>(0,g.KH)(e)&&t===h.k_,n=e.resolve(t),i=e.nodeAt(t);if(i&&r(i,n.depth+1))return{node:i,pos:t};return(0,c.Ci)(n,r)}catch(e){console.error("[findTopCardNodeParent] error",e);return}},x=e=>{let{pos:t,editor:r}=e,n=(0,c.nv)(r.state.doc.resolve(t),g.KH),i=n.map(e=>e.node.attrs.id);(0,p.Nn)(i,!1)},v=async e=>{let{cardId:t,pos:r,editor:n,cardEl:a,isNested:s=!1,origin:c="editor"}=e;if(!a){console.error("[scrollToCard] no cardEl specified");return}(0,p.Nn)(t,!1),x({pos:r,editor:n}),await (0,o.cC)("editor").scrollElementIntoView({element:a,delay:s?h.nY:0}),n.commands.command(e=>{let{tr:t}=e;return t.setSelection(i.Y1.near(n.state.doc.resolve(r))).setMeta(l.C,c),!0})},b=e=>{let{cardId:t,editor:r}=e;if(!t)return;let n=(0,a.bh)(),i=(0,s.gh)(n.getState());if(i===u.q.SLIDE_VIEW){r.commands.spotlightCardById(t);return}let o=document.querySelector('[data-card-id="'.concat(t,'"]'));if(!o)return;let{pos:l}=(0,g.Bw)(r,t)||{};if(!l)return;let c=r.state.doc.resolve(l),d=c.depth>h.k_;v({cardId:t,pos:l,editor:r,cardEl:o,isNested:d})},j=(e,t,r)=>{let n;let i=t.target;if(i.closest(".".concat(h.ar))&&!i.closest("[data-outside-card-body]")||r&&!y(r,e.state.schema))return null;let a=i.closest(".".concat(h.vD));if(!a)return{pos:e.state.doc.content.size-1};let o=a.querySelector(".".concat(h.ar)),l=null==o?void 0:o.getBoundingClientRect();if(!l)return null;let{doc:s}=e.state;try{let t=e.posAtDOM(a,0);if(-1===t)return null;let r=(0,c.nv)(s.resolve(t),g.KH);if(0===r.length)return null;n=r[r.length-1]}catch(e){return console.error("(caught) [checkBetweenCardsDropTarget] error finding parent node:",e),null}let{node:u,pos:p}=n;if(!p||!u)return null;let[m]=(0,d.qs)(o),f=m+l.top,x=m+l.bottom,v=m+t.clientY;return v<f?{pos:p}:v>x?{pos:p+u.nodeSize}:null},y=(e,t)=>t.nodes.card.validContent(e.content),w=(e,t)=>{let r=(0,c.sS)(e,e=>"cardLayoutItem"===e.type.name);return r.length>0?{node:r[0].node,pos:t+r[0].pos+1}:{node:e,pos:t}}},56253:function(e,t,r){r.d(t,{Bk:function(){return s},DB:function(){return c},HQ:function(){return u},Rs:function(){return d},r1:function(){return l}});var n=r(6238),i=r.n(n),a=r(90439),o=r(93814);let l=95,s=120,c=.5*l,d=function(e,t,r){var n;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null!==(n=e.config.fontSize)&&void 0!==n?n:1,c=(r?s:l)*(.5/a),d=i*o.GG,u=t?1.5:3.75;return{baseFontSize:a*(t?1:1.125),contentWidthEms:c,themeFontSize:a,innerPaddingX:u,cardWidthEms:c+2*u+2*d,commentPadding:u+d}},u=i()(e=>{let{isPresentMode:t,isNested:r,nestedDepth:n,isFullBleed:i,displayFullBleed:a,isWideContent:o,isThumbnail:l,theme:s,cardDimensions:c,showPresentBackdrop:u,attrs:f,userZoomLevel:x,isMobileDevice:v}=e,b="none"!==f.background.type&&!r,j=a||r?"0em":v?"".concat(.5,"em"):"".concat(2,"em"),y="calc(var(--card-outer-padding-x) + ".concat(i||r?"0px":"var(--doc-padding-left, 0px)"," + ").concat(t?"var(--present-padding-left, 0px)":"0px",")"),w="calc(var(--card-outer-padding-x) + ".concat(i||r?"0px":"var(--doc-padding-right, 0px)"," + ").concat(t?"var(--present-padding-right, 0px)":"0px",")"),C=a||r?"0em":v?"".concat(.5,"em"):!b||t||l?"".concat(2,"em"):"8em",{baseFontSize:k,contentWidthEms:A,cardWidthEms:S,innerPaddingX:_,commentPadding:E}=d(s,v,o,n),I=t||l?c.aspectRatio?m:g:v?h:p,U=I({userZoomLevel:x,baseFontSize:k,contentWidthEms:A,cardWidthEms:S,cardAspectRatio:c.aspectRatio,showPresentBackdrop:u,isNested:r,isFullBleed:i,isThumbnail:l});return{"--card-inner-padding-x":"".concat(_,"em"),"--card-inner-padding":"var(--card-inner-padding-y) var(--card-inner-padding-x)","--card-outer-padding-left":y,"--card-outer-padding-right":w,"--card-outer-padding-x":j,"--card-outer-padding-y":C,"--comment-padding":"".concat(E,"em"),"--nested-card-margin":"calc(-1 * var(--comment-padding))","--card-vertical-align":c.defaultVerticalAlign,"--top-accent-height":"12.5em","--behind-accent-height":"12em",...U}}),p=e=>{let{baseFontSize:t,contentWidthEms:r,cardWidthEms:n,cardAspectRatio:i,isFullBleed:a}=e;return{"--font-size":"calc(".concat(t," * var(--editor-font-size, 1rem))"),"--card-inner-padding-y":"".concat(2.75+(a?2:0),"em"),"--card-width":"".concat(n,"em"),"--card-min-height":i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(i,")"):void 0,"--max-content-width":"".concat(r,"em")}},h=e=>{let{cardWidthEms:t,baseFontSize:r,isNested:n,cardAspectRatio:i,isFullBleed:a}=e;return{"--card-inner-padding-y":"".concat(n?2.25:1.5+(a?1:0),"em"),"--font-size":"".concat(r,"rem"),"--card-width":"".concat(t,"em"),"--card-min-height":i?"calc(min(var(--card-width), var(--editor-width)) / ".concat(i,")"):void 0,"--top-accent-height":"6em","--behind-accent-height":"12em"}},g=e=>{let{userZoomLevel:t,contentWidthEms:r,cardWidthEms:n,showPresentBackdrop:i,isFullBleed:o,baseFontSize:l,isNested:s,isThumbnail:c}=e,d=a.Pv?"".concat(l*t,"rem"):"calc(".concat(t," * clamp(").concat(c?"0rem":"1rem",", var(--card-max-width) / ").concat(n,", 2.7vh))"),u=!i||o;return{"--card-inner-padding-y":"".concat(2.75,"em"),"--font-size":d,"--card-width":u?"var(--editor-width)":"".concat(n,"em"),"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-min-height":c?"var(--thumbnail-min-height, 0px)":u&&!s?"100vh":"0vh","--max-content-width":"".concat(r,"em")}},m=e=>{let{cardAspectRatio:t,userZoomLevel:r,cardWidthEms:n,isThumbnail:i}=e,o=a.Pv?"calc(var(--card-max-width) / ".concat(t,")"):"calc(100vh - 2 * var(--card-outer-padding-y))",l="calc(".concat(r," * min(var(--card-max-width), calc(var(--card-max-height) * ").concat(t,")))"),s="calc(var(--card-width) / ".concat(t,")"),c=a.Pv||i?"0px":"15px",d="calc((var(--card-width) - ".concat(c,") / ").concat(n,")");return{"--card-inner-padding-y":"".concat(2.75,"em"),"--card-width":l,"--font-size":d,"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-max-height":o,"--card-min-height":s}}},65396:function(e,t,r){r.d(t,{F:function(){return n}});let n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[].slice.call(e.querySelectorAll(t),0);return r&&n.reverse(),n}},65282:function(e,t,r){r.d(t,{e:function(){return a},v:function(){return i}});var n=r(44368);let i=e=>{var t;if(null==e?void 0:null===(t=e.parentElement)||void 0===t?void 0:t.matches("ol, ul"))return e.parentElement;let r=[e],a=e;for(;(a=a.nextElementSibling)&&"LI"===a.tagName;){let t=parseInt(a.getAttribute("indent")||"0")-parseInt(e.getAttribute("indent")||"0");if(t<0)break;if(0==t){if(a.getAttribute("variant")!=e.getAttribute("variant"))break;r.push(a)}else a=i(a),r.push(a)}let o=e.getAttribute("variant")==n.W.Numbered?document.createElement("ol"):document.createElement("ul");return e.replaceWith(o),r.forEach(e=>{e.removeAttribute("variant"),e.removeAttribute("indent")}),o.append(...r),o},a=e=>{var t,r;let i;let a=e,o=0,l="false";for(e.innerHTML.startsWith("[ ]")?(i=n.W.Todo,l="false",e.innerHTML.startsWith("[ ]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)):e.innerHTML.startsWith("[x]")&&(i=n.W.Todo,l="true",e.innerHTML.startsWith("[x]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)),"checkbox"===e.getAttribute("role")&&(i=n.W.Todo,l=e.getAttribute("aria-checked")||"false"),("todo"===e.getAttribute("variant")||e.getAttribute("checked"))&&(i=n.W.Todo,l=e.getAttribute("checked")||"false");a=null===(t=e.parentElement)||void 0===t?void 0:t.closest("li, ul, ol");){if(a.matches("ul, ol")){o++;let e=a.className.match(/lst-kix_\w+-(\d+)/);e&&(o=parseInt(e[1])+1),i||"OL"!=a.tagName?i||"UL"!=a.tagName||(i=n.W.Bullet):i=n.W.Numbered}a.after(e)}e.setAttribute("indent",Math.max(o-1,0).toString()),e.setAttribute("variant",i||n.W.Bullet),i==n.W.Todo&&e.setAttribute("checked",l),1===e.children.length&&(null===(r=e.firstElementChild)||void 0===r?void 0:r.tagName)==="P"&&(e.innerHTML=e.firstElementChild.innerHTML)}},396:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(65396),i=r(65282);let a=e=>((0,n.F)(e,"li").forEach(e=>{(0,i.v)(e)}),e)},20182:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(26151),i=r(11093),a=r(26282),o=r(15468),l=r(96255);let s=(e,t)=>!!c(e),c=e=>{let t=e.parent&&(0,l.KH)(e.parent);if(!t)return!0;let r=(0,i.nv)(e,l.KH)[0];if(!r)return!0;let n=e.doc.resolve(r.pos),a=(0,o.gF)(n);return 0===Object.keys(a).length},d=(e,t,r)=>{var o;let l=e.posAtCoords({left:t.clientX,top:t.clientY});if(!l||l.inside<0)return null;let c=e.state.doc.resolve(l.pos);if(!c)return null;let d=l.pos,u=e.state.doc.resolve(l.inside),p=e.state.doc.nodeAt(l.inside),h=e.state.doc.nodeAt(l.pos);if((null==p?void 0:p.type.name)==="smartLayout"&&(null==h?void 0:h.type.name)==="smartLayoutCell")return null;let g=(0,i.Ru)(u,a.E)[0];if(g&&(d=l.inside,g.pos===d)||!d||r&&null==(d=(0,n.nj)(e.state.doc,d,r)))return null;let m=s(e.state.doc.resolve(d),null===(o=e.dragging)||void 0===o?void 0:o.slice);return m?d:null}},26282:function(e,t,r){r.d(t,{E:function(){return n},G:function(){return i}});let n=e=>"smartLayoutCell"===e.type.name,i=e=>"smartLayout"===e.type.name},44368:function(e,t,r){var n,i;r.d(t,{W:function(){return n},y:function(){return a}}),(i=n||(n={})).Todo="todo",i.Bullet="bullet",i.Numbered="numbered";let a=e=>["todo","bullet","numbered"].includes(e.type.name)},2136:function(e,t,r){r.d(t,{G:function(){return p}});var n=r(73235),i=r(52322),a=r(28165),o=r(42822),l=r(81540),s=r(77533),c=r(42946),d=r(49929);function u(){let e=(0,n._)(["\n      from {transform: rotate(-5deg) scale(1)}\n        to {transform: rotate(5deg) scale(1.2)}\n  "]);return u=function(){return e},e}let p=e=>{let{provider:t,color:r="gray"}=e,n=(0,a.F4)(u()),p="aiGenerated"===t?c.ddb:c.Y$T;return(0,i.jsxs)(o.M,{children:[(0,i.jsx)(l.$,{color:"".concat(r,".300"),thickness:"3px",size:"xl",position:"absolute",speed:"0.7s",emptyColor:"transparent"}),(0,i.jsx)(s.x,{color:"".concat(r,".400"),position:"absolute",lineHeight:"2",fontSize:"lg",animation:"".concat(n," infinite alternate 700ms ease-out"),children:(0,i.jsx)(d.G,{icon:p,fixedWidth:!0})})]})}},31866:function(e,t,r){r.d(t,{A:function(){return i},b:function(){return a}});var n=r(2784);let i=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,i]=(0,n.useState)(0),[a,o]=(0,n.useState)(0),[l,s]=(0,n.useState)(null),c=(0,n.useCallback)(()=>{var r,n;let a=null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();if(a&&l){let e=l.width/l.height,t=a.width,r=a.width/e;if(0===t||isNaN(t)||0===r||isNaN(r))return;i(t),o(r),s(e)}},[]);return{width:r,height:a,aspectRatio:l,setSize:c,containerWrapperRef:e,imageRef:t}},a=e=>{let t=(0,n.useCallback)(t=>{if(!e)return;let r=null==e?void 0:e.view.domAtPos(t);if(!r){console.warn("scrollOnImageLoad could not domAtPos",{pos:t});return}let n=r.node.childNodes[r.offset];if(!n){console.warn("scrollOnImageLoad could not find node",{parentNode:r.node,offset:r.offset});return}let i=n.querySelector("[data-image-node-element] img");if(!i){console.warn("scrollOnImageLoad could not find <img> element");return}let a=()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run(),setTimeout(()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run()},1e3),i.removeEventListener("load",a)};i.addEventListener("load",a)},[e]);return t}},84286:function(e,t,r){r.d(t,{HI:function(){return h},W6:function(){return f},k3:function(){return m},s7:function(){return g}});var n=r(52322),i=r(16556),a=r(81540),o=r(38035),l=r(29117),s=r(42946),c=r(49929),d=r(5879);r(2784);var u=r(29560),p=r(2136);let h=()=>(0,n.jsx)(i.Vp,{size:"sm",variant:"subtle",colorScheme:"gray",pos:"absolute",top:4,left:4,p:1,children:(0,n.jsx)(a.$,{color:"gray.600",size:"xs"})}),g=()=>(0,n.jsx)(i.Vp,{size:"sm",variant:"subtle",colorScheme:"red",pos:"absolute",top:4,left:4,children:(0,n.jsxs)(i.Sn,{children:[(0,n.jsx)(c.G,{icon:s.RLE})," ",(0,n.jsx)(d.cC,{id:"rmh/nq"})]})}),m=e=>{let{children:t,icon:r=s.zxC,iconSize:i="2x",isLoading:a=!1,isUploading:d=!1,hasUploadError:m=!1,loadingProvider:f,...x}=e,v=(0,u.B)();return(0,n.jsxs)(o.k,{color:"gray.400",align:"center",justify:"center",p:4,bg:"gray.200",className:"placeholder","data-drag-handle":!0,"data-export-as-image":!0,position:"relative",cursor:"default",onDoubleClick:()=>v(!0),...x,children:[!a&&(0,n.jsx)(l.U,{spacing:4,pointerEvents:"none",children:(0,n.jsx)(c.G,{size:i,icon:r})}),a&&(0,n.jsx)(p.G,{provider:f}),d&&(0,n.jsx)(h,{}),m&&(0,n.jsx)(g,{}),t]})},f={minW:16,minH:16,bg:"gray.200"}},54653:function(e,t,r){r.d(t,{R:function(){return c}});var n=r(72338),i=r(16494),a=r(87205),o=r(66855),l=r(15636),s=r(59366);let c=n.hj.create({name:"mediaUpload",addCommands(){return{cancelImageUploadsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.editor.isEditable)return!1;let a=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.uploadStatus===i.D.Uploading)});return a.forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null,uploadStatus:i.D.Error});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},uploadDataUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.storage.orgId||!this.editor.isEditable)return!1;let i=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("data:")});return i.forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let n=(0,a.v9)(r.src),i=URL.createObjectURL(n),o=(0,s.j6)(e.node,(0,s.BF)(i));t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,i,n)}),!0},initializeUploadExtension:e=>t=>{let{chain:r}=t;return this.storage.orgId=e,r().cancelImageUploadsOnLoad().uploadDataUrlsOnLoad().revokeAllImageTempURLs().run(),!0},revokeAllImageTempURLs:()=>e=>{let{tr:t,state:r}=e,a=(0,n.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.tempUrl&&t.src&&t.uploadStatus===i.D.Done)});return a.forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},revokeImageTempURLs:e=>t=>{let{tr:r,state:i}=t,a=(0,n.N2)(i.doc,t=>{let r=(0,s.XU)(t);return!!r&&r.tempUrl===e});return a.forEach(e=>{let t=(0,s.j6)(e.node,{tempUrl:null});r.setNodeMarkup(e.pos,null,t).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),URL.revokeObjectURL(e),!0},updateImageOnUploadFailure:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{let{tr:n,state:a}=r,o=a.doc.nodeAt(e);if(!o||!o.attrs)return!1;let l=(0,s.XU)(o),c=t?{...l,uploadStatus:i.D.Done}:(0,s.gM)({isError:!0}),d=(0,s.j6)(o,c);return n.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}},updateImageOnUploadSuccess:(e,t)=>r=>{let{tr:n,state:i}=r,a=i.doc.nodeAt(e);if(!a||!a.attrs)return!1;let l=(0,s.gM)({isError:!1,result:t}),c=(0,o.UZ)(l),d=(0,s.j6)(a,c);return n.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}}},addStorage:()=>({orgId:void 0,completedUploads:{}}),addProseMirrorPlugins(){return[(0,l.SZ)(this.editor)]}})},97253:function(e,t,r){r.d(t,{B0:function(){return i.B0},Ns:function(){return i.Ns},QZ:function(){return i.QZ},R:function(){return n.R},XU:function(){return i.XU},f8:function(){return i.f8},gM:function(){return i.gM},j6:function(){return i.j6}});var n=r(54653),i=r(59366)},32581:function(e,t,r){r.d(t,{j:function(){return u},x:function(){return p}});var n=r(37164),i=r(99787),a=r(16494),o=r(13793),l=r(38322),s=r(81345),c=r(87205),d=r(59366);let u=(e,t,r,l)=>{var s;let u;let p={type:o.E.IMAGE,source:i.in.key,image:{uploadStatus:a.D.Uploading,source:i.in.key}};(0,c.Ns)(r.type)?(p.image.showPlaceholder=!0,u="HEIC_tempId_".concat((0,n.x0)())):u=URL.createObjectURL(r),p.image.tempUrl=u;let h=(t,r)=>{if(!u&&!r)return;let n=u||r;(0,d.Ns)(e,n,t)};t.setNodeAttribute(l,"background",p).setMeta("imageUploadUpdateAttrs",!0),(0,i.cT)(r,null===(s=e.storage.mediaUpload)||void 0===s?void 0:s.orgId,{onOriginalFileUpload:h,onUploadComplete:h,onUploadFailed:t=>{(0,d.f8)(e,u,t),URL.revokeObjectURL(u)}})},p=function(e,t,r){let n=t.map(t=>(0,c.fU)(t.type)?h(t,e):(0,s.kO)(t.type,(0,s.mD)(t))?g(t,e):null).filter(e=>null!==e);if(0==n.length)return;let i=n.map(e=>e.content),a=e.state.doc.resolve(r),o=0===a.parentOffset&&a.parent.inlineContent?r-1:r;e.chain().insertContentAt({from:o,to:r},i).command(e=>{var t;let{tr:n}=e,i=n.doc.resolve(n.mapping.map(r)),a=(0,l.t)(n.doc.resolve(i.pos-((null===(t=i.nodeBefore)||void 0===t?void 0:t.nodeSize)||1)));return a&&n.setSelection(a),!0}).run(),n.forEach(e=>{e.upload()}),setTimeout(()=>{e.commands.scrollIntoView()},200)},h=(e,t)=>{let r={uploadStatus:a.D.Uploading,source:i.in.key};(0,c.Ns)(e.type)?(r.showPlaceholder=!0,r.tempUrl="HEIC_tempId_".concat((0,n.x0)())):r.tempUrl=URL.createObjectURL(e);let o=(e,n)=>{let i=r.tempUrl;if(!i&&!n)return;let a=i||n;(0,d.Ns)(t,a,e)},l={onOriginalFileUpload:o,onUploadComplete:o,onUploadFailed:e=>{r.tempUrl&&((0,d.f8)(t,r.tempUrl,e),URL.revokeObjectURL(r.tempUrl))}};return{name:e.name,content:{type:"image",attrs:r},upload:()=>{var r;return(0,i.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,l)}}},g=(e,t)=>{let r=URL.createObjectURL(e),n={...(0,d.B0)(e),url:r},a=(e,n)=>{if(!r&&!n)return;let i=r||n;(0,d.QZ)(t,i,e)},o={onOriginalFileUpload:a,onUploadComplete:a};return{name:e.name,content:{type:"embed",attrs:n},upload:()=>{var r;return(0,i.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,o,"node","doc")}}}},15636:function(e,t,r){r.d(t,{SZ:function(){return h},RC:function(){return x},bC:function(){return g},Sm:function(){return u}});var n=r(27191),i=r(99787),a=r(81345),o=r(87205),l=r(20182),s=r(32581);let c=e=>RegExp("^\\s*<svg.*<\\/svg>\\s*$","s").test(e);var d=r(59366);let u=(e,t,r)=>{let n=(r,n)=>{(0,d.Ns)(e,n||t,r)},a={onOriginalFileUpload:n,onUploadComplete:n,onUploadFailed:r=>{(0,d.f8)(e,t,r)}};r?(0,i.cT)(r,e.storage.mediaUpload.orgId,a):(0,i.WY)(t,e.storage.mediaUpload.orgId,a)},p=e=>(0,o.fU)(e.type)||(0,a.kO)(e.type,(0,a.mD)(e)),h=e=>new n.Sy({props:{transformPasted:t=>(t.content.descendants(t=>{if("image"===t.type.name&&t.attrs.tempUrl){let r=e.storage.mediaUpload,n=r.completedUploads[t.attrs.tempUrl];n&&Object.assign(t.attrs,(0,d.j6)(t,(0,d.gM)({isError:!1,result:n})))}else if("image"===t.type.name&&t.attrs.src&&!(0,o.S6)(t.attrs.src)){let r,n=t.attrs.src,i=n.startsWith("data:");i&&(r=(0,o.v9)(t.attrs.src),n=URL.createObjectURL(r)),Object.assign(t.attrs,(0,d.BF)(n)),u(e,n,r)}}),t),handlePaste:(t,r,n)=>f(e,t,r,n),handleDOMEvents:{drop:(t,r)=>m(e,t,r)}}}),g=(e,t)=>{var r;if(!e.clipboardData)return null;let n=e.clipboardData.getData("text/html"),i=e.clipboardData.getData("text/plain");if(i&&!n&&c(i))return[(0,o.K$)(i)];let a=Array.prototype.slice.call(e.clipboardData.items);return a.some(e=>"text/html"===e.type)&&(t.content.childCount>1||(null===(r=t.content.firstChild)||void 0===r?void 0:r.type.name)!=="image")?null:a.map(e=>e.getAsFile()).filter(e=>!!e).filter(p)},m=(e,t,r)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let n=x(r).filter(p);if(0===n.length)return!1;let i=(0,l.Z)(t,r);return!!i&&(r.preventDefault(),(0,s.x)(e,n,i),!0)},f=(e,t,r,n)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let i=g(r,n);if(!i||0===i.length)return!1;let{selection:a}=t.state,o=a.from;return a.empty||e.commands.deleteSelection(),(0,s.x)(e,i,o),!0};function x(e){let t=[],r=e.target;if(e.dataTransfer){let r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else r&&r.files&&(t=r.files);return Array.prototype.slice.call(t)}},59366:function(e,t,r){r.d(t,{B0:function(){return w},BF:function(){return h},Ns:function(){return v},QZ:function(){return y},XU:function(){return m},f8:function(){return b},gM:function(){return p},j6:function(){return g}});var n=r(72338),i=r(72579),a=r.n(i),o=r(98537),l=r.n(o),s=r(16765),c=r.n(s),d=r(16494),u=r(81345);let p=e=>{let{result:t,isError:r}=e;return r?{uploadStatus:d.D.Error,showPlaceholder:!0,tempUrl:null,src:null}:{uploadStatus:d.D.Done,showPlaceholder:!1,...t}},h=e=>({tempUrl:e,uploadStatus:d.D.Uploading,src:null,source:"image.custom"}),g=(e,t)=>{let r=e.type.spec.imageKeyPath,n=r?c()({},r,t):t,i=l()({},e.attrs,n);return i},m=e=>{let t=e.type.spec.imageKeyPath;return t||"image"===e.type.name?t?a()(e.attrs,t,e.attrs):e.attrs:null},f=(e,t)=>(0,n.N2)(e.state.doc,e=>{let r=m(e);return[null==r?void 0:r.tempUrl,null==r?void 0:r.src].includes(t)}),x=(e,t)=>(0,n.N2)(e.state.doc,e=>"embed"===e.type.name&&e.attrs.url===t),v=(e,t,r)=>{e.parentEditor&&(e=e.parentEditor),t&&j(e,r,t);let n=f(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>{let{pos:n}=t;e.commands.updateImageOnUploadSuccess(n,r)}),setTimeout(()=>{e.commands.revokeImageTempURLs(t)},3e4)},b=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.parentEditor&&(e=e.parentEditor);let i=f(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>e.commands.updateImageOnUploadFailure(t.pos,n)),console.error(r)},j=(e,t,r)=>{let n=e.storage.mediaUpload;n.completedUploads[r]=t},y=(e,t,r)=>{let n=x(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>{e.commands.updateAttributesAtPos(t.pos,{url:r.src,sourceUrl:r.src,embed:{url:r.src},thumbnail:{src:r.thumbnail,uploadStatus:d.D.Done,showPlaceholder:!1}})})},w=e=>({meta:{title:e.name,description:(0,u.td)(e.size,1)},thumbnail:{uploadStatus:d.D.Uploading,showPlaceholder:!0},source:"embed.pdf"})},5626:function(e,t,r){r.d(t,{SV:function(){return a},gS:function(){return o},lt:function(){return i},m4:function(){return l}});var n=r(56253);let i=30,a=16,o=n.DB*a,l=.6},66855:function(e,t,r){r.d(t,{Bp:function(){return l},NW:function(){return c},UZ:function(){return p},fP:function(){return a},iJ:function(){return s},k7:function(){return d},vb:function(){return o},zd:function(){return u}});var n=r(5626);let i=["image","video","embed","mediaPlaceholder"],a=e=>o(e.type),o=e=>i.includes(e.name),l=e=>"video"===e.type.name||"embed"===e.type.name,s=e=>e.href||e.sourceUrl||e.url||e.embedUrl||void 0,c=e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.url)?e.embed.url:"embedUrl"in e?e.embedUrl:s(e)},d=e=>{var t,r;let n=e.attrs;return[null===(t=n.meta)||void 0===t?void 0:t.title,null===(r=n.meta)||void 0===r?void 0:r.site].filter(Boolean).join(" - ")},u=e=>{var t,r;return null!==(r=null==e?void 0:null===(t=e.split(".").pop())||void 0===t?void 0:t.startsWith("svg"))&&void 0!==r&&r},p=e=>{let{width:t,height:r,resize:i}=e.meta||{};if(!t||!r||(null==i?void 0:i.isAuto)===!1)return e;let a=n.gS,o=window.innerHeight*n.m4;return r/t*a>o?{...e,resize:{width:Math.min(a,o*(t/r)),clipType:null,clipPath:null,clipAspectRatio:null,isAuto:!0}}:e}},38322:function(e,t,r){r.d(t,{G:function(){return o},t:function(){return function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{doc:a}=t,o=r<0;if(!t.nodeAfter)return null;if(t.nodeAfter.inlineContent)return i.Y1.near(a.resolve(t.pos+(o?t.nodeAfter.content.size+1:0)),r);let l=(0,n.N2)(t.nodeAfter,e=>e.inlineContent||i.qv.isSelectable(e));if(!l||0===l.length)return i.qv.create(a,t.pos);let s=t.start(t.depth+1)+(o?l[l.length-1].pos:l[0].pos);return e(a.resolve(s),r)}}});var n=r(72338),i=r(27191),a=r(26151);let o=(e,t)=>{var r;let n;let i=e.doc,o=e.steps.length-1,l=e.steps[o];if(!l||!(l instanceof a.Pu||l instanceof a.FC)||0===l.slice.content.size)return null;let s=t||(null===(r=l.slice.content.child(l.slice.openStart))||void 0===r?void 0:r.type.name),c=e.mapping.maps[o];if(c.forEach((e,t,r)=>{null==n&&(n=r)}),null==n)return null;let d=i.nodeAt(n);if(d&&d.type.name===s)return i.resolve(n);if(!s)return console.warn("[getInsertedNodePos] Error selecting node, type not found in slice.lastChild",n),null;for(let t=l.from;t<e.mapping.map(l.to);t++){let r=e.doc.nodeAt(t);if(r&&r.type.name===s)return i.resolve(t)}return null}},16656:function(e,t,r){r.d(t,{rJ:function(){return ep},kC:function(){return ef}});var n=r(35483),i=r(52322),a=r(38035),o=r(79729),l=r(28165),s=r(2784),c=r(36651),d=r(29117),u=r(43679),p=r(34071),h=r(39429),g=r(75768),m=r(82655),f=r(87254);let x=s.createContext({});function v(){let e=s.useContext(x);return e}var b=r(28535),j=r(32899),y=r(17993),w=r(97166),C=r(20437),k=r(62614),A=r(5879),S={src:"/_next/static/media/transparent-background.ccc186e7.png"};let _={[n.HQ.White]:"#f0f1f3",[n.HQ.Gray]:"#788492",[n.HQ.Green]:"#36b24d",[n.HQ.Blue]:"#1c7ed6",[n.HQ.Violet]:"#7746f1",[n.HQ.Red]:"#ff2133",[n.HQ.Orange]:"#ff9433",[n.HQ.Yellow]:"#ffc936"},E=e=>e.appState.currentStyle,I=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,U=e=>e.settings.isDarkMode?"dark":"light",P=e=>{let{style:t,colorMode:r}=e;return(0,i.jsx)(b.xu,{backgroundColor:t.isFilled?n.tk.fills[r][t.color]:void 0,backgroundImage:t.isFilled?void 0:S.src,backgroundSize:"4em",borderColor:n.tk.strokes[r][t.color],borderWidth:"2px",h:"1em",w:"1em",borderRadius:"md"})},T=Object.keys(n.tk.defaultTextStyle),R=(e,t)=>{let{page:r}=e,n={};if(t.length<=0)return{};{let e=new Set([]);t.map(e=>r.shapes[e]).forEach(t=>{T.forEach(r=>{if(!e.has(r)){if(void 0===n[r])n[r]=t.style[r];else{if(n[r]===t.style[r])return;e.add(r)}}})}),e.forEach(e=>{delete n[e]})}return n},M=()=>{let e=v(),t=e.useStore(U),r=e.useStore(E),a=e.useStore(I),o=R(e,a),l={...r,...o};return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(j.h,{icon:(0,i.jsx)(P,{style:l,colorMode:t}),variant:"ghost",size:"sm","aria-label":""})}),(0,i.jsx)(h.y,{w:"fit-content",bg:"#F9FAFBFA",p:4,children:(0,i.jsxs)(y.g,{spacing:2,align:"flex-start",children:[(0,i.jsx)(w.l,{children:(0,i.jsx)(A.cC,{id:"TuM2Yu"})}),(0,i.jsx)(C.M,{columns:2,spacing:2,children:[!0,!1].map(r=>(0,i.jsx)(k.z,{leftIcon:(0,i.jsx)(P,{style:{...l,isFilled:r},colorMode:t}),variant:"ghost",size:"sm",isActive:l.isFilled===r,onClick:()=>e.style({isFilled:r}),children:r?(0,i.jsx)(A.cC,{id:"5bi1la"}):(0,i.jsx)(A.cC,{id:"dD7NPy"})},r?"fill":"outline"))}),(0,i.jsx)(w.l,{children:(0,i.jsx)(A.cC,{id:"1HfW/F"})}),(0,i.jsx)(C.M,{columns:4,spacing:2,w:"100%",children:Object.entries(n.HQ).map(r=>{let[n,a]=r;return _[a]?(0,i.jsx)(j.h,{icon:(0,i.jsx)(P,{style:{...l,color:a},colorMode:t}),variant:"ghost",size:"md","aria-label":n,isActive:l.color===a,onClick:()=>e.style({color:a})},a):null})})]})})]})};var O=r(68023),N=r(49929),H=r(94523);let D=(0,O.G)((e,t)=>{let{label:r,icon:n,tooltipPlacement:a="top",...o}=e;return(0,i.jsx)(H.kH,{placement:a,label:r,isDisabled:!r,children:(0,i.jsx)(j.h,{"aria-label":r||"",ref:t,size:"sm",variant:"",icon:(0,i.jsx)(N.G,{icon:n}),color:"trueblue.600",textShadow:"0px 1px 0px rgba(0,0,0,0)",fontWeight:"500",borderRadius:"md",borderWidth:"1px",backdropFilter:"blur(20px)",borderColor:"transparent",_hover:{bg:"gray.100",borderColor:"gray.200"},_focus:{bg:"gray.100",borderColor:"gray.200"},_active:{bg:"trueblue.100",borderColor:"trueblue.200"},...o})})}),z=e=>{let{children:t,...r}=e;return(0,i.jsx)(a.k,{bg:"#F9FAFBDD",p:1,borderWidth:"1px",borderColor:"whiteAlpha.600",borderRadius:"xl",shadow:"xl",...r,children:t})},L={[n.HE.Start]:m.elf,[n.HE.Middle]:m.MB3,[n.HE.End]:m.S3c},F=()=>{let e=v(),t=e.useStore(E),r=e.useStore(I),a=R(e,r),o={...t,...a};return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(D,{icon:L[o.textAlign||n.HE.Start]})}),(0,i.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsx)(z,{direction:"column",children:(0,i.jsxs)(g.h,{children:[(0,i.jsx)(D,{icon:m.elf,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.style({textAlign:n.HE.Start}),isActive:o.textAlign===n.HE.Start},"align-left"),(0,i.jsx)(D,{icon:m.MB3,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.style({textAlign:n.HE.Middle}),isActive:o.textAlign===n.HE.Middle},"align-center"),(0,i.jsx)(D,{icon:m.S3c,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.style({textAlign:n.HE.End}),isActive:o.textAlign===n.HE.End},"align-right"),(0,i.jsx)(D,{icon:m.z1q,label:f.ag._({id:"18P2qJ"}),onClick:()=>e.style({textAlign:n.HE.Justify}),isActive:o.textAlign===n.HE.Justify},"justify")]})})})]})},G=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children),W=e=>"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0,B=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,q=e=>{let t=e.appState.currentPageId,r=e.document.pages[t];for(let n of e.document.pageStates[t].selectedIds)if("text"in r.shapes[n])return!0;return!1},Q=s.memo(function(){let e=v(),{isGammaOrgUser:t}=(0,c.SE)(),r=e.useStore(W),o=e.useStore(G),l=e.useStore(B),s=e.useStore(q);return(0,i.jsx)(a.k,{w:"100%",direction:"row",position:"absolute",bottom:2,align:"flex-end",justify:"center",zIndex:1,children:(0,i.jsx)(z,{children:(0,i.jsxs)(d.U,{spacing:2,children:[t&&(0,i.jsx)(D,{icon:m.ISu,label:f.ag._({id:"SpTWH3"}),onClick:()=>e.exportImage(n.Uz.SVG,{scale:1,quality:1})},"download"),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{icon:m.XAH,label:f.ag._({id:"/Wgayn"}),onClick:()=>e.delete(),"data-testid":"drawing-edit-toolbar-delete"},"delete"),(0,i.jsx)(V,{}),l>=2&&(0,i.jsx)(Y,{}),l>=2||o?(0,i.jsx)(D,{icon:m.tU8,label:o?"Ungroup selection":"Group selection",onClick:()=>o?e.ungroup():e.group(),isActive:o},"group"):null]}),(0,i.jsx)(M,{}),s&&(0,i.jsx)(F,{})]})})})}),V=()=>{let e=v();return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(D,{icon:m.y3T})}),(0,i.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsxs)(z,{direction:"row",children:[(0,i.jsx)(D,{icon:m.XQV,label:f.ag._({id:"J6qWQV"}),onClick:()=>e.moveToFront()},"front"),(0,i.jsx)(D,{icon:m.y3T,label:f.ag._({id:"9xFjqz"}),onClick:()=>e.moveForward()},"forward"),(0,i.jsx)(D,{icon:m.QZW,label:f.ag._({id:"OfSb1W"}),onClick:()=>e.moveBackward()},"backward"),(0,i.jsx)(D,{icon:m.H5Z,label:f.ag._({id:"/zBSYY"}),onClick:()=>e.moveToBack()},"back")]})})]})},Y=()=>{let e=v();return(0,i.jsxs)(u.J,{trigger:"hover",children:[(0,i.jsx)(p.x,{children:(0,i.jsx)(D,{icon:m.I6v})}),(0,i.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,i.jsxs)(z,{direction:"column",children:[(0,i.jsxs)(g.h,{children:[(0,i.jsx)(D,{icon:m.I6v,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.align(n.MR.Left)},"align-left"),(0,i.jsx)(D,{icon:m.liD,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.align(n.MR.CenterHorizontal)},"align-center"),(0,i.jsx)(D,{icon:m.xfv,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.align(n.MR.Right)},"align-right"),(0,i.jsx)(D,{icon:m.ZC_,label:f.ag._({id:"8lqfXb"}),onClick:()=>e.distribute(n.XR.Horizontal)},"distribute-h")]}),(0,i.jsxs)(g.h,{children:[(0,i.jsx)(D,{icon:m.JhG,label:f.ag._({id:"/Q0jUh"}),onClick:()=>e.align(n.MR.Top)},"align-top"),(0,i.jsx)(D,{icon:m.UiH,label:f.ag._({id:"QhuQN2"}),onClick:()=>e.align(n.MR.CenterVertical)},"align-middle"),(0,i.jsx)(D,{icon:m.iXx,label:f.ag._({id:"EPnxoe"}),onClick:()=>e.align(n.MR.Bottom)},"align-bottom"),(0,i.jsx)(D,{icon:m.edW,label:f.ag._({id:"a1NrWf"}),onClick:()=>e.distribute(n.XR.Vertical)},"distribute-v")]})]})})]})};var X=r(74008),K=r(54933);let Z=()=>[{icon:K.qaO,label:f.ag._({id:"rG3WVm"}),tool:"select"},{icon:m.xf2,label:f.ag._({id:"Ajc4TJ"}),tool:"erase"},{icon:K.ZC5,label:f.ag._({id:"rjuFFw"}),tool:n.Uc.Line},{icon:K.nUK,label:f.ag._({id:"zFkhx3"}),tool:n.Uc.Arrow},{icon:K.lCX,label:f.ag._({id:"30KLDI"}),tool:n.Uc.Rectangle},{icon:K.diR,label:f.ag._({id:"7xMmki"}),tool:n.Uc.Ellipse},{icon:K.BwA,label:f.ag._({id:"ucHvJP"}),tool:n.Uc.Triangle},{icon:K.K5C,label:f.ag._({id:"xeiujy"}),tool:n.Uc.Text}],J=e=>e.appState.activeTool,$=s.memo(function(){let e=v(),t=e.useStore(J);return(0,i.jsx)(a.k,{h:"100%",direction:"column",position:"absolute",right:2,align:"flex-end",justify:"center",zIndex:1,children:(0,i.jsx)(z,{children:(0,i.jsx)(y.g,{spacing:2,children:Z().map(r=>{let{label:n,icon:a,tool:o}=r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{icon:a,label:n,onClick:()=>e.selectTool(o),isActive:t===o,tooltipPlacement:"left","data-testid":"drawing-insert-toolbar-".concat(o)},n),"select"==o&&(0,i.jsx)(X.i,{},"selectDivider")]})})})})})});var ee=r(10625),et=r(67046),er=r(99058),en=r(25481);let ei=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,ea=e=>e.settings.showGrid,eo=s.memo(function(){let e=v(),t=e.useStore(ea);return(0,i.jsx)(a.k,{position:"absolute",top:2,left:2,zIndex:1,children:(0,i.jsx)(z,{children:(0,i.jsxs)(d.U,{spacing:2,children:[(0,i.jsx)(el,{}),(0,i.jsx)(D,{icon:K.fnF,label:t?f.ag._({id:"IsBZFj"}):f.ag._({id:"mWgfWA"}),isActive:t,onClick:()=>e.setSetting("showGrid",!t)},"grid")]})})})}),el=s.memo(function(){let e=v(),t=e.useStore(ei);return(0,i.jsxs)(ee.v,{children:[(0,i.jsxs)(et.j,{as:k.z,"data-test-id":"zoom-menu-button",size:"sm",colorScheme:"trueblue",variant:"ghost",leftIcon:(0,i.jsx)(N.G,{icon:m.Y$T}),children:[Math.round(100*t),"%"]}),(0,i.jsxs)(er.q,{children:[(0,i.jsx)(en.s,{command:"#+",onClick:e.zoomIn,children:(0,i.jsx)(A.cC,{id:"AWOSPo"})}),(0,i.jsx)(en.s,{command:"#-",onClick:e.zoomOut,children:(0,i.jsx)(A.cC,{id:"FjkaiT"})}),(0,i.jsx)(en.s,{command:"0",onClick:e.resetZoom,children:(0,i.jsx)(A.cC,{id:"41NrIs"})}),(0,i.jsx)(en.s,{command:"1",onClick:e.zoomToFit,"data-test-id":"zoom-to-fit-button",children:(0,i.jsx)(A.cC,{id:"pLI1Is"})})]})]})});var es=r(99787);let ec=e=>{let t=(0,s.useCallback)(async(t,r,i)=>{if(!e)return console.warn("[useAssetUpload] OrgId is required to upload assets"),!1;let a=URL.createObjectURL(r);console.debug("[useAssetUpload] Handling upload for file",{file:r,id:i,tempUrl:a});let o=e=>{let r=t.assets.find(e=>e.id===i);if(r){console.debug("[useAssetUpload] Upload complete. Replacing temp asset",{id:i,src:e.src});let n={document:{assets:{[i]:{...r,src:e.src}}}};t.patchState(n,"upload"),t.persist(n,"upload")}};return(0,es.cT)(r,e,{onOriginalFileUpload:o,onUploadComplete:o}),t.patchState({document:{assets:{[i]:{id:i,type:n.LO.Image,fileName:r.name,src:a}}}}),a},[e]),r=(0,s.useCallback)(async(e,t)=>!0,[]);return{onAssetCreate:t,onAssetDelete:r}};var ed=r(10668);let eu={dash:n.g6.Solid,isFilled:!0,color:n.HQ.White},ep=e=>{let{isDark:t,font:r,...d}=e,{currentWorkspace:u}=(0,c.SE)(),[p,h]=(0,s.useState)(),[g,m]=(0,s.useState)(!1),f=(0,s.useCallback)(e=>{h(e),e.style(eu,[]),m(!0)},[]),{onAssetCreate:v,onAssetDelete:b}=ec(null==u?void 0:u.id);(0,s.useEffect)(()=>{p&&void 0!==t&&p.setSetting("isDarkMode",t)},[p,t]);let j=(0,s.useMemo)(()=>(0,ed.c)(t),[t]),y=(0,s.useMemo)(()=>(0,ed.m)(r),[r]);return(0,i.jsxs)(a.k,{sx:{".tl-canvas":{"div, text, textarea":{...y},...j,'g[cursor="grab"][aria-label="link handle"]':{display:"none"}}},onDrop:()=>{},onPaste:()=>{},position:"relative",h:"100%",w:"100%",className:"highlight-mask",children:[(0,i.jsx)(l.xB,{styles:{"#__textLabelMeasure, #__textMeasure":{...y}}}),(0,i.jsxs)(x.Provider,{value:p||{},children:[(0,i.jsx)(n.Dr,{onAssetCreate:v,onAssetDelete:b,...d,onMount:(0,o.v0)(d.onMount,f)}),g&&!d.readOnly&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{}),(0,i.jsx)($,{})]}),g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eo,{})})]})]})};var eh=r(75054),eg=r(51987);let em=e=>eh.cQ.getCommonBounds(e.map(n.D9.getRotatedBounds)),ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,{shapes:r,pageState:{camera:i},rendererBounds:a}=e;if(0===r.length)return;let o=em(r);if(!o)return;let l=n.D9.getCameraZoom(Math.min((a.width-t)/o.width,(a.height-t)/o.height)),s=(a.width-o.width*l)/2/l,c=(a.height-o.height*l)/2/l;e.setCamera(eg.B.toFixed(eg.B.sub([s,c],[o.minX,o.minY])),l,"zoomed_to_fit")}},10668:function(e,t,r){r.d(t,{c:function(){return o},m:function(){return a}});var n=r(35483);let i=e=>"".concat(e," !important"),a=e=>({fontFamily:i(e)}),o=e=>{let t={"[data-shape=image]":{".tl-inner-div":{}},img:{'&[src^="blob:"]':{animation:"loading-pulse-animation 1.5s infinite"}}},r=Object.values(n.HQ),a=e?"dark":"light";return r.forEach(e=>{t['[data-color="'.concat(e,'"]')]={color:i(n.tk.strokes[a][e]),":not(mask) > [fill], &[fill]":{"&:not([fill=none])":{fill:i(n.tk.fills[a][e]),"text, tspan":{fill:i(n.tk.strokes[a][e])}}},"[stroke]":{"&:not([stroke=none])":{stroke:i(n.tk.strokes[a][e])}}}}),t}},81345:function(e,t,r){r.d(t,{O7:function(){return o},S9:function(){return s},kO:function(){return l},mD:function(){return d},td:function(){return c}});var n=r(13326),i=r(56974),a=r.n(i);function o(e){return e===n.Z.pdf}function l(e,t){var r,i;return o(e)||(r=e)===n.Z.doc||r===n.Z.docx||"ppt"===(i=(i=t).toLocaleLowerCase())||"pptx"===i}function s(e){return"otf"===(e=e.toLocaleLowerCase())||"ttf"===e}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";let r=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(r))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n])},d=e=>e.name&&a()(e.name.split("."))||""},78597:function(e,t,r){r.d(t,{OI:function(){return a},uO:function(){return n}});let n=(e,t)=>{let r=0;return new Promise((n,i)=>{let a=()=>{let o=setTimeout(()=>{++r<t.maxRetries?a():i("timed out")},t.timeout);e().then(n).catch(i).finally(()=>{clearTimeout(o)})};a()})},i=e=>new Promise((t,r)=>{setTimeout(()=>{r(Error("timed out"))},e)}),a=(e,t)=>Promise.race([i(t),e])}}]);
//# sourceMappingURL=6656-29daefda9bd43a7d.js.map